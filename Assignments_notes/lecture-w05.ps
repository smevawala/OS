%!PS-Adobe-3.0
%%Creator: groff version 1.19.1
%%CreationDate: Thu Oct 31 04:02:20 2013
%%DocumentNeededResources: font Times-Roman
%%+ font Times-Bold
%%+ font Courier
%%+ font Times-Italic
%%DocumentSuppliedResources: file obj.eps
%%+ file compile.eps
%%+ file maps.eps
%%+ file cow.eps
%%+ file arch.eps
%%+ file multilev.eps
%%+ file addtrans.eps
%%+ procset grops 1.19 1
%%Pages: 28
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.19 1
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Roman
%%IncludeResource: font Times-Bold
%%IncludeResource: font Courier
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Courier@0 ENC0/Courier RE
/Times-Bold@0 ENC0/Times-Bold RE/Times-Roman@0 ENC0/Times-Roman RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)69.336 60 Q
(Unit 5/pg 1)55.998 E(\2512013 Jef)126.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Bold@0 SF -.481(Vi)221.907 120 S(rtual Memory).481 E/F2 13
/Times-Roman@0 SF 2.657 -1.04(We h)33.336 156 T -2.925 -.26(av e)1.04 H
.576(stated that a UNIX process is a virtual computer in which a thread\
 of e)4.086 F -.195(xe)-.195 G(cution).195 E .555
(\(virtual processor\) runs within a pri)33.336 171 R -.325(va)-.325 G
.555(te virtual address space.).325 F .556(In this unit, we will be)
7.055 F(gin)-.195 E .975(to e)33.336 186 R .975(xplore the mechanisms b\
y which this is implemented, both from a generic hardw)-.195 F(are)-.13
E 2.518(and a generic k)33.336 201 R 2.518(ernel standpoint.)-.13 F
2.518(In a later unit, we will return to this topic and see)9.018 F
(speci\214c hardw)33.336 216 Q(are architecture and k)-.13 E
(ernel code.)-.13 E 1.941(All addresses used in a program are)33.336 237
R F1 1.941(virtual addr)5.191 F(esses)-.234 E F2 8.441(.B)C 1.941
(efore being used to address)-8.441 F(ph)33.336 252 Q 1.729
(ysical memory or memory-mapped I/O, virtual addresses are)-.065 F F1
(translated)4.979 E F2(to)4.979 E F1(ph)4.979 E(ysical)-.195 E(addr)
33.336 267 Q(esses)-.234 E F2 6.526(.T)C .026
(his translation is performed)-6.526 F F1 .026(by hard)3.276 F(war)-.195
E(e)-.234 E F2 .026(within the processor kno)3.276 F .026(wn as the)
-.325 F F1(Memory Management Unit \(MMU\))33.336 282 Q F2(.)A .541
(Since the operating system k)33.336 303 R .542
(ernel has sole access to the MMU')-.13 F 3.792(sl)-.715 G .542
(ookup tables, it has the)-3.792 F
(ability to completely control the vie)33.336 318 Q 3.25(wo)-.325 G 3.25
(fm)-3.25 G(emory a gi)-3.25 E -.195(ve)-.325 G 3.25(np).195 G
(rocess can see.)-3.25 E 1.391
(Address translation is performed with the granularity of a)33.336 339 R
F1(page)4.641 E F2 7.891(.A)C 4.641(na)-7.891 G 1.391(ddress is di)
-4.641 F(vided)-.325 E 1.261(into tw)33.336 354 R 4.511(op)-.13 G 4.511
(arts: The)-4.511 F F1 1.261(page number)4.511 F F2 4.511(,c)C 1.261
(omprising the most signi\214cant bits, and the)-4.511 F F1(offset)4.511
E F2(,)A 1.94(comprising the least signi\214cant bits.)33.336 369 R
1.939(Address translation operates on the)8.439 F F1 1.939(virtual page)
5.189 F(number)33.336 384 Q F2 5.912(,r)C 2.663(eplacing it with the)
-5.912 F F1(ph)5.913 E 2.663(ysical page number)-.195 F F2 9.163(.T)C
2.663(he of)-9.163 F 2.663(fset is passed through)-.325 F 6.4
(unchanged. T)33.336 399 R 3.15(ypical page sizes are 2K, 4K and 8K.)
-1.04 F 3.149(On the X86 32-bit and 64-bit)9.65 F
(architectures a page size of 4K is used.)33.336 414 Q .846
(Another name for a ph)33.336 435 R .847(ysical page of memory is a)
-.065 F F1 .847(page frame)4.097 F F2 4.097(,b)C .847
(ecause we can think of)-4.097 F(ph)33.336 450 Q .761(ysical pages as e\
mpty frames into which the actual meaningful content is placed from)
-.065 F 1.861(time to time.)33.336 465 R -1.04(We)8.361 G -.13('l)1.04 G
5.111(ls).13 G 1.861(ee that a gi)-5.111 F -.195(ve)-.325 G 5.112(np)
.195 G 1.862(age frame will hold man)-5.112 F 5.112(yd)-.195 G(if)-5.112
E 1.862(ferent virtual page)-.325 F(images o)33.336 480 Q -.195(ve)-.195
G 3.25(rt).195 G(ime.)-3.25 E 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 2)73.998 E(\2512013 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E 0 0 468 485 -398.524 413 33.336 518.524 PBEGIN
%%BeginDocument: addtrans.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: addtrans.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Thu Feb 16 18:27:04 2012
%%For: hak@lex ()
%%BoundingBox: 0 0 485 413
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 413 moveto 0 0 lineto 485 0 lineto 485 413 lineto closepath clip newpath
-21.8 432.7 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Polyline
7.500 slw
gs  clippath
2967 4551 m 3013 4590 l 3111 4475 l 3011 4547 l 3066 4436 l cp
eoclip
n 3720 3720 m
 3000 4560 l gs col0 s gr gr

% arrowhead
n 3066 4436 m 3011 4547 l 3111 4475 l  col0 s
% Polyline
n 600 1875 m 375 1875 l 375 5700 l 600 5700 l
 cp gs col0 s gr 
% here ends figure;
% 
% here starts figure with depth 0
% Polyline
7.500 slw
n 5700 600 m
 5700 1200 l gs col-1 s gr 
% Polyline
n 5700 6600 m
 5700 7200 l gs col-1 s gr 
% Polyline
n 8400 1200 m 8400 600 l 2400 600 l 2400 1200 l
 cp gs col-1 s gr 
% Polyline
n 375 4500 m
 5700 4500 l gs col-1 s gr 
% Polyline
n 375 4800 m
 5700 4800 l gs col-1 s gr 
% Polyline
n 375 3000 m
 5700 3000 l gs col-1 s gr 
% Polyline
n 900 1875 m
 900 5700 l gs col-1 s gr 
% Polyline
n 1200 1875 m
 1200 5700 l gs col-1 s gr 
% Polyline
n 1500 1875 m
 1500 5700 l gs col-1 s gr 
% Polyline
n 1800 1875 m
 1800 5700 l gs col-1 s gr 
% Polyline
n 2100 1875 m
 2100 5700 l gs col-1 s gr 
% Polyline
n 8400 7200 m 8400 6600 l 2400 6600 l 2400 7200 l
 cp gs col-1 s gr 
% Polyline
n 2400 1875 m
 2400 5700 l gs col-1 s gr 
% Polyline
n 3600 4800 m 3600 6300 l 3300 6300 l 3900 6600 l 4500 6300 l 4200 6300 l
 4200 4800 l
 cp gs col-1 s gr 
% Polyline
n 6600 1200 m 6600 6300 l 6300 6300 l 6900 6600 l 7500 6300 l 7200 6300 l
 7200 1200 l
 cp gs col-1 s gr 
% Polyline
gs  clippath
5685 4620 m 5685 4680 l 5837 4680 l 5717 4650 l 5837 4620 l cp
eoclip
n 4725 1200 m 4725 1650 l 6000 1650 l 6000 4650 l
 5700 4650 l gs col-1 s gr gr

% arrowhead
n 5837 4620 m 5717 4650 l 5837 4680 l  col-1 s
% Polyline
n 5700 5700 m 5700 1875 l 600 1875 l 600 5700 l
 cp gs col-1 s gr 
/Times-Roman ff 200.00 scf sf
8325 525 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman ff 200.00 scf sf
2475 525 m
gs 1 -1 sc (31) col-1 sh gr
/Times-Roman ff 200.00 scf sf
8250 6525 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman ff 200.00 scf sf
2325 2925 m
gs 1 -1 sc  90.0 rot (Execute) col-1 sh gr
/Times-Roman ff 200.00 scf sf
1725 2925 m
gs 1 -1 sc  90.0 rot (Read) col-1 sh gr
/Times-Roman ff 233.33 scf sf
1125 2925 m
gs 1 -1 sc  90.0 rot (Dirty) col-1 sh gr
/Times-Roman ff 200.00 scf sf
825 2925 m
gs 1 -1 sc  90.0 rot (Present) col-1 sh gr
/Times-Roman ff 200.00 scf sf
2100 2925 m
gs 1 -1 sc  90.0 rot (Write) col-1 sh gr
/Times-Roman ff 200.00 scf sf
2400 6450 m
gs 1 -1 sc (31) col-1 sh gr
/Times-Roman ff 233.33 scf sf
3375 525 m
gs 1 -1 sc (Virtual Page Number) col-1 sh gr
/Times-Roman ff 233.33 scf sf
6300 525 m
gs 1 -1 sc (Offset) col-1 sh gr
/Times-Roman ff 233.33 scf sf
675 1050 m
gs 1 -1 sc (Virtual Address:) col-1 sh gr
/Times-Roman ff 233.33 scf sf
1425 6900 m
gs 1 -1 sc (Physical Address:) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman ff 233.33 scf sf
4200 2775 m
gs 1 -1 sc (Physical Page Number) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman ff 233.33 scf sf
5625 1125 m
gs 1 -1 sc (0111 0000 1011 1111 0101) dup sw pop neg 0 rm  col-1 sh gr
/Times-Roman ff 233.33 scf sf
5850 1125 m
gs 1 -1 sc (1111 0000 0111) col-1 sh gr
/Times-Roman ff 233.33 scf sf
5775 7050 m
gs 1 -1 sc (1111 0000 0111) col-1 sh gr
/Times-Roman ff 233.33 scf sf
5550 4800 m
gs 1 -1 sc (0100 0000 1111 1010 0111) dup sw pop neg 0 rm  col-1 sh gr
/Times-Roman ff 233.33 scf sf
5625 7050 m
gs 1 -1 sc (0100 0000 1111 1010 0111) dup sw pop neg 0 rm  col-1 sh gr
/Times-Roman ff 233.33 scf sf
1050 4800 m
gs 1 -1 sc (0) dup sw pop neg 0 rm  col-1 sh gr
/Times-Roman ff 233.33 scf sf
1350 4800 m
gs 1 -1 sc (1) dup sw pop neg 0 rm  col-1 sh gr
/Times-Roman ff 233.33 scf sf
1650 4800 m
gs 1 -1 sc (1) dup sw pop neg 0 rm  col-1 sh gr
/Times-Roman ff 233.33 scf sf
1950 4800 m
gs 1 -1 sc (1) dup sw pop neg 0 rm  col-1 sh gr
/Times-Roman ff 233.33 scf sf
2250 4800 m
gs 1 -1 sc (1) dup sw pop neg 0 rm  col-1 sh gr
/Times-Roman ff 233.33 scf sf
825 4800 m
gs 1 -1 sc (1) dup sw pop neg 0 rm  col-1 sh gr
/Times-Roman ff 233.33 scf sf
4200 3600 m
gs 1 -1 sc (Page Table Entry) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman ff 200.00 scf sf
525 2925 m
gs 1 -1 sc  90.0 rot (Priv) col-1 sh gr
/Times-Roman ff 233.33 scf sf
525 4800 m
gs 1 -1 sc (0) dup sw pop neg 0 rm  col-1 sh gr
/Times-Roman ff 200.00 scf sf
1425 2925 m
gs 1 -1 sc  90.0 rot (Accessed) col-1 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND/F1 13/Times-Roman@0 SF
(The virtual page number \(conceptually\) inde)33.336 560.524 Q -.195
(xe)-.195 G 3.25(st).195 G(he follo)-3.25 E(wing per)-.325 E
(-page data:)-.26 E<83>43.336 575.524 Q/F2 13/Times-Bold@0 SF(Pr)4.419 E
1.169(esent bit)-.234 F F1 4.419(:I)C 4.418(fs)-4.419 G 1.168
(et, this virtual page is resident \(maps to a ph)-4.418 F 1.168
(ysical page frame\) and)-.065 F 2.334(the ph)69.336 590.524 R 2.334
(ysical page number \214eld is v)-.065 F 5.585(alid. If)-.325 F 2.335
(the Present bit is clear)5.585 F 5.585(,t)-.52 G 2.335(here is no)
-5.585 F(ph)69.336 605.524 Q .503
(ysical page frame allocated to this virtual address.)-.065 F .502
(When there is no translation)7.002 F .491
(\(page table entry has clear Present bit\), it results in a)69.336
620.524 R F2 -.13(Pa)3.742 G .492(ge F).13 F(ault)-.325 E F1 6.992(.A)C
3.742(sw)-6.992 G 3.742(ew)-3.742 G .492(ill see,)-3.742 F
(this is not necessarily a bad thing.)69.336 635.524 Q 3.327<8354>43.336
665.524 S(he)-3.327 E F2(Ph)3.327 E .077(ysical P)-.195 F .077
(age Number)-.13 F F1 .077(\(also kno)3.327 F .077(wn as the P)-.325 F
.077(age Frame number or PFN\) which is)-.195 F
(translated for this virtual page.)69.336 680.524 Q
(If the Present bit is clear)6.5 E 3.25(,t)-.52 G(his \214eld is in)
-3.25 E -.325(va)-.52 G(lid.).325 E<83>43.336 710.524 Q F2(Pr)5.403 E
2.153(otection bits)-.234 F F1 5.403(:D)C 2.154
(etermines what type of accesses are allo)-5.403 F 2.154
(wed to this page: read,)-.325 F .728(write, e)69.336 725.524 R -.195
(xe)-.195 G 3.978(cute. An).195 F .728(attempt to perform a disallo)
3.978 F .728(wed access results in a)-.325 F F2(pr)3.977 E(otection)
-.234 E(fault)69.336 740.524 Q F1 7.081(.\()C .581(Not all hardw)-7.081
F .582(are maintains all three of these protection bits.)-.13 F .582
(In particular)7.082 F(,)-.52 E 0 Cg EP
%%Page: 3 3
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 3)73.998 E(\2512013 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Roman@0 SF 2.717
(the x86 architecture prior to Pentium-4 has only tw)69.336 120 R 5.967
(ol)-.13 G -2.795 -.325(ev e)-5.967 H 2.716(ls of access control:).325 F
2.306
(readonly and readwrite, and does not distinguish between protection f)
69.336 135 R 2.306(aults and)-.13 F(page f)69.336 150 Q(aults.\))-.13 E
<83>43.336 180 Q/F2 13/Times-Bold@0 SF .602(Dirty bit)3.852 F F1 3.852
(:S)C .602(et by hardw)-3.852 F .602(are when a page is modi\214ed.)-.13
F .602(Cleared by the k)7.102 F .601(ernel when the)-.13 F
(page has been synced to backing storage.)69.336 195 Q<83>43.336 225 Q
F2 2.464(Accessed bit)5.714 F F1 5.714(:S)C 2.464(et by hardw)-5.714 F
2.464(are when a page is accessed \(read, write or e)-.13 F -.195(xe)
-.195 G(cute\).).195 E(Cleared by the k)69.336 240 Q
(ernel while aging \(scanning\) page frames for re-use.)-.13 E<83>43.336
270 Q F2(Pri)4.846 E 1.596(vileged Bit)-.13 F F1 4.846(:W)C 1.595
(hen set, this page can only be accessed while the processor is in)
-4.846 F(pri)69.336 285 Q(vile)-.325 E .486(ged \(i.e. "k)-.195 F .486
(ernel"\) mode.)-.13 F .486(This allo)6.986 F .486(ws k)-.325 F .486
(ernel memory to be mapped into the)-.13 F .737(virtual address space o\
f a process and be visible only when the process enters the)69.336 300 R
-.13(ke)69.336 315 S 8.812(rnel. The).13 F 5.562
(X86 architecture uses the Pri)8.812 F(vile)-.325 E 5.563
(ged Bit approach, b)-.195 F 5.563(ut other)-.26 F 2.662
(architectures switch to a dif)69.336 330 R 2.662
(ferent set of page tables upon entry to the k)-.325 F(ernel.)-.13 E
-1.04(We)69.336 345 S -.13('l)1.04 G 4.946(ls).13 G 1.696(ee ho)-4.946 F
4.946(wL)-.325 G 1.697(inux under the X86 architecture uses the Pri)
-4.946 F(vile)-.325 E 1.697(ged Bit in later)-.195 F(units.)69.336 360 Q
F2(Multi-Le)200.275 405 Q -.13(ve)-.195 G 3.25(lP).13 G(age T)-3.38 E
(ables)-1.196 E F1(Conceptually)33.336 441 Q 5.558(,t)-.845 G 2.308
(he virtual page number is an inde)-5.558 F 5.557(xi)-.195 G 2.307
(nto an array)-5.557 F 5.557(,e)-.845 G 2.307(ach entry of which)-5.557
F .091(contains the ph)33.336 456 R .091
(ysical page number and \215ags described abo)-.065 F -.195(ve)-.195 G
6.591(.T).195 G .091(here are se)-6.591 F -.195(ve)-.325 G .091
(ral problems).195 F(which pre)33.336 471 Q -.195(ve)-.325 G
(nt this from being a realistic implementation.).195 E 1.324(Let us con\
sider a 32-bit architecture with 4K pages, therefore the page numbers a\
re 20)33.336 492 R 1.651
(bits long and there are 2^20 possible page numbers.)33.336 507 R 1.651
(If each PTE is 32 bits long, then)8.151 F .64(each page table w)33.336
522 R .64(ould consume 4MB.)-.13 F .64(Although this might seem lik)7.14
F 3.89(ea)-.13 G .639(small amount of)-.001 F(memory)33.336 537 Q 4.912
(,r)-.845 G 1.662(emember that each process on the system has its o)
-4.912 F 1.662(wn page table.)-.325 F 4.913(As)8.163 G(ystem)-4.913 E
.171(with 100 processes w)33.336 552 R .171(ould therefore be w)-.13 F
.171(asting a lar)-.13 F .171(ge amount of memory on page tables.)-.234
F .647(The problem is e)33.336 573 R -.195(ve)-.325 G 3.897(nm).195 G
.647(ore se)-3.897 F -.195(ve)-.325 G .647
(re on 64-bit machines which ha).195 F 1.037 -.195(ve a l)-.26 H(ar).195
E .648(ger virtual address)-.234 F 4.624(space. Ev)33.336 588 R 1.374(e\
n if only 48 bits of the address space are recognized, with a 4K page, \
there)-.195 F -.13(wo)33.336 603 S
(uld be 2^36 PTEs consuming 2^39, or 512GB, of ph).13 E
(ysical memory per process!)-.065 E .305(The problem of lar)33.336 624 R
.305(ge page tables is addressed with)-.234 F F2(multi-le)3.555 E -.13
(ve)-.195 G(l).13 E F1 .305(page tables.)3.555 F .305(The ph)6.805 F
(ysical)-.065 E 1.139(address of the top-le)33.336 639 R -.195(ve)-.325
G 4.389(lp).195 G 1.139(age table is gi)-4.389 F -.195(ve)-.325 G 4.389
(ni).195 G 4.389(nt)-4.389 G 1.139(he CPU/MMU "B)-4.389 F 1.139(ASE" re)
-.455 F 1.139(gister \(re)-.195 F(gister)-.195 E 1.239(%cr3 on X86\).)
33.336 654 R 1.24
(The most signi\214cant bits of the virtual address inde)7.739 F 4.49
(xi)-.195 G 1.24(nto this top-le)-4.49 F -.195(ve)-.325 G(l).195 E 7.81
(table. The)33.336 669 R 4.56(result is not the page table entry)7.81 F
7.809(,b)-.845 G 4.559(ut is the ph)-8.069 F 4.559
(ysical address of the)-.065 F .94(corresponding table at the ne)33.336
684 R .94(xt lo)-.195 F .94(wer le)-.325 F -.195(ve)-.325 G 4.19(lo).195
G 4.19(ft)-4.19 G .94(he hierarch)-4.19 F 5.88 -.845(y. T)-.065 H .94
(hat ph).845 F .94(ysical address, plus)-.065 F .67
(the bits from the ne)33.336 699 R .669(xt most signi\214cant part of t\
he virtual address, locates the entry in the)-.195 F(ne)33.336 714 Q
.672(xt page table, etc.)-.195 F .673(At the last step, the actual PTE \
\(page table entry\) is fetched, which)7.172 F
(contains the PFN and the \215ags.)33.336 729 Q 0 Cg EP
%%Page: 4 4
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 4)73.998 E(\2512013 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Roman@0 SF .632
(On modern computer architectures, 2-, 3- or 4-le)33.336 120 R -.195(ve)
-.325 G 3.882(lp).195 G .632(aging structures are the norm.)-3.882 F
(The)7.132 E 3.414(illustration belo)33.336 135 R 6.664(ws)-.325 G(ho)
-6.664 E 3.414(ws 3 le)-.325 F -.195(ve)-.325 G 3.414
(ls, and is meant to be schematic, not an).195 F 6.664(yp)-.195 G
(articular)-6.664 E .726(processor type.)33.336 150 R(2-le)7.226 E -.195
(ve)-.325 G 3.976(lo).195 G 3.975(r3)-3.976 G(-le)-3.975 E -.195(ve)
-.325 G 3.975(ls).195 G .725
(tructures are typical for 32 bit machines, while 64 bit)-3.975 F
(virtual addresses mandate 4-le)33.336 165 Q -.195(ve)-.325 G 3.25(ls)
.195 G(tructures to achie)-3.25 E .39 -.195(ve a)-.325 H .39 -.195(ny k)
.195 H(ind of memory ef).195 E(\214cienc)-.325 E -.845(y.)-.195 G .308
(On the X86 32 bit system, the page table is 2-le)33.336 186 R -.195(ve)
-.325 G 3.558(lw).195 G .308(ith the page number split 10/10 bits.)
-3.558 F .913(Since PTEs \214t in a 32-bit w)33.336 201 R .913
(ord, the top-le)-.13 F -.195(ve)-.325 G 4.162(lt).195 G .912
(able and all of the second-le)-4.162 F -.195(ve)-.325 G 4.162(lt).195 G
.912(ables are)-4.162 F 1.134(4096 bytes long, i.e. one page. On X86-64\
, although addresses are 64 bits, only 48 bits)33.336 216 R .189
(are signi\214cant.)33.336 231 R -.52(Wi)6.689 G .189
(th a 4K page size, this lea).52 F -.195(ve)-.26 G 3.438(sa3).195 G
3.438(6b)-3.438 G .188(it page number)-3.438 F 3.438(,w)-.52 G .188
(hich is translated)-3.438 F .967(via a 4-le)33.336 246 R -.195(ve)-.325
G 4.217(lp).195 G .967(age table split 9/9/9/9.)-4.217 F .968
(64 bits are required for each PTE.)7.468 F .968(Once ag)7.468 F .968
(ain, at)-.065 F(each le)33.336 261 Q -.195(ve)-.325 G 3.25(lt).195 G
(he table is one page long.)-3.25 E 1.385
(It is possible for entries in these tables \(other than the lo)33.336
282 R(west-le)-.325 E -.195(ve)-.325 G 4.635(lp).195 G 1.385
(age table itself\) to)-4.635 F 4.391(contain "NULL pointers".)33.336
297 R 4.392(This means that the entire contiguous range of virtual)
10.891 F 3.06(addresses corresponding to that entry is not mapped.)
33.336 312 R(Whene)9.559 E -.195(ve)-.325 G 6.309(raN).195 G 3.059
(ULL pointer is)-6.309 F 1.098(encountered during the tra)33.336 327 R
-.195(ve)-.26 G 1.098(rsal of the multi-le).195 F -.195(ve)-.325 G 4.348
(lp).195 G 1.098(age table structure, it causes a P)-4.348 F(age)-.195 E
-.195(Fa)33.336 342 S
(ult, the same as if the Present bit of the PTE were 0.).195 E .356
(As a speci\214c e)33.336 363 R .356(xample, let us say the address siz\
e is 32 bits and the page table structure is)-.195 F 3.408
(10/10. Therefore,)33.336 378 R .159(each entry in the top-le)3.408 F
-.195(ve)-.325 G 3.409(lp).195 G .159(age table co)-3.409 F -.195(ve)
-.195 G .159(rs 10+12=22 bits, or 4MB of).195 F 1.022(address space.)
33.336 393 R 1.022(Suppose that the \214rst entry in the top-le)7.522 F
-.195(ve)-.325 G 4.271(lt).195 G 1.021(able is NULL.)-4.271 F 1.021
(Then virtual)7.521 F 1.893
(addresses 0x00000000-0x003FFFFF will be unmapped.)33.336 408 R 1.894
(This scheme a)8.394 F -.26(vo)-.26 G 1.894(ids ha).26 F 1.894(ving to)
-.26 F .137(allocate page table entries for lar)33.336 423 R .137
(ge, unmapped portions of the virtual address space.)-.234 F(This)6.637
E .667(is analogous to sparse \214le allocation \(recall from unit 2 th\
at when one lseeks be)33.336 438 R .668(yond the)-.195 F .146(current e\
nd of \214le and writes, this creates a "hole" in the \214le for which \
actual disk storage)33.336 453 R(may not be allocated\))33.336 468 Q
.322(The entire page table structure of e)33.336 489 R -.195(ve)-.325 G
.323(ry process on the system need not be resident at an).195 F(y)-.195
E(gi)33.336 504 Q -.195(ve)-.325 G 3.933(nt).195 G 3.933(ime. The)-3.933
F -.13(ke)3.933 G .682(rnel can construct the necessary structures "on-\
the-\215y" in response to).13 F 3.25(ap)33.336 519 S(age f)-3.25 E 3.25
(ault. Only)-.13 F(the top-le)3.25 E -.195(ve)-.325 G 3.25(lp).195 G
(age table needs to be allocated for each process.)-3.25 E -.195(Pa)
33.336 540 S .035(ge tables are in ef).195 F .036
(fect a data structure, k)-.325 F .036(ept in ph)-.13 F .036
(ysical memory)-.065 F 6.536(.T)-.845 G .036(he layout of this data)
-6.536 F 1.254
(structure is mandated by the processor architecture. The k)33.336 555 R
1.253(ernel has been compiled with)-.13 F 4.901(architecture-speci\214c\
 code that understands the layout of the page tables and can)33.336 570
R(manipulate and manage them.)33.336 585 Q 1.18(Since the base address \
of the page table for the currently running process is stored in a)
33.336 606 R .713(CPU re)33.336 621 R .713(gister \(re)-.195 F .713
(gister CR3 for the X86\), at)-.195 F/F2 13/Times-Bold@0 SF .713
(context switch)3.963 F F1 .713(time, the k)3.963 F .714
(ernel changes this)-.13 F(re)33.336 636 Q
(gister to point to the top-le)-.195 E -.195(ve)-.325 G 3.25(lp).195 G
(age table of the ne)-3.25 E 3.25(wp)-.325 G
(rocess, thus switching to its virtual)-3.25 E(address space.)33.336 651
Q 0 Cg EP
%%Page: 5 5
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 5)73.998 E(\2512013 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E 0 0 455 455 -338 338 39.836 458 PBEGIN
%%BeginDocument: multilev.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: multilev.eps
%%Creator: fig2dev Version 3.2.3 Patchlevel 
%%CreationDate: Thu Feb 22 21:25:56 2001
%%For: hak@astor.cooper.edu (hak)
%%BoundingBox: 0 0 455 338
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 338 moveto 0 0 lineto 455 0 lineto 455 338 lineto closepath clip newpath
-53.0 361.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/reencdict 12 dict def /ReEncode { reencdict begin
/newcodesandnames exch def /newfontname exch def /basefontname exch def
/basefontdict basefontname findfont def /newfont basefontdict maxlength dict def
basefontdict { exch dup /FID ne { dup /Encoding eq
{ exch dup length array copy newfont 3 1 roll put }
{ exch newfont 3 1 roll put } ifelse } { pop pop } ifelse } forall
newfont /FontName newfontname put newcodesandnames aload pop
128 1 255 { newfont /Encoding get exch /.notdef put } for
newcodesandnames length 2 idiv { newfont /Encoding get 3 1 roll put } repeat
newfontname newfont definefont pop end } def
/isovec [
8#055 /minus 8#200 /grave 8#201 /acute 8#202 /circumflex 8#203 /tilde
8#204 /macron 8#205 /breve 8#206 /dotaccent 8#207 /dieresis
8#210 /ring 8#211 /cedilla 8#212 /hungarumlaut 8#213 /ogonek 8#214 /caron
8#220 /dotlessi 8#230 /oe 8#231 /OE
8#240 /space 8#241 /exclamdown 8#242 /cent 8#243 /sterling
8#244 /currency 8#245 /yen 8#246 /brokenbar 8#247 /section 8#250 /dieresis
8#251 /copyright 8#252 /ordfeminine 8#253 /guillemotleft 8#254 /logicalnot
8#255 /hypen 8#256 /registered 8#257 /macron 8#260 /degree 8#261 /plusminus
8#262 /twosuperior 8#263 /threesuperior 8#264 /acute 8#265 /mu 8#266 /paragraph
8#267 /periodcentered 8#270 /cedilla 8#271 /onesuperior 8#272 /ordmasculine
8#273 /guillemotright 8#274 /onequarter 8#275 /onehalf
8#276 /threequarters 8#277 /questiondown 8#300 /Agrave 8#301 /Aacute
8#302 /Acircumflex 8#303 /Atilde 8#304 /Adieresis 8#305 /Aring
8#306 /AE 8#307 /Ccedilla 8#310 /Egrave 8#311 /Eacute
8#312 /Ecircumflex 8#313 /Edieresis 8#314 /Igrave 8#315 /Iacute
8#316 /Icircumflex 8#317 /Idieresis 8#320 /Eth 8#321 /Ntilde 8#322 /Ograve
8#323 /Oacute 8#324 /Ocircumflex 8#325 /Otilde 8#326 /Odieresis 8#327 /multiply
8#330 /Oslash 8#331 /Ugrave 8#332 /Uacute 8#333 /Ucircumflex
8#334 /Udieresis 8#335 /Yacute 8#336 /Thorn 8#337 /germandbls 8#340 /agrave
8#341 /aacute 8#342 /acircumflex 8#343 /atilde 8#344 /adieresis 8#345 /aring
8#346 /ae 8#347 /ccedilla 8#350 /egrave 8#351 /eacute
8#352 /ecircumflex 8#353 /edieresis 8#354 /igrave 8#355 /iacute
8#356 /icircumflex 8#357 /idieresis 8#360 /eth 8#361 /ntilde 8#362 /ograve
8#363 /oacute 8#364 /ocircumflex 8#365 /otilde 8#366 /odieresis 8#367 /divide
8#370 /oslash 8#371 /ugrave 8#372 /uacute 8#373 /ucircumflex
8#374 /udieresis 8#375 /yacute 8#376 /thorn 8#377 /ydieresis] def
/Times-Roman /Times-Roman-iso isovec ReEncode
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
%%Page: 1 1
10 setmiterlimit
 0.06000 0.06000 sc
% Polyline
7.500 slw
n 7140 1500 m
 7140 4500 l gs col0 s gr 
% Polyline
gs  clippath
2132 1731 m 2073 1718 l 2040 1866 l 2096 1756 l 2099 1879 l cp
eoclip
n 1980 2280 m
 2100 1740 l gs col0 s gr gr

% arrowhead
n 2099 1879 m 2096 1756 l 2040 1866 l  col0 s
% Polyline
gs  clippath
7245 3750 m 7245 3810 l 7397 3810 l 7277 3780 l 7397 3750 l cp
eoclip
n 7860 3780 m
 7260 3780 l gs col0 s gr gr

% arrowhead
n 7397 3750 m 7277 3780 l 7397 3810 l  col0 s
/Times-Roman-iso ff 180.00 scf sf
3360 1440 m
gs 1 -1 sc (Top-Level) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
5280 1440 m
gs 1 -1 sc (Mid-Level) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
6840 1440 m
gs 1 -1 sc (PTE's) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 210.00 scf sf
3420 1980 m
gs 1 -1 sc  270.0 rot (2  5  6   e  n  t  r  i  e  s) col0 sh gr
/Times-Roman-iso ff 210.00 scf sf
5160 2040 m
gs 1 -1 sc  270.0 rot (6  4      e  n  t  r  i  e  s) col0 sh gr
/Times-Roman-iso ff 210.00 scf sf
6840 2040 m
gs 1 -1 sc  270.0 rot (6  4      e  n  t  r  i  e  s) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
1140 2280 m
gs 1 -1 sc (Phys Addr) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
5460 4920 m
gs 1 -1 sc (20 bits) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
2760 3060 m
gs 1 -1 sc (32) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
4080 3000 m
gs 1 -1 sc (32) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
4440 2520 m
gs 1 -1 sc (32) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
5820 2520 m
gs 1 -1 sc (32) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
6240 3900 m
gs 1 -1 sc (32) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
2040 1620 m
gs 1 -1 sc (32) col0 sh gr
/Times-Roman-iso ff 180.00 scf sf
7860 3840 m
gs 1 -1 sc (FLAGS) col0 sh gr
% Polyline
n 3075 1500 m 3900 1500 l 3900 4500 l 3075 4500 l
 cp gs col-1 s gr 
% Polyline
n 3075 4200 m
 3900 4200 l gs col-1 s gr 
% Polyline
n 3075 3900 m
 3900 3900 l gs col-1 s gr 
% Polyline
n 3075 3600 m
 3900 3600 l gs col-1 s gr 
% Polyline
n 3075 3300 m
 3900 3300 l gs col-1 s gr 
% Polyline
n 3075 3000 m
 3900 3000 l gs col-1 s gr 
% Polyline
n 3075 2700 m
 3900 2700 l gs col-1 s gr 
% Polyline
n 3075 2400 m
 3900 2400 l gs col-1 s gr 
% Polyline
n 3075 2100 m
 3900 2100 l gs col-1 s gr 
% Polyline
n 3075 1800 m
 3900 1800 l gs col-1 s gr 
% Polyline
n 4800 1500 m 5625 1500 l 5625 4500 l 4800 4500 l
 cp gs col-1 s gr 
% Polyline
n 4800 4200 m
 5625 4200 l gs col-1 s gr 
% Polyline
n 4800 3900 m
 5625 3900 l gs col-1 s gr 
% Polyline
n 4800 3600 m
 5625 3600 l gs col-1 s gr 
% Polyline
n 4800 3300 m
 5625 3300 l gs col-1 s gr 
% Polyline
n 4800 3000 m
 5625 3000 l gs col-1 s gr 
% Polyline
n 4800 2700 m
 5625 2700 l gs col-1 s gr 
% Polyline
n 4800 2400 m
 5625 2400 l gs col-1 s gr 
% Polyline
n 4800 2100 m
 5625 2100 l gs col-1 s gr 
% Polyline
n 4800 1800 m
 5625 1800 l gs col-1 s gr 
% Polyline
n 6525 1500 m 7350 1500 l 7350 4500 l 6525 4500 l
 cp gs col-1 s gr 
% Polyline
n 6525 4200 m
 7350 4200 l gs col-1 s gr 
% Polyline
n 6525 3900 m
 7350 3900 l gs col-1 s gr 
% Polyline
n 6525 3600 m
 7350 3600 l gs col-1 s gr 
% Polyline
n 6525 3300 m
 7350 3300 l gs col-1 s gr 
% Polyline
n 6525 3000 m
 7350 3000 l gs col-1 s gr 
% Polyline
n 6525 2700 m
 7350 2700 l gs col-1 s gr 
% Polyline
n 6525 2400 m
 7350 2400 l gs col-1 s gr 
% Polyline
n 6525 2100 m
 7350 2100 l gs col-1 s gr 
% Polyline
n 6525 1800 m
 7350 1800 l gs col-1 s gr 
% Ellipse
n 2550 1650 225 225 0 360 DrawEllipse gs col-1 s gr

% Ellipse
n 4362 1650 225 225 0 360 DrawEllipse gs col-1 s gr

% Ellipse
n 6150 1650 225 225 0 360 DrawEllipse gs col-1 s gr

% Polyline
n 8400 1200 m 8400 600 l 2400 600 l 2400 1200 l
 cp gs col-1 s gr 
% Polyline
n 6300 600 m
 6300 1200 l gs col-1 s gr 
% Polyline
 [60] 0 sd
n 3600 600 m
 3600 1200 l gs col-1 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5100 600 m
 5100 1200 l gs col-1 s gr  [] 0 sd
% Polyline
gs  clippath
2520 1440 m 2580 1440 l 2580 1288 l 2550 1408 l 2520 1288 l cp
eoclip
n 2550 1200 m
 2550 1425 l gs col-1 s gr gr

% arrowhead
n 2520 1288 m 2550 1408 l 2580 1288 l  col-1 s
% Polyline
n 1800 1950 m 1800 1350 l 900 1350 l 900 1950 l
 cp gs col-1 s gr 
% Polyline
gs  clippath
2340 1680 m 2340 1620 l 2188 1620 l 2308 1650 l 2188 1680 l cp
eoclip
n 1800 1650 m
 2325 1650 l gs col-1 s gr gr

% arrowhead
n 2188 1680 m 2308 1650 l 2188 1620 l  col-1 s
% Polyline
gs  clippath
3090 3180 m 3090 3120 l 2938 3120 l 3058 3150 l 2938 3180 l cp
eoclip
n 2550 1875 m 2550 3150 l
 3075 3150 l gs col-1 s gr gr

% arrowhead
n 2938 3180 m 3058 3150 l 2938 3120 l  col-1 s
% Polyline
gs  clippath
4320 1440 m 4380 1440 l 4380 1288 l 4350 1408 l 4320 1288 l cp
eoclip
n 4350 1200 m
 4350 1425 l gs col-1 s gr gr

% arrowhead
n 4320 1288 m 4350 1408 l 4380 1288 l  col-1 s
% Polyline
gs  clippath
4215 1680 m 4215 1620 l 4063 1620 l 4183 1650 l 4063 1680 l cp
eoclip
n 3825 3150 m 4050 3150 l 4050 1650 l
 4200 1650 l gs col-1 s gr gr

% arrowhead
n 4063 1680 m 4183 1650 l 4063 1620 l  col-1 s
% Polyline
gs  clippath
4815 2580 m 4815 2520 l 4663 2520 l 4783 2550 l 4663 2580 l cp
eoclip
n 4350 1875 m 4350 2550 l
 4800 2550 l gs col-1 s gr gr

% arrowhead
n 4663 2580 m 4783 2550 l 4663 2520 l  col-1 s
% Polyline
gs  clippath
6120 1440 m 6180 1440 l 6180 1288 l 6150 1408 l 6120 1288 l cp
eoclip
n 6150 1200 m
 6150 1425 l gs col-1 s gr gr

% arrowhead
n 6120 1288 m 6150 1408 l 6180 1288 l  col-1 s
% Polyline
gs  clippath
6540 3780 m 6540 3720 l 6388 3720 l 6508 3750 l 6388 3780 l cp
eoclip
n 6150 1875 m 6150 3750 l
 6525 3750 l gs col-1 s gr gr

% arrowhead
n 6388 3780 m 6508 3750 l 6388 3720 l  col-1 s
% Polyline
gs  clippath
5940 1680 m 5940 1620 l 5788 1620 l 5908 1650 l 5788 1680 l cp
eoclip
n 5475 2550 m 5775 2550 l 5775 1650 l
 5925 1650 l gs col-1 s gr gr

% arrowhead
n 5788 1680 m 5908 1650 l 5788 1620 l  col-1 s
% Polyline
gs  clippath
4470 5415 m 4530 5415 l 4530 5263 l 4500 5383 l 4470 5263 l cp
eoclip
n 6900 3750 m 6900 4950 l 4500 4950 l
 4500 5400 l gs col-1 s gr gr

% arrowhead
n 4470 5263 m 4500 5383 l 4530 5263 l  col-1 s
% Polyline
gs  clippath
7620 5415 m 7680 5415 l 7680 5263 l 7650 5383 l 7620 5263 l cp
eoclip
n 7650 1200 m
 7650 5400 l gs col-1 s gr gr

% arrowhead
n 7620 5263 m 7650 5383 l 7680 5263 l  col-1 s
% Polyline
n 6300 5400 m
 6300 6000 l gs col-1 s gr 
% Polyline
n 2550 5400 m 8400 5400 l 8400 6000 l 2550 6000 l
 cp gs col-1 s gr 
/Times-Roman-iso ff 210.00 scf sf
7200 1050 m
gs 1 -1 sc (offset) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman-iso ff 180.00 scf sf
8325 525 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman-iso ff 180.00 scf sf
6075 600 m
gs 1 -1 sc (12) col-1 sh gr
/Times-Roman-iso ff 180.00 scf sf
4950 600 m
gs 1 -1 sc (18) col-1 sh gr
/Times-Roman-iso ff 180.00 scf sf
3450 600 m
gs 1 -1 sc (24) col-1 sh gr
/Times-Roman-iso ff 180.00 scf sf
2475 600 m
gs 1 -1 sc (31) col-1 sh gr
/Times-Roman-iso ff 180.00 scf sf
2475 1725 m
gs 1 -1 sc (+) col-1 sh gr
/Times-Roman-iso ff 180.00 scf sf
2475 1725 m
gs 1 -1 sc (+) col-1 sh gr
/Times-Roman-iso ff 180.00 scf sf
4350 1725 m
gs 1 -1 sc (+) col-1 sh gr
/Times-Roman-iso ff 180.00 scf sf
6075 1725 m
gs 1 -1 sc (+) col-1 sh gr
/Times-Roman-iso ff 210.00 scf sf
4425 975 m
gs 1 -1 sc (Virtual Page Number) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman-iso ff 210.00 scf sf
4200 5760 m
gs 1 -1 sc (Physical Page Number) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman-iso ff 210.00 scf sf
960 5700 m
gs 1 -1 sc (Physical Address) col-1 sh gr
/Times-Roman-iso ff 180.00 scf sf
1680 1260 m
gs 1 -1 sc (0) col-1 sh gr
/Times-Roman-iso ff 180.00 scf sf
960 1260 m
gs 1 -1 sc (31) col-1 sh gr
/Times-Roman-iso ff 210.00 scf sf
1380 1740 m
gs 1 -1 sc (BASE) dup sw pop 2 div neg 0 rm  col-1 sh gr
$F2psEnd
rs
%%EndDocument
end PEND/F1 13/Times-Bold@0 SF -.962(Tr)213.828 494 S(anslations Cache)
.962 E/F2 13/Times-Roman@0 SF -.195(Pa)33.336 530 S 1.818
(ge table entries reside in main memory).195 F 5.068(,a)-.845 G 1.818
(nd thus consume tw)-5.068 F 5.068(oi)-.13 G 1.818(mportant resources:)
-5.068 F 5.09(The memory needed to store the page tables and the time r\
equired to perform)33.336 545 R 3.815(translations. W)33.336 560 R 3.815
(eh)-1.04 G -2.925 -.26(av e)-3.815 H .565(seen ho)4.075 F 3.815(wm)
-.325 G(ulti-le)-3.815 E -.195(ve)-.325 G 3.815(lp).195 G .566
(age tables address the former concern.)-3.815 F(The)7.066 E .06
(latter is e)33.336 575 R .06
(xtremely signi\214cant too, since a translation must be performed on e)
-.195 F -.195(ve)-.325 G .06(ry memory).195 F 5.11(access. If)33.336 590
R 1.86(the MMU w)5.11 F(ork)-.13 E 1.861
(ed literally as described thus f)-.13 F(ar)-.13 E 5.111(,f)-.52 G 1.861
(or a 2-le)-5.111 F -.195(ve)-.325 G 5.111(lp).195 G 1.861(age table, 2)
-5.111 F 1.317(additional memory accesses w)33.336 605 R 1.317
(ould be required for e)-.13 F -.195(ve)-.325 G 1.316
(ry access attempted, i.e. memory).195 F .178(performance w)33.336 620 R
.178(ould be reduced to one third.)-.13 F .178
(Therefore, a cache, often called the)6.678 F F1(Addr)3.428 E(ess)-.234
E -.962(Tr)33.336 635 S 1.863(anslation Cache \(A).962 F(TC\))-1.235 E
F2(or)5.113 E F1 -.962(Tr)5.113 G 1.863
(anslation Lookaside Buffer \(TLB\)).962 F F2 5.112(,i)C 5.112(su)-5.112
G 1.862(sed to speed)-5.112 F(translations.)33.336 650 Q(Lik)33.336 671
Q 3.35(ea)-.13 G .49 -.195(ny c)-3.35 H .1(ache, the A).195 F .1
(TC is a content-addressable memory)-1.443 F 6.6(.A)-.845 G F1 -.13(ke)
-3.25 G(y).13 E F2 .101(is presented, and either)3.351 F 2.12
(the stored)33.336 686 R F1 -.13(va)5.37 G(lue).13 E F2 2.12
(is accessed \(a)5.37 F F1("hit)5.37 E F2 2.12("\), or the k)B 2.51
-.195(ey i)-.13 H 5.37(sn).195 G 2.119(ot found in the cache, which is)
-5.37 F(kno)33.336 701 Q .039(wn as a)-.325 F F1 .039(cache miss)3.289 F
F2 6.539(.R)C .039(ecall that the address translation process tak)-6.539
F .039(es the page number)-.13 F .374
(portion of a virtual address and returns a page table entry)33.336 716
R 6.874(.T)-.845 G .374(herefore, the k)-6.874 F .763 -.195(ey i)-.13 H
3.623(nt).195 G .373(his case)-3.623 F .763
(is the virtual address being translated \(or more correctly)33.336 731
R 4.013(,t)-.845 G .764(he page number portion of the)-4.013 F -1.755
(VA)33.336 746 S(\), and the v)1.755 E(alue accessed is the PTE.)-.325 E
0 Cg EP
%%Page: 6 6
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 6)73.998 E(\2512013 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Roman@0 SF -.195(Fo)33.336 120 S 3.469(re).195 G -.195(ve)
-3.794 G .219(ry virtual memory access, the A).195 F .218
(TC is searched to see if a v)-1.443 F .218(alid, cached PTE e)-.325 F
(xists)-.195 E 2.674(for the referenced virtual page number)33.336 135 R
9.174(.I)-.715 G 5.924(fs)-9.174 G 2.674
(o, the translation is performed using the)-5.924 F .222
(cached page table entry)33.336 150 R 6.722(.O)-.845 G .222
(therwise, hardw)-6.722 F .222(are tra)-.13 F -.195(ve)-.26 G .222
(rses the page table structure and loads).195 F .352
(the correct translation, k)33.336 165 R .353
(eeping it cached for possible future re-use.)-.13 F .353
(The cache is of \214nite)6.853 F .123
(\(and typically rather small\) size, so the insertion of a ne)33.336
180 R 3.373(wc)-.325 G .123(ached translation into the A)-3.373 F(TC)
-1.443 E(generally eradicates an older cache entry to mak)33.336 195 Q
3.25(er)-.13 G(oom.)-3.25 E .929(On some architectures \(e.g. SP)33.336
216 R .929(ARC\), a)-1.196 F/F2 13/Times-Bold@0 SF .929(context number)
4.179 F F1 .929(is used in conjunction with the)4.179 F -1.443(AT)33.336
231 S .365(C/TLB to disambiguate the virtual addresses of multiple proc\
esses' translations which)1.443 F 3.218
(might be resident in the cache at once.)33.336 246 R 3.219
(Each process is assigned a unique conte)9.718 F(xt)-.195 E(number)
33.336 261 Q 9.784(.A)-.715 G 3.284(CPU special re)-3.25 F 3.284
(gister contains the current conte)-.195 F 3.284
(xt number and it is that)-.195 F(number)33.336 276 Q 5.075(,c)-.52 G
1.825(ombined with the virtual page number)-5.075 F 5.075(,w)-.52 G
1.826(hich k)-5.075 F -.195(ey)-.13 G 5.076(st).195 G 1.826
(he associati)-5.076 F 2.216 -.195(ve a)-.325 H(rray).195 E 8.326(.T)
-.845 G(o)-9.366 E 3.108(perform a conte)33.336 291 R 3.108
(xt switch, both the page table base address re)-.195 F 3.108
(gister and the conte)-.195 F(xt)-.195 E(number re)33.336 306 Q
(gister are changed at the same time.)-.195 E -1.04(We)33.336 327 S -.13
('l)1.04 G 3.654(ls).13 G .404(ee that on Linux/X86-32, lacking a conte)
-3.654 F .405(xt tag in the TLB, it is necessary to issue)-.195 F 2.771
(special, pri)33.336 342 R(vile)-.325 E 2.77
(ged TLB \215ush instructions during a conte)-.195 F 2.77
(xt switch to in)-.195 F -.325(va)-.52 G 2.77(lidate those).325 F
(mappings which will not be v)33.336 357 Q(alid in the ne)-.325 E 3.25
(wc)-.325 G(onte)-3.25 E(xt.)-.195 E 1.155
(Because the TLB is small, performance is greatly impro)33.336 378 R
-.195(ve)-.195 G 4.405(dw).195 G 1.155(hen memory accesses are)-4.405 F
.311(clustered so that, other than the \214rst access, the)33.336 393 R
3.56(y")-.195 G .31(hit" the TLB cache.)-3.56 F .31(The k)6.81 F .31
(ernel tries to)-.13 F .267
(optimize its internal data structures layout so as to k)33.336 408 R
.267(eep frequently accessed data together)-.13 F 1.321
(within the same page.)33.336 423 R 1.321
(Thus the choice of memory address allocation within the k)7.821 F
(ernel)-.13 E(can ha)33.336 438 Q .39 -.195(ve a p)-.26 H
(rofound impact on performance.).195 E 2.097(The \214gure belo)33.336
459 R 5.348(wd)-.325 G 2.098(epicts the \215o)-5.348 F 5.348(wo)-.325 G
5.348(fa)-5.348 G 2.098(ddress on a system with an MMU and a TLB,)-5.348
F(ha)33.336 474 Q(ving the conte)-.26 E(xt number feature.)-.195 E 0 0
468 586 -236.396 296 33.336 731.396 PBEGIN
%%BeginDocument: arch.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: arch.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Tue Oct  6 22:47:46 2009
%%For: hak@lex ()
%%BoundingBox: 0 0 586 296
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 296 moveto 0 0 lineto 586 0 lineto 586 296 lineto closepath clip newpath
-162.0 389.6 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Ellipse
7.500 slw
n 6719 5635 1875 825 0 360 DrawEllipse gs col0 s gr

% Polyline
n 3150 1950 m 4650 1950 l 4650 3750 l 3150 3750 l
 cp gs col0 s gr 
% Polyline
n 3600 4050 m 4500 4050 l 4500 5700 l 3600 5700 l
 cp gs col0 s gr 
% Polyline
n 10950 2100 m 11250 2400 l
 10950 2700 l gs col0 s gr 
% Polyline
n 11100 2250 m
 4650 2250 l gs col0 s gr 
% Polyline
n 11100 2550 m
 4650 2550 l gs col0 s gr 
% Polyline
n 4650 3150 m
 6000 3150 l gs col0 s gr 
% Polyline
n 4650 3450 m
 5850 3450 l gs col0 s gr 
% Polyline
n 6000 3150 m
 11100 3150 l gs col0 s gr 
% Polyline
n 6000 3300 m
 11100 3300 l gs col0 s gr 
% Polyline
n 5850 3450 m
 5850 4350 l gs col0 s gr 
% Polyline
n 6000 3300 m
 6000 4650 l gs col0 s gr 
% Polyline
n 3600 4425 m
 4500 4425 l gs col0 s gr 
% Polyline
n 3600 4725 m
 4500 4725 l gs col0 s gr 
% Polyline
n 4500 4350 m 5400 4350 l 5700 4350 l
 5700 4650 l gs col0 s gr 
% Polyline
n 4500 4200 m 5850 4200 l
 5850 4650 l gs col0 s gr 
% Polyline
n 5625 4650 m 5850 4950 l
 6075 4650 l gs col0 s gr 
% Polyline
n 5550 4950 m 7800 4950 l 7800 6150 l 5550 6150 l
 cp gs col0 s gr 
% Polyline
n 6600 4950 m
 6600 6150 l gs col0 s gr 
% Polyline
n 6750 5400 m
 6750 3300 l gs col0 s gr 
% Polyline
n 6900 5400 m 6900 3450 l
 11100 3450 l gs col0 s gr 
% Polyline
n 10950 3000 m 11250 3300 l
 10950 3600 l gs col0 s gr 
% Polyline
n 11250 1575 m 12450 1575 l 12450 4575 l 11250 4575 l
 cp gs col0 s gr 
% Polyline
 [60 24 15 18 15 18 15 24 ] 0 sd
gs  clippath
8715 4605 m 8715 4545 l 8563 4545 l 8683 4575 l 8563 4605 l cp
eoclip
n 4500 4575 m
 8700 4575 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 8563 4605 m 8683 4575 l 8563 4545 l  col0 s
% Polyline
n 8700 4125 m 9825 4125 l 9825 5025 l 8700 5025 l
 cp gs col0 s gr 
% Polyline
 [60 24 15 18 15 18 15 24 ] 0 sd
n 8850 4125 m
 8850 2550 l gs col0 s gr  [] 0 sd
% Polyline
 [60 24 15 18 15 18 15 24 ] 0 sd
n 9075 4125 m
 9075 2550 l gs col0 s gr  [] 0 sd
% Polyline
 [60 24 15 18 15 18 15 24 ] 0 sd
n 9450 4125 m
 9450 3450 l gs col0 s gr  [] 0 sd
% Polyline
 [60 24 15 18 15 18 15 24 ] 0 sd
n 9675 4125 m
 9675 3450 l gs col0 s gr  [] 0 sd
% Polyline
 [60 24 15 18 15 18 15 24 ] 0 sd
n 8700 4725 m
 8175 5025 l gs col0 s gr  [] 0 sd
% Polyline
 [60 24 15 18 15 18 15 24 ] 0 sd
n 8700 4950 m
 8325 5175 l gs col0 s gr  [] 0 sd
% Polyline
 [60 24 15 18 15 18 15 24 ] 0 sd
n 8625 5250 m 8175 5250 l
 8175 4875 l gs col0 s gr  [] 0 sd
% Polyline
n 5550 5550 m
 7800 5550 l gs col0 s gr 
% Polyline
n 5550 5700 m
 7800 5700 l gs col0 s gr 
% Polyline
n 5550 5850 m
 7800 5850 l gs col0 s gr 
% Polyline
n 5550 6000 m
 7800 6000 l gs col0 s gr 
% Polyline
n 5550 5400 m
 7800 5400 l gs col0 s gr 
/Times-Roman ff 200.00 scf sf
3525 2850 m
gs 1 -1 sc (CPU) col0 sh gr
/Times-Roman ff 200.00 scf sf
2700 4275 m
gs 1 -1 sc (Registers) col0 sh gr
/Times-Roman ff 200.00 scf sf
6750 2475 m
gs 1 -1 sc (DATA BUS) col0 sh gr
/Times-Roman ff 200.00 scf sf
4800 3375 m
gs 1 -1 sc (VIRT ADDR) col0 sh gr
/Times-Roman ff 200.00 scf sf
3675 4350 m
gs 1 -1 sc (CNTXT) col0 sh gr
/Times-Roman ff 200.00 scf sf
3750 4650 m
gs 1 -1 sc (BASE) col0 sh gr
/Times-Roman ff 200.00 scf sf
3900 5025 m
gs 1 -1 sc (Gen) col0 sh gr
/Times-Roman ff 200.00 scf sf
3900 5325 m
gs 1 -1 sc (Purp) col0 sh gr
/Times-Roman ff 200.00 scf sf
5625 5250 m
gs 1 -1 sc (CTX/VA) col0 sh gr
/Times-Roman ff 200.00 scf sf
7050 5250 m
gs 1 -1 sc (PTE) col0 sh gr
/Times-Roman ff 200.00 scf sf
5850 6375 m
gs 1 -1 sc (Key) col0 sh gr
/Times-Roman ff 200.00 scf sf
7050 6375 m
gs 1 -1 sc (Contents) col0 sh gr
/Times-Roman ff 200.00 scf sf
11550 1950 m
gs 1 -1 sc (Physical) col0 sh gr
/Times-Roman ff 200.00 scf sf
11550 2460 m
gs 1 -1 sc (Memory) col0 sh gr
/Times-Roman ff 200.00 scf sf
11550 2970 m
gs 1 -1 sc (Address) col0 sh gr
/Times-Roman ff 200.00 scf sf
11550 3480 m
gs 1 -1 sc (Space) col0 sh gr
/Times-Roman ff 200.00 scf sf
8625 5925 m
gs 1 -1 sc (Translations) col0 sh gr
/Times-Roman ff 200.00 scf sf
8625 6180 m
gs 1 -1 sc (Lookaside) col0 sh gr
/Times-Roman ff 200.00 scf sf
8625 6435 m
gs 1 -1 sc (Buffer \(TLB\)) col0 sh gr
/Times-Roman ff 200.00 scf sf
9075 4350 m
gs 1 -1 sc (MMU) col0 sh gr
/Times-Roman ff 200.00 scf sf
9075 4605 m
gs 1 -1 sc (Logic) col0 sh gr
/Times-Roman ff 200.00 scf sf
7500 3375 m
gs 1 -1 sc (PHYS ADDR) col0 sh gr
/Times-Roman ff 200.00 scf sf
7125 4500 m
gs 1 -1 sc (\(Phys Addr\)) col0 sh gr
/Times-Roman ff 166.67 scf sf
6750 5550 m
gs 1 -1 sc (PFN) col0 sh gr
/Times-Roman ff 166.67 scf sf
7275 5550 m
gs 1 -1 sc (FLAGS) col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND 0 Cg EP
%%Page: 7 7
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 7)73.998 E(\2512013 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Bold@0 SF(The UNIX user)167.008 120 Q(-le)-.481 E -.13(ve)
-.195 G 3.25(lm).13 G(emory model)-3.25 E/F2 13/Times-Roman@0 SF 2.667
-1.04(We h)33.336 156 T -2.925 -.26(av e)1.04 H .587(seen that the virt\
ual address space of a process consists of a number of re)4.097 F
(gions.)-.195 E(These include:)33.336 171 Q 3.25<8374>33.336 186 S -.195
(ex)-3.25 G 3.25(tr).195 G -.195(eg)-3.25 G(ion: holds the e).195 E
-.195(xe)-.195 G(cutable code).195 E 3.25<8364>33.336 201 S(ata re)-3.25
E(gion: initialized global v)-.195 E(ariables)-.325 E 6.904<8362>33.336
216 S 3.654(ss re)-6.904 F 3.655
(gion: uninitialized \(0-\214lled\) global v)-.195 F 3.655
(ariables including dynamically-allocated)-.325 F -.325(va)33.336 231 S
4.017(riables. The).325 F .766(ending address of this re)4.017 F .766
(gion is kno)-.195 F .766(wn as the)-.325 F F1(br)4.016 E .766(eak addr)
-.234 F(ess)-.234 E F2 4.016(,a)C .766(nd can be)-4.016 F .596
(queried or set with the)33.336 246 R/F3 13/Courier@0 SF(brk)3.846 E F2
.596(system call.)3.846 F .597(The break address may turn out to not f)
7.096 F .597(all on a)-.13 F 1.837(page boundary)33.336 261 R 5.087(,i)
-.845 G 5.087(nw)-5.087 G 1.837(hich case the bss re)-5.087 F 1.837
(gion really e)-.195 F 1.836(xtends to the ne)-.195 F 1.836
(xt page boundary)-.195 F(be)33.336 276 Q .37(yond the break address.)
-.195 F .37(The standard C library function)6.87 F F3(malloc)3.621 E F2
.371(ultimately uses)3.621 F F3(brk)3.621 E F2 1.943
(to request additional bss memory from the k)33.336 291 R 5.192
(ernel. Another)-.13 F 1.942(name for the dynamically)5.192 F 1.197
(allocated part of the bss re)33.336 306 R 1.197(gion is the)-.195 F F3
(heap)4.448 E F2 7.698(.T)C(ypically)-8.738 E 4.448(,t)-.845 G 1.198
(he static part of the bss re)-4.448 F(gion)-.195 E .936
(\(corresponding to the declared v)33.336 321 R .936
(ariables\) is the \214rst part \(lo)-.325 F .936
(wer memory addresses\), and)-.325 F(the heap is contiguous with it.)
33.336 336 Q 5.072<8373>33.336 351 S 1.822(tack re)-5.072 F 1.822
(gion: function call stack and local v)-.195 F 8.323(ariables. W)-.325 F
1.823(ith multi-threaded processes,)-.52 F 3.957(each thread has its o)
33.336 366 R 3.957(wn stack.)-.325 F 3.957(Stack re)10.457 F 3.957
(gions ha)-.195 F 4.347 -.195(ve t)-.26 H 3.957
(he unusual property that the).195 F(y)-.195 E 1.006(automatically gro)
33.336 381 R 4.256(w\()-.325 G 1.006
(in the direction in which stacks usually gro)-4.256 F 2.697 -.845(w, t)
-.325 H -2.73 -.325(ow a).845 H 1.007(rds lo).325 F 4.257(wm)-.325 G
(emory)-4.257 E(addresses on most architectures\) without an e)33.336
396 Q(xplicit system call.)-.195 E 3.25<8364>33.336 411 S
(ynamically-link)-3.25 E(ed libraries code)-.13 E 3.25<8369>33.336 426 S
(nitialized global v)-3.25 E(ariables for dynamically-link)-.325 E
(ed libraries)-.13 E 3.25<8375>33.336 441 S(ninitialized global v)-3.25
E(ariables for dynamically-link)-.325 E(ed libraries)-.13 E 3.25<8373>
33.336 456 S(hared memory being used for inter)-3.25 E
(-process communication)-.26 E 3.25<836d>33.336 471 S
(emory-mapped \214les)-3.25 E 3.09 -1.04(We w)33.336 492 T 1.01(ill no)
1.04 F 4.26(ws)-.325 G 1.01(ee that from the k)-4.26 F(ernel')-.13 E
4.259(ss)-.715 G 1.009(tandpoint, these memory re)-4.259 F 1.009
(gion names ha)-.195 F 1.399 -.195(ve n)-.26 H(o).195 E .39
(particular signi\214cance.)33.336 507 R .39(The k)6.89 F .39(ernel vie)
-.13 F .39(ws a virtual address space as a list of re)-.325 F .39
(gions, each)-.195 F(of which has associated with it:)33.336 522 Q 3.25
<8354>33.336 537 S(he starting virtual address of the re)-3.25 E
(gion \(al)-.195 E -.13(wa)-.13 G(ys aligned to a page boundary\)).13 E
3.678<8354>33.336 552 S .428(he length of the re)-3.678 F .427
(gion \(a multiple of the page size\), or equi)-.195 F -.325(va)-.325 G
.427(lently the ending virtual).325 F(address of the re)33.336 567 Q
(gion.)-.195 E 3.647<8342>33.336 582 S .398
(itwise \215ags which describe properties of the re)-3.647 F .398
(gion such as the protections, or the f)-.195 F(act)-.13 E(that the re)
33.336 597 Q(gion automatically gro)-.195 E(ws to)-.325 E -.13(wa)-.325
G(rds lo).13 E 3.25(wm)-.325 G(emory)-3.25 E 4.862<8342>33.336 612 S
1.612(acking store: If the memory re)-4.862 F 1.612(gion is back)-.195 F
1.612(ed by a node in the \214lesystem, then this)-.13 F .921
(mapping is described by inode and of)33.336 627 R 4.171
(fset. Otherwise,)-.325 F .921(the re)4.171 F .921(gion is anon)-.195 F
.921(ymous, and has)-.195 F(no corresponding \214le.)33.336 642 Q F1
(Demand-P)222.622 687 Q(aging)-.13 E F2 .978(Through virtual addressing\
 manipulation, the operating system can maintain the illusion)33.336 723
R 3.269(of ha)33.336 738 R 3.269
(ving more memory on the system than there is real, ph)-.26 F 3.269
(ysical RAM a)-.065 F -.325(va)-.26 G(ilable.).325 E 0 Cg EP
%%Page: 8 8
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 8)73.998 E(\2512013 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Roman@0 SF(Ph)33.336 120 Q .551
(ysical RAM is only mapped into a process')-.065 F 3.801(sv)-.715 G .55
(irtual address space when it is accessed,)-3.801 F 3.25(af)33.336 135 S
(orm of "just in time" allocation.)-3.25 E 1.701(Consider what happens \
when a process requests \(e.g. through the sbrk system call\) an)33.336
156 R 1.931(additional 8 MB memory allocation.)33.336 171 R 1.93
(The operating system "gro)8.431 F 1.93(ws" the bss re)-.325 F 1.93
(gion by)-.195 F .467(recording its ne)33.336 186 R 3.717(ws)-.325 G
3.717(ize. Ho)-3.717 F(we)-.325 E -.195(ve)-.325 G 1.507 -.52(r, n).195
H 3.717(op).52 G -.065(hy)-3.717 G .467
(sical page numbers are assigned at this time and).065 F
(the page table entries are left in the NO)33.336 201 Q 3.25(TP)-.52 G
(RESENT state.)-3.25 E 1.063(When the process actually performs the \
\214rst read or write access to the ne)33.336 222 R 1.063(wly allocated)
-.325 F(memory)33.336 237 Q 3.468(,t)-.845 G .218(he MMU looks up the v\
irtual address translation, \214nds that the page table entry)-3.468 F
1.087(is not mark)33.336 252 R 1.087(ed as PRESENT)-.13 F 4.337(,a)-.962
G 1.087(nd raises a)-4.337 F/F2 13/Times-Bold@0 SF 1.087
(page fault interrupt)4.337 F F1 7.587(.T)C 1.087(he operating system')
-7.587 F(s)-.715 E .056(page f)33.336 267 R .056
(ault interrupt handler e)-.13 F .056(xamines the f)-.195 F .056
(aulting operation and f)-.13 F .057(aulted virtual address.)-.13 F(It)
6.557 E(kno)33.336 282 Q .767(ws which process w)-.325 F .767
(as running at the time of the f)-.13 F 4.017(ault. Consulting)-.13 F
.767(its data structures)4.017 F .105(for the process')33.336 297 R
3.356(sa)-.715 G .106
(ddress space, the operating system determines that this is indeed a v)
-3.356 F(alid)-.325 E .787(virtual memory access.)33.336 312 R .787
(It allocates a free ph)7.287 F .786
(ysical page and adjusts the page table entry)-.065 F 3.278
(accordingly to translate to this ph)33.336 327 R 3.279
(ysical address \(also allocating and populating an)-.065 F(y)-.195 E
1.805(intermediate le)33.336 342 R -.195(ve)-.325 G 5.055(lp).195 G
1.804(age tables if necessary\).)-5.055 F 1.804(Since the f)8.304 F
1.804(ault w)-.13 F 1.804(as in the bss re)-.13 F 1.804(gion, the)-.195
F -.13(ke)33.336 357 S 2.154(rnel clears the ne).13 F 2.154
(wly allocated page to 0 bytes.)-.325 F 2.154
(The interrupt handler then returns,)8.654 F(allo)33.336 372 Q .652
(wing the f)-.325 F .652(aulting instruction to be re-tried.)-.13 F .652
(This time, there is a v)7.152 F .651(alid translation and)-.325 F
(the e)33.336 387 Q -.195(xe)-.195 G(cution continues successfully).195
E(.)-.845 E 2.08 -1.04(We c)33.336 408 T
(all this just-in-time allocation of page frames)1.04 E F2(Demand-P)3.25
E(aging)-.13 E F1(.)A F2 -.13(Pa)184.272 438 S
(ging-out and Backing Stor).13 E(e)-.234 E F1(Ev)33.336 474 Q(entually)
-.195 E 4.504(,t)-.845 G 1.254
(he sum of virtual memory allocated to all of the processes may e)-4.504
F 1.255(xceed the)-.195 F 1.583(amount of real RAM a)33.336 489 R -.325
(va)-.26 G 4.832(ilable. This).325 F 1.582(is where the A)4.832 F 1.582
(CCESSED and DIR)-.52 F 1.582(TY bits of the)-.78 F 2.595
(page table entry come into play)33.336 504 R 9.096(.P)-.845 G
(eriodically)-9.096 E 5.846(,t)-.845 G 2.596(he operating system k)
-5.846 F 2.596(ernel clears the)-.13 F -.52(AC)33.336 519 S 3.294
(CESSED bit of each virtual page in the system that has a mapping to ph)
.52 F(ysical)-.065 E(memory)33.336 534 Q 10.281(.A)-.845 G 7.031(sl)
-10.281 G 3.781
(ong as the page is being accessed \(either read or write\) with some)
-7.031 F(frequenc)33.336 549 Q 3.146 -.845(y, t)-.195 H 1.456(he A).845
F 1.456(CCESSED bit will continue to be set periodically by hardw)-.52 F
4.706(are. P)-.13 F(ages)-.195 E(that ha)33.336 564 Q .39 -.195(ve f)
-.26 H(allen into disuse will wind up with their A).065 E
(CCESSED bits clear)-.52 E(.)-.715 E 1.482(The k)33.336 585 R 1.482
(ernel scans for such "cold" pages and unmaps them, making their ph)-.13
F 1.482(ysical RAM)-.065 F -.26(av)33.336 600 S 4.622
(ailable to other virtual pages.)-.065 F 4.622
(Unmapping the page simply means clearing the)11.122 F .654
(PRESENT bit in the PTE, and placing the page frame into a free list.)
33.336 615 R(Ho)10.404 E(we)-.325 E -.195(ve)-.325 G 1.694 -.52(r, w)
.195 H .655(hen a).52 F 2.689(page is freed, if the DIR)33.336 630 R
2.689(TY bit is set, the contents of that page must \214rst be sa)-.78 F
-.195(ve)-.26 G(d).195 E(some)33.336 645 Q .295
(where before the page frame is placed into the free pool for reuse.)
-.325 F .295(This operation is)6.795 F(kno)33.336 660 Q(wn as)-.325 E F2
-.13(Pa)3.25 G(ging-Out).13 E F1(.)A 1.286
(The place where virtual pages reside while not mapped in is called the)
33.336 681 R F2 1.286(Backing Stor)4.536 F(e)-.234 E F1(.)A .948
(This is one of the properties associated with each re)33.336 696 R .948
(gion in the process')-.195 F 4.198(sv)-.715 G .949(irtual address)
-4.198 F 3.25(space. There)33.336 711 R(are tw)3.25 E 3.25(oc)-.13 G
(hoices:)-3.25 E 3.718<8354>33.336 726 S .467(he re)-3.718 F .467(gion \
corresponds to a contiguous portion of a \214le \(possibly at some page\
-aligned)-.195 F(of)33.336 741 Q(fset from the start of the \214le\) wh\
ich can be accessed through the \214lesystem.)-.325 E 0 Cg EP
%%Page: 9 9
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 9)73.998 E(\2512013 Jef)144.405 E 2.25(fH)-.225 G(akner)-2.25
E/F1 13/Times-Roman@0 SF 4.762<8354>33.336 120 S 1.512(he re)-4.762 F
1.512(gion is)-.195 F/F2 13/Times-Bold@0 SF(anonymous)4.762 E F1 8.012
(.I)C 4.762(td)-8.012 G 1.512
(oes not correspond to a \214le in the \214lesystem, and the)-4.762 F
.319(contents of the re)33.336 135 R .319(gion are not)-.195 F F2
(persistent.)3.569 E F1 .318(I.e. when the process e)6.819 F .318
(xits, nobody cares about)-.195 F .338(what w)33.336 150 R .338
(as in the anon)-.13 F .338(ymous re)-.195 F 3.588(gions. These)-.195 F
(re)3.588 E .338(gions use backing store called)-.195 F F2 .338
(swap space)3.588 F F1(.)A 3.649 -1.04(We c)33.336 165 T 1.569
(an think of sw)1.04 F 1.569
(ap space as a pool of disk blocks which aren')-.13 F 4.818(tn)-.234 G
1.568(ormally accessible)-4.818 F .555(through the \214lesystem.)33.336
180 R -.195(Pa)7.055 G .556(ges in an anon).195 F .556(ymous re)-.195 F
.556(gion are al)-.195 F -.13(wa)-.13 G .556
(ys zero-\214lled upon initial).13 F(allocation.)33.336 195 Q 4.589
<834d>33.336 210 S 1.339(emory re)-4.589 F 1.339(gions that ha)-.195 F
1.729 -.195(ve t)-.26 H(he).195 E/F3 13/Courier@0 SF(MAP_PRIVATE)4.589 E
F1 1.339(property \(discussed later\) will page-in)4.589 F
(from their backing store \(\214le\), b)33.336 225 Q
(ut will page-out to sw)-.26 E(ap.)-.13 E F2 -.13(Pa)172.605 255 S
(ging-in, minor and major faults).13 E F1 .729(At some later time, a pa\
ge that had been freed might be accessed by a process, resulting)33.336
291 R .528(in a page f)33.336 306 R .528
(ault, as the PRESENT bit of the page table entry w)-.13 F .528
(ould be clear)-.13 F 7.028(.I)-.715 G 3.778(ft)-7.028 G .527(he k)
-3.778 F(ernel)-.13 E .375(is luck)33.336 321 R 2.065 -.845(y, t)-.195 H
.375(he ph).845 F .375(ysical page frame which w)-.065 F .375
(as holding that virtual page')-.13 F 3.625(sc)-.715 G .376
(ontents may still)-3.625 F .232(be v)33.336 336 R .232(alid, i.e. it w)
-.325 F .232(as placed on the free list, b)-.13 F .232
(ut not yet re-used by another process.)-.26 F .232(If so, it)6.732 F
.268(is a simple matter to restore the pre)33.336 351 R .268
(vious mapping and allo)-.325 F 3.519(wt)-.325 G .269
(he process to go on its w)-3.519 F(ay)-.13 E(.)-.845 E(This is kno)
33.336 366 Q(wn as a)-.325 E F2(minor page fault)3.25 E F1(.)A .774
(Otherwise, the k)33.336 387 R .774(ernel must allocate a ne)-.13 F
4.024(wp)-.325 G -.065(hy)-4.024 G .774
(sical page \(by re-using the oldest ph).065 F(ysical)-.065 E .004(page\
 on the free list\) and arrange to \214ll it with the data that are ass\
ociated with that virtual)33.336 402 R 4.159(page. This)33.336 417 R
.908(requires reading in the data from backing store \(disk\), which is\
 a potentially)4.159 F(slo)33.336 432 Q 4.502(wo)-.325 G 4.502
(peration. The)-4.502 F 1.252
(process blocks until the I/O request completes, then the process is)
4.502 F(allo)33.336 447 Q .434
(wed to continue, the correct mapping being in place.)-.325 F .433
(This is kno)6.933 F .433(wn as a)-.325 F F2 .433(major page)3.683 F
(fault)33.336 462 Q F1(.)A .468(Thus the pool of ph)33.336 483 R .469
(ysical RAM can be thought of as a cache of recently-accessed virtual)
-.065 F 5.859(pages. When)33.336 498 R 2.608(virtual memory demand is h\
igh, such that it can not be satis\214ed from)5.859 F(ph)33.336 513 Q
(ysical memory alone, system performance will suf)-.065 E(fer)-.325 E(.)
-.715 E F2 -.13(Pa)168.913 543 S(ge / Pr).13 E(otection F)-.234 E
(aults and signals)-.325 E F1 4.589(Ap)33.336 579 S 1.339(age f)-4.589 F
1.34(ault is generated when an access is attempted on a virtual page nu\
mber which)-.13 F .441(does not ha)33.336 594 R .831 -.195(ve a p)-.26 H
-.065(hy).195 G .44(sical page present \(or for which part of the page \
table structure is not).065 F .629
(current allocated\), while a protection f)33.336 609 R .629
(ault results from an attempted operation on a page)-.13 F 2.016
(which is disallo)33.336 624 R 2.016
(wed by the page permissions bits, for e)-.325 F 2.016
(xample, writing to a read-only)-.195 F 6.449(page. Protection)33.336
639 R -.13(fa)6.449 G 3.199(ults generally result in the deli).13 F
-.195(ve)-.325 G 3.199(ry of SIGSEGV to the f).195 F(aulting)-.13 E
(process \(b)33.336 654 Q(ut w)-.26 E(atch out for a major e)-.13 E
(xception to be discussed shortly\))-.195 E .652
(When, in handling a page f)33.336 675 R .652(ault, the f)-.13 F .652
(aulted-on virtual address f)-.13 F .652(alls outside of the bounds)-.13
F .093(of all e)33.336 690 R .093(xisting re)-.195 F .094
(gions of the process, then the process is gi)-.195 F -.195(ve)-.325 G
3.344(naS).195 G(IGSEGV)-3.344 E 6.594(.A)-1.677 G 3.344(ne)-6.594 G
(xception)-3.539 E 2.633(is if the f)33.336 705 R 2.633
(ault is caused by the gro)-.13 F 2.633(wth of a stack.)-.325 F 2.633
(UNIX automagically gro)9.133 F 2.632(ws stack)-.325 F(re)33.336 720 Q
4.357(gions. I.e.,)-.195 F 1.107(if the f)4.357 F 1.107
(aulted address is adjacent to the top of \(the lo)-.13 F 1.108
(west address\) a stack)-.325 F(re)33.336 735 Q .675(gion, the stack re)
-.195 F .674(gion is e)-.195 F .674(xpanded by one page \(to)-.195 F
-.13(wa)-.325 G .674(rds lo).13 F 3.924(wm)-.325 G .674
(emory\) and then co)-3.924 F -.195(ve)-.195 G(rs).195 E 0 Cg EP
%%Page: 10 10
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 10)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF 1.248(the f)33.336 120 R 1.248
(aulted address.)-.13 F -.52(Wi)7.748 G 1.248(thout this beha).52 F
(vior)-.26 E 4.498(,f)-.52 G 1.248(unction call depth w)-4.498 F 1.248
(ould be arti\214cially and)-.13 F 1.222(statically limited.)33.336 135
R 1.222(The stack is located at a virtual address that is a lar)7.722 F
1.222(ge distance a)-.234 F -.13(wa)-.195 G(y).13 E .565
(from adjacent re)33.336 150 R 3.815(gions. F)-.195 F .565
(or a collision to occur)-.195 F 3.815(,t)-.52 G .565(he stack w)-3.815
F .565(ould ha)-.13 F .955 -.195(ve t)-.26 H 3.815(og).195 G(ro)-3.815 E
3.815(wv)-.325 G .566(ery lar)-4.01 F(ge.)-.234 E 1.408
(Of course, the k)33.336 165 R 1.408(ernel does check.)-.13 F
(Additionally)7.908 E 4.658(,ap)-.845 G(er)-4.658 E 1.408
(-process limit can be speci\214ed on)-.26 F(stack size.)33.336 180 Q
.344(The Linux k)33.336 201 R .344(ernel uses)-.13 F/F2 13/Courier@0 SF
(SIGBUS)3.594 E F1 .344(when a page f)3.594 F .345
(ault is the result of a v)-.13 F .345(alid memory access,)-.325 F -.26
(bu)33.336 216 S 4.271(tt).26 G 1.021(he k)-4.271 F 1.021
(ernel is unable to page-in the requested page.)-.13 F -.195(Fo)7.521 G
4.271(re).195 G 1.021(xample, an I/O error might)-4.466 F 1.819
(occur when trying to read in the data from backing store.)33.336 231 R
(SIGB)8.319 E 1.819(US may also be used)-.13 F 1.496
(when the \214le which is the backing store has been truncated after ha)
33.336 246 R 1.496(ving been mapped,)-.26 F .171
(such that the area in the \214le coresponding to the f)33.336 261 R
.171(aulted memory address no longer e)-.13 F(xists.)-.195 E/F3 13
/Times-Bold@0 SF -.325(Fo)201.419 291 S(rk and copy-on-write).325 E F1
2.113 -1.04(We h)33.336 327 T -2.925 -.26(av e)1.04 H .032(said that du\
ring a fork, the entire virtual address space of the parent is duplicat\
ed)3.543 F .726(and the child be)33.336 342 R .726
(gins life with that cloned address space.)-.195 F .726(This w)7.226 F
.726(as an o)-.13 F -.195(ve)-.195 G(rsimpli\214cation,).195 E
(of course.)33.336 357 Q(It w)6.5 E(ould be v)-.13 E(ery costly to cop)
-.195 E 3.25(ya)-.13 G(ll that memory!)-3.25 E 2.767(During fork, the p\
age tables of the parent process are copied to produce the child')33.336
378 R(s)-.715 E 2.872(address space.)33.336 393 R 2.872
(The pages in read-only se)9.372 F 2.872
(gments of the address space \(e.g. the .te)-.195 F(xt)-.195 E(se)33.336
408 Q 2.54(gment\) are fore)-.195 F -.195(ve)-.325 G 5.79(rs).195 G 2.54
(hared between parent and child process.)-5.79 F 2.539
(Both processes' page)9.039 F
(tables map the same virtual addresses to the same ph)33.336 423 Q
(ysical pages.)-.065 E(Initially)33.336 444 Q 4.014(,t)-.845 G .764
(he pages in the writable se)-4.014 F .764
(gments of both processes \(e.g. the .bss se)-.195 F .765(gment\) are)
-.195 F 3.589(shared. The)33.336 459 R 3.589(ya)-.195 G(re)-3.589 E F3
(mark)3.589 E .339(ed do)-.13 F(wn)-.13 E F1 .339(to READONL)3.589 F
3.589(Ya)-1.3 G .339(nd point to the same ph)-3.589 F .339
(ysical memory)-.065 F .342(mapping in both processes.)33.336 474 R .342
(As either of the processes attempts to write to a shared page,)6.842 F
4.314(ap)33.336 489 S 1.064(rotection f)-4.314 F 1.064(ault occurs.)-.13
F 1.064(The k)7.564 F 1.064(ernel, seeing the protection f)-.13 F 1.063
(ault, checks the protections)-.13 F 4.572(associated with the re)33.336
504 R 4.572(gion in which the f)-.195 F 4.572(ault happened.)-.13 F
4.572(Since the bss re)11.072 F 4.572(gion is)-.195 F .119
(established as a read-write re)33.336 519 R .119(gion, the k)-.195 F
.119(ernel kno)-.13 F .119(ws that the access is le)-.325 F .118
(gitimate, and does)-.195 F(not kill the process.)33.336 534 Q 1.543
(Instead, the protection f)33.336 555 R 1.543(ault is resolv)-.13 F
1.543(ed by allocating a ne)-.195 F 4.793(wp)-.325 G -.065(hy)-4.793 G
1.543(sical page, cop).065 F 1.543(ying the)-.13 F -.195(ex)33.336 570 S
.786(isting data to the ne).195 F 4.035(wp)-.325 G .785
(age, and pointing the f)-4.035 F .785(aulting process at the ne)-.13 F
4.035(wp)-.325 G .785(age, lea)-4.035 F(ving)-.26 E .239
(the other process pointing to the old page, and upgrading the f)33.336
585 R .239(aulting P)-.13 F .24(age T)-.195 F .24(able Entry to)-1.04 F
(READ)33.336 600 Q 7.787(WRITE. This)-.39 F 4.537(mechanism is called)
7.787 F F3 4.537(Copy On Write)7.787 F F1 7.787(,o)C 7.787(rC)-7.787 G
-.455(OW)-7.787 G 7.787(,a)-.741 G 4.537(nd a)-7.787 F -.26(vo)-.26 G
(ids).26 E .003(unnecessary cop)33.336 615 R .003(ying of ph)-.13 F .003
(ysical memory)-.065 F 3.253(,e)-.845 G .004
(specially considering that after most forks, the)-3.253 F
(child process quickly e)33.336 630 Q -.195(xe)-.195 G(cs.).195 E .384
(If you are w)33.336 651 R .384(ondering wh)-.13 F 3.634(yb)-.065 G .384
(oth PTEs are not upgraded to R)-3.634 F 2.776 -1.196(W, i)-.715 H 3.634
(ti)1.196 G 3.634(sb)-3.634 G .383(ecause the page may)-3.634 F 3.29
(be shared by more than tw)33.336 666 R 6.54(ov)-.13 G 3.29
(irtual address spaces.)-6.54 F 6.54(E.g. it)9.79 F 3.29
(might be an mmap-ed)6.54 F 1.789(memory re)33.336 681 R 1.789
(gion, or there could be multiple forks in)-.195 F -.26(vo)-.52 G(lv).26
E 5.039(ed. In)-.195 F 1.789(this case, the remaining)5.039 F
(processes continue to share the page read-only until a write access se)
33.336 696 Q -.195(ve)-.325 G(rs this.).195 E 0 Cg EP
%%Page: 11 11
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 11)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E 0 0 468 911 -265.08 516 33.336 385.08 PBEGIN
%%BeginDocument: cow.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: cow.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Fri Feb 25 00:27:47 2011
%%For: hak@lex ()
%%BoundingBox: 0 0 911 516
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 516 moveto 0 0 lineto 911 0 lineto 911 516 lineto closepath clip newpath
-54.0 541.3 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/reencdict 12 dict def /ReEncode { reencdict begin
/newcodesandnames exch def /newfontname exch def /basefontname exch def
/basefontdict basefontname findfont def /newfont basefontdict maxlength dict def
basefontdict { exch dup /FID ne { dup /Encoding eq
{ exch dup length array copy newfont 3 1 roll put }
{ exch newfont 3 1 roll put } ifelse } { pop pop } ifelse } forall
newfont /FontName newfontname put newcodesandnames aload pop
128 1 255 { newfont /Encoding get exch /.notdef put } for
newcodesandnames length 2 idiv { newfont /Encoding get 3 1 roll put } repeat
newfontname newfont definefont pop end } def
/isovec [
8#055 /minus 8#200 /grave 8#201 /acute 8#202 /circumflex 8#203 /tilde
8#204 /macron 8#205 /breve 8#206 /dotaccent 8#207 /dieresis
8#210 /ring 8#211 /cedilla 8#212 /hungarumlaut 8#213 /ogonek 8#214 /caron
8#220 /dotlessi 8#230 /oe 8#231 /OE
8#240 /space 8#241 /exclamdown 8#242 /cent 8#243 /sterling
8#244 /currency 8#245 /yen 8#246 /brokenbar 8#247 /section 8#250 /dieresis
8#251 /copyright 8#252 /ordfeminine 8#253 /guillemotleft 8#254 /logicalnot
8#255 /hyphen 8#256 /registered 8#257 /macron 8#260 /degree 8#261 /plusminus
8#262 /twosuperior 8#263 /threesuperior 8#264 /acute 8#265 /mu 8#266 /paragraph
8#267 /periodcentered 8#270 /cedilla 8#271 /onesuperior 8#272 /ordmasculine
8#273 /guillemotright 8#274 /onequarter 8#275 /onehalf
8#276 /threequarters 8#277 /questiondown 8#300 /Agrave 8#301 /Aacute
8#302 /Acircumflex 8#303 /Atilde 8#304 /Adieresis 8#305 /Aring
8#306 /AE 8#307 /Ccedilla 8#310 /Egrave 8#311 /Eacute
8#312 /Ecircumflex 8#313 /Edieresis 8#314 /Igrave 8#315 /Iacute
8#316 /Icircumflex 8#317 /Idieresis 8#320 /Eth 8#321 /Ntilde 8#322 /Ograve
8#323 /Oacute 8#324 /Ocircumflex 8#325 /Otilde 8#326 /Odieresis 8#327 /multiply
8#330 /Oslash 8#331 /Ugrave 8#332 /Uacute 8#333 /Ucircumflex
8#334 /Udieresis 8#335 /Yacute 8#336 /Thorn 8#337 /germandbls 8#340 /agrave
8#341 /aacute 8#342 /acircumflex 8#343 /atilde 8#344 /adieresis 8#345 /aring
8#346 /ae 8#347 /ccedilla 8#350 /egrave 8#351 /eacute
8#352 /ecircumflex 8#353 /edieresis 8#354 /igrave 8#355 /iacute
8#356 /icircumflex 8#357 /idieresis 8#360 /eth 8#361 /ntilde 8#362 /ograve
8#363 /oacute 8#364 /ocircumflex 8#365 /otilde 8#366 /odieresis 8#367 /divide
8#370 /oslash 8#371 /ugrave 8#372 /uacute 8#373 /ucircumflex
8#374 /udieresis 8#375 /yacute 8#376 /thorn 8#377 /ydieresis] def
/Times-Roman /Times-Roman-iso isovec ReEncode
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Ellipse
7.500 slw
n 2250 5400 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Ellipse
n 2250 5925 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Ellipse
n 2250 6450 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Polyline
 [60] 0 sd
n 1800 1500 m
 2700 1500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 2100 m
 2700 2100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 2700 m
 2700 2700 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 3000 m
 2700 3000 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 3300 m
 2700 3300 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 3600 m
 2700 3600 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 3900 m
 2700 3900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 4200 m
 2700 4200 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 4500 m
 2700 4500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 4800 m
 2700 4800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 5100 m
 2700 5100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 6900 m
 2700 6900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 7200 m
 2700 7200 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 7500 m
 2700 7500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 7800 m
 2700 7800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 8100 m
 2700 8100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 8400 m
 2700 8400 l gs col0 s gr  [] 0 sd
% Polyline
n 1800 1800 m 2700 1800 l 2700 2400 l 1800 2400 l
 cp gs col0 s gr 
% Polyline
n 1800 2700 m 2700 2700 l 2700 3300 l 1800 3300 l
 cp gs col0 s gr 
% Polyline
n 1800 8100 m 2700 8100 l 2700 8700 l 1800 8700 l
 cp gs col0 s gr 
% Polyline
 [60] 0 sd
n 1800 1800 m
 2700 1800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 1800 2400 m
 2700 2400 l gs col0 s gr  [] 0 sd
% Polyline
n 1800 1200 m 2700 1200 l 2700 8700 l 1800 8700 l
 cp gs col0 s gr 
% Polyline
n 1575 1800 m 1500 1800 l 1500 2400 l
 1575 2400 l gs col0 s gr 
% Polyline
n 1575 2700 m 1500 2700 l 1500 3300 l
 1575 3300 l gs col0 s gr 
% Polyline
n 1575 3900 m 1500 3900 l 1500 4800 l
 1575 4800 l gs col0 s gr 
% Polyline
n 1800 3900 m 2700 3900 l 2700 4800 l 1800 4800 l
 cp gs col0 s gr 
% Polyline
n 1575 8100 m 1500 8100 l 1500 8700 l
 1575 8700 l gs col0 s gr 
/Times-Roman-iso ff 200.00 scf sf
975 1950 m
gs 1 -1 sc (text) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
975 2850 m
gs 1 -1 sc (data) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
900 4050 m
gs 1 -1 sc (bss) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
900 8175 m
gs 1 -1 sc (stack) col0 sh gr
% Ellipse
n 6150 5400 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Ellipse
n 6150 5925 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Ellipse
n 6150 6450 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Polyline
 [60] 0 sd
n 5700 1500 m
 6600 1500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 2100 m
 6600 2100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 2700 m
 6600 2700 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 3000 m
 6600 3000 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 3300 m
 6600 3300 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 3600 m
 6600 3600 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 3900 m
 6600 3900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 4200 m
 6600 4200 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 4500 m
 6600 4500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 4800 m
 6600 4800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 5100 m
 6600 5100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 6900 m
 6600 6900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 7200 m
 6600 7200 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 7500 m
 6600 7500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 7800 m
 6600 7800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 8100 m
 6600 8100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 8400 m
 6600 8400 l gs col0 s gr  [] 0 sd
% Polyline
n 5700 1800 m 6600 1800 l 6600 2400 l 5700 2400 l
 cp gs col0 s gr 
% Polyline
n 5700 2700 m 6600 2700 l 6600 3300 l 5700 3300 l
 cp gs col0 s gr 
% Polyline
n 5700 8100 m 6600 8100 l 6600 8700 l 5700 8700 l
 cp gs col0 s gr 
% Polyline
 [60] 0 sd
n 5700 1800 m
 6600 1800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 5700 2400 m
 6600 2400 l gs col0 s gr  [] 0 sd
% Polyline
n 5700 1200 m 6600 1200 l 6600 8700 l 5700 8700 l
 cp gs col0 s gr 
% Polyline
n 5475 1800 m 5400 1800 l 5400 2400 l
 5475 2400 l gs col0 s gr 
% Polyline
n 5475 2700 m 5400 2700 l 5400 3300 l
 5475 3300 l gs col0 s gr 
% Polyline
n 5475 3900 m 5400 3900 l 5400 4800 l
 5475 4800 l gs col0 s gr 
% Polyline
n 5700 3900 m 6600 3900 l 6600 4800 l 5700 4800 l
 cp gs col0 s gr 
% Polyline
n 5475 8100 m 5400 8100 l 5400 8700 l
 5475 8700 l gs col0 s gr 
/Times-Roman-iso ff 200.00 scf sf
4875 1950 m
gs 1 -1 sc (text) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
4875 2850 m
gs 1 -1 sc (data) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
4800 4050 m
gs 1 -1 sc (bss) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
4800 8175 m
gs 1 -1 sc (stack) col0 sh gr
% Ellipse
n 14700 5400 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Ellipse
n 14700 5925 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Ellipse
n 14700 6450 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Polyline
 [60] 0 sd
n 14250 1500 m
 15150 1500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 2100 m
 15150 2100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 2700 m
 15150 2700 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 3000 m
 15150 3000 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 3300 m
 15150 3300 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 3600 m
 15150 3600 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 3900 m
 15150 3900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 4200 m
 15150 4200 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 4500 m
 15150 4500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 4800 m
 15150 4800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 5100 m
 15150 5100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 6900 m
 15150 6900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 7200 m
 15150 7200 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 7500 m
 15150 7500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 7800 m
 15150 7800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 8100 m
 15150 8100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 8400 m
 15150 8400 l gs col0 s gr  [] 0 sd
% Polyline
n 14250 1800 m 15150 1800 l 15150 2400 l 14250 2400 l
 cp gs col0 s gr 
% Polyline
n 14250 2700 m 15150 2700 l 15150 3300 l 14250 3300 l
 cp gs col0 s gr 
% Polyline
n 14250 8100 m 15150 8100 l 15150 8700 l 14250 8700 l
 cp gs col0 s gr 
% Polyline
 [60] 0 sd
n 14250 1800 m
 15150 1800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 14250 2400 m
 15150 2400 l gs col0 s gr  [] 0 sd
% Polyline
n 14250 1200 m 15150 1200 l 15150 8700 l 14250 8700 l
 cp gs col0 s gr 
% Polyline
n 14250 3900 m 15150 3900 l 15150 4800 l 14250 4800 l
 cp gs col0 s gr 
% Polyline
n 15300 8100 m 15375 8100 l 15375 8700 l
 15300 8700 l gs col0 s gr 
% Polyline
n 15375 3900 m 15450 3900 l 15450 4800 l
 15375 4800 l gs col0 s gr 
% Polyline
n 15300 2700 m 15375 2700 l 15375 3300 l
 15300 3300 l gs col0 s gr 
% Polyline
n 15300 1800 m 15375 1800 l 15375 2400 l
 15300 2400 l gs col0 s gr 
/Times-Roman-iso ff 200.00 scf sf
15600 8175 m
gs 1 -1 sc (stack) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
15600 4050 m
gs 1 -1 sc (bss) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
15525 2850 m
gs 1 -1 sc (data) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
15525 1950 m
gs 1 -1 sc (text) col0 sh gr
% Ellipse
n 12075 5400 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Ellipse
n 12075 5925 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Ellipse
n 12075 6450 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Polyline
 [60] 0 sd
n 11625 1500 m
 12525 1500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 2100 m
 12525 2100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 2700 m
 12525 2700 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 3000 m
 12525 3000 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 3300 m
 12525 3300 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 3600 m
 12525 3600 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 3900 m
 12525 3900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 4200 m
 12525 4200 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 4500 m
 12525 4500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 4800 m
 12525 4800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 5100 m
 12525 5100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 6900 m
 12525 6900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 7200 m
 12525 7200 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 7500 m
 12525 7500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 7800 m
 12525 7800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 8100 m
 12525 8100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 8400 m
 12525 8400 l gs col0 s gr  [] 0 sd
% Polyline
n 11625 1800 m 12525 1800 l 12525 2400 l 11625 2400 l
 cp gs col0 s gr 
% Polyline
n 11625 2700 m 12525 2700 l 12525 3300 l 11625 3300 l
 cp gs col0 s gr 
% Polyline
n 11625 8100 m 12525 8100 l 12525 8700 l 11625 8700 l
 cp gs col0 s gr 
% Polyline
 [60] 0 sd
n 11625 1800 m
 12525 1800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 11625 2400 m
 12525 2400 l gs col0 s gr  [] 0 sd
% Polyline
n 11625 1200 m 12525 1200 l 12525 8700 l 11625 8700 l
 cp gs col0 s gr 
% Polyline
n 11400 1800 m 11325 1800 l 11325 2400 l
 11400 2400 l gs col0 s gr 
% Polyline
n 11400 2700 m 11325 2700 l 11325 3300 l
 11400 3300 l gs col0 s gr 
% Polyline
n 11400 3900 m 11325 3900 l 11325 4800 l
 11400 4800 l gs col0 s gr 
% Polyline
n 11625 3900 m 12525 3900 l 12525 4800 l 11625 4800 l
 cp gs col0 s gr 
% Polyline
n 11400 8100 m 11325 8100 l 11325 8700 l
 11400 8700 l gs col0 s gr 
/Times-Roman-iso ff 200.00 scf sf
10800 1950 m
gs 1 -1 sc (text) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10800 2850 m
gs 1 -1 sc (data) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10725 4050 m
gs 1 -1 sc (bss) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10725 8175 m
gs 1 -1 sc (stack) col0 sh gr
% Ellipse
n 8625 5400 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Ellipse
n 8625 5925 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Ellipse
n 8625 6450 75 75 0 360 DrawEllipse gs 0.00 setgray ef gr gs col0 s gr

% Polyline
 [60] 0 sd
n 8175 1500 m
 9075 1500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 2100 m
 9075 2100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 2700 m
 9075 2700 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 3000 m
 9075 3000 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 3300 m
 9075 3300 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 3600 m
 9075 3600 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 3900 m
 9075 3900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 4200 m
 9075 4200 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 4500 m
 9075 4500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 4800 m
 9075 4800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 5100 m
 9075 5100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 6900 m
 9075 6900 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 7200 m
 9075 7200 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 7500 m
 9075 7500 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 7800 m
 9075 7800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 8100 m
 9075 8100 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 8400 m
 9075 8400 l gs col0 s gr  [] 0 sd
% Polyline
n 8175 1800 m 9075 1800 l 9075 2400 l 8175 2400 l
 cp gs col0 s gr 
% Polyline
n 8175 2700 m 9075 2700 l 9075 3300 l 8175 3300 l
 cp gs col0 s gr 
% Polyline
n 8175 8100 m 9075 8100 l 9075 8700 l 8175 8700 l
 cp gs col0 s gr 
% Polyline
 [60] 0 sd
n 8175 1800 m
 9075 1800 l gs col0 s gr  [] 0 sd
% Polyline
 [60] 0 sd
n 8175 2400 m
 9075 2400 l gs col0 s gr  [] 0 sd
% Polyline
n 8175 1200 m 9075 1200 l 9075 8700 l 8175 8700 l
 cp gs col0 s gr 
% Polyline
n 8175 3900 m 9075 3900 l 9075 4800 l 8175 4800 l
 cp gs col0 s gr 
% Polyline
n 9225 8100 m 9300 8100 l 9300 8700 l
 9225 8700 l gs col0 s gr 
% Polyline
n 9300 3900 m 9375 3900 l 9375 4800 l
 9300 4800 l gs col0 s gr 
% Polyline
n 9225 2700 m 9300 2700 l 9300 3300 l
 9225 3300 l gs col0 s gr 
% Polyline
n 9225 1800 m 9300 1800 l 9300 2400 l
 9225 2400 l gs col0 s gr 
/Times-Roman-iso ff 200.00 scf sf
9525 8175 m
gs 1 -1 sc (stack) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
9525 4050 m
gs 1 -1 sc (bss) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
9450 2850 m
gs 1 -1 sc (data) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
9450 1950 m
gs 1 -1 sc (text) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
7050 930 m
gs 1 -1 sc (Frames) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
7125 675 m
gs 1 -1 sc (Page) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
5700 675 m
gs 1 -1 sc (parent) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
5700 930 m
gs 1 -1 sc (VA space) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
8325 930 m
gs 1 -1 sc (VA space) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
8325 675 m
gs 1 -1 sc (child) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
12975 930 m
gs 1 -1 sc (Frames) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
13050 675 m
gs 1 -1 sc (Page) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
11625 675 m
gs 1 -1 sc (parent) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
11625 930 m
gs 1 -1 sc (VA space) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
14250 930 m
gs 1 -1 sc (VA space) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
14250 675 m
gs 1 -1 sc (child) col0 sh gr
% Arc
gs  clippath
13243 4639 m 13285 4681 l 13392 4573 l 13287 4638 l 13350 4531 l cp
eoclip
n 13068.8 4350.0 364.1 -55.5 55.5 arc
gs col0 s gr
 gr

% arrowhead
n 13350 4531 m 13287 4638 l 13392 4573 l  col0 s
% Arc
gs  clippath
13468 4639 m 13510 4681 l 13617 4573 l 13512 4638 l 13575 4531 l cp
eoclip
n 13293.8 4350.0 364.1 -55.5 55.5 arc
gs col0 s gr
 gr

% arrowhead
n 13575 4531 m 13512 4638 l 13617 4573 l  col0 s
% Polyline
n 3300 1800 m 4200 1800 l 4200 2100 l 3300 2100 l
 cp gs col0 s gr 
% Polyline
n 3300 2700 m 4200 2700 l 4200 3000 l 3300 3000 l
 cp gs col0 s gr 
% Polyline
n 3300 3225 m 4200 3225 l 4200 3525 l 3300 3525 l
 cp gs col0 s gr 
% Polyline
n 3300 3900 m 4200 3900 l 4200 4200 l 3300 4200 l
 cp gs col0 s gr 
% Polyline
n 3300 8100 m 4200 8100 l 4200 8400 l 3300 8400 l
 cp gs col0 s gr 
% Polyline
gs  clippath
3315 1980 m 3315 1920 l 3163 1920 l 3283 1950 l 3163 1980 l cp
eoclip
n 2700 1950 m
 3300 1950 l gs col0 s gr gr

% arrowhead
n 3163 1980 m 3283 1950 l 3163 1920 l  col0 s
% Polyline
gs  clippath
3315 2880 m 3315 2820 l 3163 2820 l 3283 2850 l 3163 2880 l cp
eoclip
n 2700 2850 m
 3300 2850 l gs col0 s gr gr

% arrowhead
n 3163 2880 m 3283 2850 l 3163 2820 l  col0 s
% Polyline
gs  clippath
3315 4080 m 3315 4020 l 3163 4020 l 3283 4050 l 3163 4080 l cp
eoclip
n 2700 4050 m
 3300 4050 l gs col0 s gr gr

% arrowhead
n 3163 4080 m 3283 4050 l 3163 4020 l  col0 s
% Polyline
gs  clippath
3315 8280 m 3315 8220 l 3163 8220 l 3283 8250 l 3163 8280 l cp
eoclip
n 2700 8250 m
 3300 8250 l gs col0 s gr gr

% arrowhead
n 3163 8280 m 3283 8250 l 3163 8220 l  col0 s
% Polyline
15.000 slw
 [90] 0 sd
n 4500 450 m
 4500 9000 l gs col0 s gr  [] 0 sd
% Polyline
 [90] 0 sd
n 10275 450 m
 10275 9000 l gs col0 s gr  [] 0 sd
% Polyline
7.500 slw
n 6975 1800 m 7875 1800 l 7875 2100 l 6975 2100 l
 cp gs col0 s gr 
% Polyline
n 6975 2700 m 7875 2700 l 7875 3000 l 6975 3000 l
 cp gs col0 s gr 
% Polyline
n 6975 3300 m 7875 3300 l 7875 3600 l 6975 3600 l
 cp gs col0 s gr 
% Polyline
n 6975 3900 m 7875 3900 l 7875 4200 l 6975 4200 l
 cp gs col0 s gr 
% Polyline
n 6975 8100 m 7875 8100 l 7875 8400 l 6975 8400 l
 cp gs col0 s gr 
% Polyline
gs  clippath
6990 1980 m 6990 1920 l 6838 1920 l 6958 1950 l 6838 1980 l cp
eoclip
n 6600 1950 m
 6975 1950 l gs col0 s gr gr

% arrowhead
n 6838 1980 m 6958 1950 l 6838 1920 l  col0 s
% Polyline
gs  clippath
6990 2880 m 6990 2820 l 6838 2820 l 6958 2850 l 6838 2880 l cp
eoclip
n 6600 2850 m
 6975 2850 l gs col0 s gr gr

% arrowhead
n 6838 2880 m 6958 2850 l 6838 2820 l  col0 s
% Polyline
gs  clippath
3304 3483 m 3323 3426 l 3179 3378 l 3284 3445 l 3160 3435 l cp
eoclip
n 2625 3225 m
 3300 3450 l gs col0 s gr gr

% arrowhead
n 3160 3435 m 3284 3445 l 3179 3378 l  col0 s
% Polyline
gs  clippath
6977 3408 m 7000 3352 l 6859 3296 l 6960 3369 l 6837 3352 l cp
eoclip
n 6600 3225 m
 6975 3375 l gs col0 s gr gr

% arrowhead
n 6837 3352 m 6960 3369 l 6859 3296 l  col0 s
% Polyline
gs  clippath
6990 4080 m 6990 4020 l 6838 4020 l 6958 4050 l 6838 4080 l cp
eoclip
n 6600 4050 m
 6975 4050 l gs col0 s gr gr

% arrowhead
n 6838 4080 m 6958 4050 l 6838 4020 l  col0 s
% Polyline
gs  clippath
6990 8280 m 6990 8220 l 6838 8220 l 6958 8250 l 6838 8280 l cp
eoclip
n 6600 8250 m
 6975 8250 l gs col0 s gr gr

% arrowhead
n 6838 8280 m 6958 8250 l 6838 8220 l  col0 s
% Polyline
gs  clippath
7860 2820 m 7860 2880 l 8012 2880 l 7892 2850 l 8012 2820 l cp
eoclip
n 8175 2850 m
 7875 2850 l gs col0 s gr gr

% arrowhead
n 8012 2820 m 7892 2850 l 8012 2880 l  col0 s
% Polyline
gs  clippath
7845 3359 m 7880 3408 l 8002 3317 l 7888 3365 l 7966 3269 l cp
eoclip
n 8175 3150 m
 7875 3375 l gs col0 s gr gr

% arrowhead
n 7966 3269 m 7888 3365 l 8002 3317 l  col0 s
% Polyline
gs  clippath
7860 4020 m 7860 4080 l 8012 4080 l 7892 4050 l 8012 4020 l cp
eoclip
n 8175 4050 m
 7875 4050 l gs col0 s gr gr

% arrowhead
n 8012 4020 m 7892 4050 l 8012 4080 l  col0 s
% Polyline
gs  clippath
7860 8145 m 7860 8205 l 8012 8205 l 7892 8175 l 8012 8145 l cp
eoclip
n 8175 8175 m
 7875 8175 l gs col0 s gr gr

% arrowhead
n 8012 8145 m 7892 8175 l 8012 8205 l  col0 s
% Polyline
gs  clippath
7860 1920 m 7860 1980 l 8012 1980 l 7892 1950 l 8012 1920 l cp
eoclip
n 8175 1950 m
 7875 1950 l gs col0 s gr gr

% arrowhead
n 8012 1920 m 7892 1950 l 8012 1980 l  col0 s
% Polyline
n 13050 1800 m 13950 1800 l 13950 2100 l 13050 2100 l
 cp gs col0 s gr 
% Polyline
n 13050 2700 m 13950 2700 l 13950 3000 l 13050 3000 l
 cp gs col0 s gr 
% Polyline
n 13050 3300 m 13950 3300 l 13950 3600 l 13050 3600 l
 cp gs col0 s gr 
% Polyline
n 13050 3900 m 13950 3900 l 13950 4200 l 13050 4200 l
 cp gs col0 s gr 
% Polyline
n 13050 4425 m 13950 4425 l 13950 4725 l 13050 4725 l
 cp gs col0 s gr 
% Polyline
n 13050 8100 m 13950 8100 l 13950 8400 l 13050 8400 l
 cp gs col0 s gr 
% Polyline
gs  clippath
13065 8280 m 13065 8220 l 12913 8220 l 13033 8250 l 12913 8280 l cp
eoclip
n 12525 8250 m
 13050 8250 l gs col0 s gr gr

% arrowhead
n 12913 8280 m 13033 8250 l 12913 8220 l  col0 s
% Polyline
gs  clippath
13065 4080 m 13065 4020 l 12913 4020 l 13033 4050 l 12913 4080 l cp
eoclip
n 12525 4050 m
 13050 4050 l gs col0 s gr gr

% arrowhead
n 12913 4080 m 13033 4050 l 12913 4020 l  col0 s
% Polyline
gs  clippath
13917 4417 m 13964 4455 l 14058 4337 l 13960 4412 l 14011 4299 l cp
eoclip
n 14250 4050 m
 13950 4425 l gs col0 s gr gr

% arrowhead
n 14011 4299 m 13960 4412 l 14058 4337 l  col0 s
% Polyline
gs  clippath
13065 1980 m 13065 1920 l 12913 1920 l 13033 1950 l 12913 1980 l cp
eoclip
n 12525 1950 m
 13050 1950 l gs col0 s gr gr

% arrowhead
n 12913 1980 m 13033 1950 l 12913 1920 l  col0 s
% Polyline
gs  clippath
13935 1920 m 13935 1980 l 14087 1980 l 13967 1950 l 14087 1920 l cp
eoclip
n 14250 1950 m
 13950 1950 l gs col0 s gr gr

% arrowhead
n 14087 1920 m 13967 1950 l 14087 1980 l  col0 s
% Polyline
gs  clippath
13065 2880 m 13065 2820 l 12913 2820 l 13033 2850 l 12913 2880 l cp
eoclip
n 12525 2850 m
 13050 2850 l gs col0 s gr gr

% arrowhead
n 12913 2880 m 13033 2850 l 12913 2820 l  col0 s
% Polyline
gs  clippath
13935 2820 m 13935 2880 l 14087 2880 l 13967 2850 l 14087 2820 l cp
eoclip
n 14250 2850 m 14175 2850 l 14100 2850 l 14025 2850 l
 13950 2850 l gs col0 s gr gr

% arrowhead
n 14087 2820 m 13967 2850 l 14087 2880 l  col0 s
% Polyline
gs  clippath
13051 3408 m 13075 3353 l 12936 3293 l 13035 3368 l 12912 3348 l cp
eoclip
n 12525 3150 m
 13050 3375 l gs col0 s gr gr

% arrowhead
n 12912 3348 m 13035 3368 l 12936 3293 l  col0 s
% Polyline
gs  clippath
13993 3364 m 14035 3406 l 14143 3299 l 14037 3363 l 14100 3256 l cp
eoclip
n 14250 3150 m
 14025 3375 l gs col0 s gr gr

% arrowhead
n 14100 3256 m 14037 3363 l 14143 3299 l  col0 s
% Polyline
gs  clippath
13860 8220 m 13860 8280 l 14012 8280 l 13892 8250 l 14012 8220 l cp
eoclip
n 14250 8250 m
 13875 8250 l gs col0 s gr gr

% arrowhead
n 14012 8220 m 13892 8250 l 14012 8280 l  col0 s
/Times-Roman-iso ff 200.00 scf sf
3000 1875 m
gs 1 -1 sc (r-x) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
2850 2775 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
2850 3975 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
2850 8175 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
2100 675 m
gs 1 -1 sc (parent) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
2100 930 m
gs 1 -1 sc (VA space) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
3600 675 m
gs 1 -1 sc (Page) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
3600 930 m
gs 1 -1 sc (Frames) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
1050 2175 m
gs 1 -1 sc (r-x) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
1050 3075 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
1050 4275 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
1125 8400 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
4950 8400 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
4875 4275 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
5025 3075 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
5025 2175 m
gs 1 -1 sc (r-x) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
9525 2175 m
gs 1 -1 sc (r-x) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10875 2175 m
gs 1 -1 sc (r-x) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
9525 3075 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10800 3075 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
9600 4275 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10800 4275 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
9600 8400 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10800 8400 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
15525 2175 m
gs 1 -1 sc (r-x) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
15600 3075 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
15675 4275 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
15750 8400 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
6675 1875 m
gs 1 -1 sc (r-x) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
2925 3225 m
gs 1 -1 sc (rw-) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
6675 2775 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
6750 3150 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
6675 3975 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
6675 8175 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
7950 2700 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
7950 3150 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
7950 3900 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
7950 8100 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
7875 1875 m
gs 1 -1 sc (r-x) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
12675 1875 m
gs 1 -1 sc (r-x) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
13950 1800 m
gs 1 -1 sc (r-x) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
12750 2775 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
14025 2775 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
13950 3150 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
12750 3225 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
12750 3975 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
12675 8175 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
14025 8175 m
gs 1 -1 sc (r--) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
14025 4050 m
gs 1 -1 sc (rw-) col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND/F1 13/Times-Bold@0 SF(Mmap)248.921 421.08 Q/F2 13/Times-Roman@0
SF .779(The mmap\(2\) system call causes a speci\214ed \214le to be map\
ped into the process')33.336 457.08 R 4.03(sa)-.715 G(ddress)-4.03 E
1.618(space, creating a ne)33.336 472.08 R 4.868(wr)-.325 G -.195(eg)
-4.868 G 4.868(ion. It).195 F 1.618(can also be used to create a ne)
4.868 F 4.868(wa)-.325 G(non)-4.868 E 1.618(ymous memory)-.195 F(re)
33.336 487.08 Q 4.183(gion. The)-.195 F .933
(\214rst address of the mapped re)4.183 F .933
(gion will correspond to the speci\214ed of)-.195 F .934(fset in)-.325 F
1.042(the \214le, which must be a multiple of the page size, for the sp\
eci\214ed length.)33.336 502.08 R 1.041(The virtual)7.541 F .005
(address at which to map the se)33.336 517.08 R .005
(gment can be speci\214ed e)-.195 F(xplicitly)-.195 E 3.255(,b)-.845 G
.006(ut usually it is left to the)-3.515 F -.13(ke)33.336 532.08 S
(rnel to choose.).13 E/F3 10/Courier@0 SF
(void *mmap\(void *addr, size_t len, int prot, int flags,)33.336 544.08
Q(int file_descriptor, off_t offset\))148.536 556.08 Q/F4 13/Courier@0
SF(prot)33.336 577.08 Q F2 5.861
(is a bitwise \215ag combination which can include the bits PR)9.111 F
-.52(OT)-.52 G(_READ,).52 E(PR)33.336 592.08 Q -.52(OT)-.52 G
(_WRITE or PR).52 E -.52(OT)-.52 G(_EXEC.).52 E F4(flags)33.336 613.08 Q
F2(is a bitwise \215ag which can contain, among others:)3.25 E 3.25
<834d>33.336 628.08 S 3.25(AP_SHARED: Write)-3.25 F
(operations to mapped re)3.25 E(gion change the contents of the \214le.)
-.195 E 6.029<834d>33.336 643.08 S(AP_PRIV)-6.029 E -1.443(AT)-1.755 G
2.779(E: Mutually e)1.443 F(xclusi)-.195 E 3.169 -.195(ve w)-.325 H
2.779(ith MAP_SHARED: Write operations to the).195 F(mapped re)33.336
658.08 Q(gion do not change the contents of the \214le.)-.195 E 3.915
<834d>33.336 673.08 S .665(AP_DENYWRITE: Setting it will pre)-3.915 F
-.195(ve)-.325 G .665(nt write access to the mapped \214led using the)
.195 F 2.33(traditional write system call.)33.336 688.08 R 2.33
(See discussion at end of this unit.)8.83 F(Ho)8.83 E(we)-.325 E -.195
(ve)-.325 G 3.37 -.52(r, t).195 H 2.33(he Linux).52 F -.13(ke)33.336
703.08 S 2.436(rnel currently pre).13 F -.195(ve)-.325 G 2.435
(nts programs from setting this \215ag with the mmap system call,).195 F
(although the \215ag is used internally by the k)33.336 718.08 Q
(ernel to protect e)-.13 E -.195(xe)-.195 G(cutable \214les.).195 E
6.691<834d>33.336 733.08 S(AP_GR)-6.691 E -.455(OW)-.52 G(SDO).455 E
3.441(WN: The re)-.455 F 3.441(gion should ha)-.195 F 3.831 -.195(ve t)
-.26 H 3.441(he property that it automagically).195 F 0 Cg EP
%%Page: 12 12
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 12)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF(gro)33.336 120 Q(ws to)-.325 E -.13(wa)
-.325 G(rds lo).13 E 3.25(wm)-.325 G(emory)-3.25 E 3.25(,i)-.845 G
(.e. it is intended to be a stack re)-3.25 E(gion.)-.195 E 11.189<834d>
33.336 135 S 7.939(AP_ANONYMOUS: A ne)-11.189 F 9.629 -.845(w, a)-.325 H
(non).845 E 7.939(ymous re)-.195 F 7.938(gion is being requested.)-.195
F(The)14.438 E(\214le_descriptor and of)33.336 150 Q
(fset parameters are ignored.)-.325 E .829(Once the ne)33.336 186 R
4.079(wr)-.325 G -.195(eg)-4.079 G .83(ion has been created and mapped \
to the \214le, the process may close the).195 F 1.31(\214le desciptor)
33.336 201 R 4.56(,a)-.52 G 1.31(nd the mapping remains in ef)-4.56 F
4.56(fect. The)-.325 F 1.309(mapping establishes the backing)4.56 F
4.774(store for this re)33.336 216 R 4.774
(gion, and establishes an equi)-.195 F -.325(va)-.325 G(lenc).325 E
8.024(yb)-.195 G 4.774(etween the re)-8.024 F 4.775(gion and the)-.195 F
(corresponding area in the \214le.)33.336 231 Q 2.187
(When MAP_SHARED is speci\214ed, writing to the memory re)33.336 252 R
2.186(gion is immediately and)-.195 F .435
(transparently visible to this or an)33.336 267 R 3.685(yo)-.195 G .435
(ther process through the traditional system calls such)-3.685 F(as)
33.336 282 Q/F2 13/Courier@0 SF(read)3.265 E F1 6.515(.L)C(ik)-6.515 E
-.325(ew)-.13 G .015(ise, an).325 F 3.265(yc)-.195 G .015
(hanges to the \214le, e.g.)-3.265 F(through)6.515 E F2(write)3.265 E F1
3.265(,a)C .015(re immediately visible)-3.265 F(through the mapped re)
33.336 297 Q(gion.)-.195 E 2.24(When the mapping is MAP_PRIV)33.336 318
R -1.443(AT)-1.755 G 2.241(E, something similar to Cop)1.443 F 5.491(yo)
-.13 G 5.491(nW)-5.491 G 2.241(rite happens.)-5.491 F .118
(Upon the \214rst memory write access to a page in a MAP_PRIV)33.336 333
R -1.443(AT)-1.755 G 3.368(Er)1.443 G -.195(eg)-3.368 G .118
(ion, the association).195 F .41
(between that virtual page and the \214le is brok)33.336 348 R 3.661
(en. Thus)-.13 F .411(writes to a MAP_PRIV)3.661 F -1.443(AT)-1.755 G
3.661(Er)1.443 G -.195(eg)-3.661 G(ion).195 E .14(do NO)33.336 363 R
3.39(Tc)-.52 G .14(ause the associated \214le to be modi\214ed.)-3.39 F
.14(It is unspeci\214ed if writes to the \214le \(e.g.)6.64 F 1.747
(via the write system call\) are visible in the memory re)33.336 378 R
1.748(gion, before the association has)-.195 F .463(been brok)33.336 393
R .463(en by a write to the memory re)-.13 F 3.713(gion. On)-.195 F .462
(the Linux 2.6 k)3.713 F .462(ernel, the)-.13 F 3.712(ya)-.195 G .462
(re \(b)-3.712 F .462(ut see)-.26 F(discussion of MAP_DENYWRITE\).)
33.336 408 Q -.195(Pa)33.336 429 S 2.165(ges in a MAP_PRIV).195 F -1.443
(AT)-1.755 G 5.415(Ea)1.443 G 2.165(rea, once the)-5.415 F 5.416(yh)
-.195 G -2.925 -.26(av e)-5.416 H 2.166(been written to, become anon)
5.676 F(ymous)-.195 E 1.12(pages, because the association of that parti\
cular virtual page with that particular area of)33.336 444 R .13
(the mapped \214le has been brok)33.336 459 R 3.38(en. Therefore,)-.13 F
.13(if the)3.38 F 3.38(yn)-.195 G .13(eed to be paged-out, the)-3.38 F
3.38(ya)-.195 G .13(re sent to)-3.38 F(sw)33.336 474 Q(ap; the)-.13 E
3.25(yc)-.195 G(an not be paged-out to the original \214le.)-3.25 E
1.596(The mapped re)33.336 495 R 1.596(gion may e)-.195 F 1.595
(xtend be)-.195 F 1.595(yond the current end of the \214le.)-.195 F
1.595(This could happen)8.095 F 1.836(either because the)33.336 510 R F2
(len)5.086 E F1 1.837(parameter speci\214ed is lar)5.086 F 1.837
(ger than the \214le, or because after the)-.234 F 3.02(mapping has bee\
n established, the \214le size is reduced \(e.g. through the)33.336 525
R F2(truncate)6.27 E F1 .326(system call\).)33.336 540 R .326
(If the process attempts to access memory which corresponds to just be)
6.826 F(yond)-.195 E .335(the current end of \214le, b)33.336 555 R .335
(ut not be)-.26 F .335(yond a page size boundary)-.195 F 3.585(,i)-.845
G 3.585(tw)-3.585 G .335(ill see bytes with a v)-3.585 F(alue)-.325 E
.539(of 0.)33.336 570 R(Ho)7.039 E(we)-.325 E -.195(ve)-.325 G 1.579
-.52(r, w).195 H .539(hen the process tries to go further out, be).52 F
.539(yond the page boundary)-.195 F 3.79(,e)-.845 G -.195(ve)-4.115 G(n)
.195 E .314
(though the memory address is within the bounds of the mapped re)33.336
585 R .313(gion, the k)-.195 F .313(ernel will be)-.13 F .194
(unable to satisfy the page f)33.336 600 R .194
(ault, because the backing store does not e)-.13 F .195
(xist in the \214lesystem.)-.195 F(Under this condition, the k)33.336
615 Q(ernel must deli)-.13 E -.195(ve)-.325 G 3.25(raS).195 G(IGB)-3.25
E(US to the process.)-.13 E .307
(Read and write access via a \214le-mapped re)33.336 636 R .307
(gion will set the inode atime, mtime and ctime)-.195 F .057
(\214elds appropriately)33.336 651 R 3.307(,b)-.845 G .057
(ut not necessarily instantaneously)-3.567 F 3.307(,f)-.845 G .057
(or reasons which should become)-3.307 F(clear in subsequent units.)
33.336 666 Q(mmap')33.336 687 Q 6.694(ds)-.65 G -.195(eg)-6.694 G 3.444
(ments are inherited by child processes in fork, using the cop).195 F
(y-on-write)-.13 E 2.427(mechanism for an)33.336 702 R 5.677(yw)-.195 G
2.427(ritable re)-5.677 F 2.427(gions, as pre)-.195 F 2.427
(viously described.)-.325 F 2.427(Multiple processes can)8.927 F .054
(share a mapped se)33.336 717 R 3.303(gment. In)-.195 F -.13(fa)3.303 G
.053(ct, a MAP_ANONYMOUS|MAP_SHARED re).13 F .053(gion can be)-.195 F
3.985(au)33.336 732 S .735(seful inter)-3.985 F .735
(-process communications tool.)-.26 F .735(Note that when a re)7.235 F
.735(gion of memory has the)-.195 F 0 Cg EP
%%Page: 13 13
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 13)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF 5.177(MAP_SHARED property)33.336 120 R
8.427(,c)-.845 G(op)-8.427 E 5.177(y-on-write does not apply to that re)
-.13 F 5.176(gion, and both)-.195 F
(processes after a fork continue to share the same ph)33.336 135 Q
(ysical memory for that re)-.065 E(gion.)-.195 E(The)33.336 156 Q/F2 13
/Courier@0 SF(munmap)3.482 E F1 .232(system call destro)3.482 F .232
(ys a memory re)-.13 F .232(gion and an)-.195 F 3.482(ya)-.195 G .232
(ssociated mapping to a \214le.)-3.482 F(The)33.336 171 Q F2(mremap)
3.542 E F1 .291(system call is used to mak)3.542 F 3.541(ea)-.13 G 3.541
(ne)-3.541 G .291(xisting memory re)-3.736 F .291(gion lar)-.195 F .291
(ger or smaller)-.234 F 3.541(,o)-.52 G(r)-3.541 E .302(to mo)33.336 186
R .692 -.195(ve i)-.195 H 3.552(tt).195 G 3.552(oa)-3.552 G .302
(nother virtual address.)-3.552 F .302
(The reader is encouraged to read the man pages for)6.802 F
(mmap, munmap and mremap carefully)33.336 201 Q(.)-.845 E/F3 13
/Times-Bold@0 SF(Exec and virtual memory)196.746 246 Q F1 1.284
(During the e)33.336 282 R -.195(xe)-.195 G 4.534(cs).195 G 1.283
(ystem call, a ne)-4.534 F 4.533(wa)-.325 G 1.283
(ddress space is initialized and the e)-4.533 F 1.283(xisting address)
-.195 F .497(space of a process is freed.)33.336 297 R .497
(The page tables themselv)6.997 F .498(es are freed and an)-.195 F 3.748
(yp)-.195 G -.065(hy)-3.748 G .498(sical pages).065 F .769
(that the process had mapped are placed on the free list.)33.336 312 R
.768(It is as if the process had called)7.268 F F2(munmap)33.336 327 Q
F1(for each of its re)3.25 E(gions.)-.195 E .501
(The basis of the initialization of the ne)33.336 348 R 3.751(wa)-.325 G
.502(ddress space is the \214lename passed to the e)-3.751 F -.195(xe)
-.195 G(c).195 E 2.178(system call.)33.336 363 R 2.178
(This refers to an e)8.678 F -.195(xe)-.195 G 2.177
(cutable \214le in one of the binary e).195 F -.195(xe)-.195 G 2.177
(cutable formats).195 F 1.244
(which that operating system and processor type can e)33.336 378 R -.195
(xe)-.195 G 4.494(cute. The).195 F 1.245(\214rst fe)4.494 F 4.495(wb)
-.325 G 1.245(ytes of the)-4.495 F 1.678(\214le determines the e)33.336
393 R -.195(xe)-.195 G 1.678(cutable format, and are kno).195 F 1.678
(wn as the)-.325 F F3 1.678(magic number)4.928 F F1 8.178(.W)C 4.928(eh)
-9.218 G -2.925 -.26(av e)-4.928 H 3.037
(seen that the a.out \214le contains the te)33.336 408 R 3.037(xt re)
-.195 F 3.038(gion image, the data re)-.195 F 3.038(gion initial image)
-.195 F(\(v)33.336 423 Q
(ariable initializers\), and the initial requested size of the bss re)
-.325 E(gion.)-.195 E .437(In Unit 3, a highly conceptual model w)33.336
444 R .437(as presented of ho)-.13 F 3.687(wan)-.325 G 1.087 -.325(ew p)
-3.687 H .437(rogram is loaded into).325 F 3.649(memory during e)33.336
459 R -.195(xe)-.195 G 6.899(c. No).195 F 6.899(wt)-.325 G 3.65
(hat we understand mappings between \214les and virtual)-6.899 F(memory)
33.336 474 Q 4.134(,w)-.845 G 4.134(ec)-4.134 G .883(an tak)-4.134 F
4.133(eam)-.13 G .883(ore re\214ned look and see that e)-4.133 F -.195
(xe)-.195 G .883(cutable "loading" is really the).195 F
(establishment of a number of mmap re)33.336 489 Q(gions.)-.195 E 4.308
<8354>33.336 519 S 1.058(he te)-4.308 F 1.058(xt re)-.195 F 1.058(gion \
is created as if the process had used mmap to create a mapping to the)
-.195 F 2.885(area in the a.out \214le holding the te)33.336 534 R 2.884
(xt image.)-.195 F 2.884(The protections of the te)9.384 F 2.884(xt re)
-.195 F 2.884(gion are)-.195 F(PR)33.336 549 Q -.52(OT)-.52 G(_READ|PR)
.52 E -.52(OT)-.52 G 3.777(_EXEC. The).52 F .528(\215ags are MAP_PRIV)
3.778 F -1.443(AT)-1.755 G 3.778(E|MAP_DENYWRITE. Note)1.443 F .563
(that since page frames are ne)33.336 564 R -.195(ve)-.325 G 3.813(ra)
.195 G .563(llocated to virtual address spaces until an actual access)
-3.813 F 2.104(occurs, the v)33.336 579 R 2.104
(ery \214rst thing which the ne)-.195 F 5.354(wp)-.325 G 2.104
(rogram does, upon attempting to fetch its)-5.354 F 2.135
(initial opcode from memory and e)33.336 594 R -.195(xe)-.195 G 2.135
(cute it, is to cause a page f).195 F 5.384(ault! The)-.13 F 2.134
(program is)5.384 F(demand-paged in from the a.out \214le as needed.)
33.336 609 Q 4.62<8354>33.336 639 S 1.371(he data re)-4.62 F 1.371
(gion is created as if by mmap with MAP_PRIV)-.195 F -1.443(AT)-1.755 G
(E|MAP_DENYWRITE.)1.443 E 1.584(The mapping is to the area of the a.out\
 \214le which contains the .data section \(image of)33.336 654 R 5.088
(initializer v)33.336 669 R 8.338(alues\). The)-.325 F 5.089
(protections are PR)8.338 F -.52(OT)-.52 G(_READ|PR).52 E -.52(OT)-.52 G
8.339(_WRITE. Because).52 F(the)8.339 E 2.109(mapping is MAP_PRIV)33.336
684 R -1.443(AT)-1.755 G 2.108
(E, the program "sees" the correct initializers when the)1.443 F 5.358
(ya)-.195 G(re)-5.358 E 1.912(\214rst accessed, b)33.336 699 R 1.912
(ut writes to those v)-.26 F 1.912(ariables don')-.325 F 5.162(tc)-.234
G 1.912(ause the unpleasant consequence of)-5.162 F
(modifying the a.out \214le.)33.336 714 Q 8.634<8354>33.336 744 S 5.384
(he bss re)-8.634 F 5.384
(gion is created, with the size requested in the a.out header)-.195 F
8.633(,a)-.52 G 8.633(sa)-8.633 G 0 Cg EP
%%Page: 14 14
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 14)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF(MAP_ANONYMOUS|MAP_PRIV)33.336 120 Q
-1.443(AT)-1.755 G 10.499(Em)1.443 G 7.25(apping, with PR)-10.499 F -.52
(OT)-.52 G(_READ|PR).52 E -.52(OT)-.52 G(_WRITE).52 E 3.488
(protections. As)33.336 135 R .238(it is accessed, the k)3.488 F .238
(ernel will allocate page frames, zero-\214lling them \214rst.)-.13 F
(As a MAP_ANONYMOUS re)33.336 150 Q(gion, the bss will be back)-.195 E
(ed by sw)-.13 E(ap space.)-.13 E 13.224<8354>33.336 180 S 9.974
(he stack re)-13.224 F 9.974
(gion is created with a small initial size and with the)-.195 F
(MAP_ANONYMOUS|MAP_GR)33.336 195 Q -.455(OW)-.52 G(SDO).455 E 15.071
(WN properties.)-.455 F 15.07(The protections are)21.57 F(PR)33.336 210
Q -.52(OT)-.52 G(_READ|PR).52 E -.52(OT)-.52 G 6.669(_WRITE. The).52 F
3.419(stack re)6.669 F 3.419(gion will be gro)-.195 F 3.419
(wn as it is accessed, as)-.325 F 1.318(described pre)33.336 225 R
(viously)-.325 E 4.568(,w)-.845 G 1.318(ith ne)-4.568 F 4.568(wp)-.325 G
1.317(age frames being zero-\214lled.)-4.568 F 1.317
(The stack is also back)7.817 F(ed)-.13 E(by sw)33.336 240 Q(ap space.)
-.13 E/F2 13/Times-Bold@0 SF(Wh)168.308 270 Q 3.25(yt)-.195 G
(he MAP_DENYWRITE \215ag?)-3.25 E F1 .008(Both te)33.336 306 R .008
(xt and data re)-.195 F .008
(gions are mapped with the MAP_DENYWRITE \215ag set.)-.195 F .008
(The reason)6.508 F .675(for this is the follo)33.336 321 R .674
(wing situation:)-.325 F(Let')7.174 E 3.924(ss)-.715 G .674
(ay a program is running from a particular a.out)-3.924 F 3.758
(\214le, and then someone comes along and re-writes that e)33.336 336 R
-.195(xe)-.195 G 3.758(cutable \(e.g. it is being).195 F 1.137
(recompiled or reinstalled\).)33.336 351 R(Ho)7.637 E(we)-.325 E -.195
(ve)-.325 G 2.177 -.52(r, t).195 H 1.137
(he running program is still mapped to the \214le, so).52 F .845
(what gets paged-in w)33.336 366 R .846
(ould be a mixture of the original contents of the \214le and the ne)
-.13 F(wer)-.325 E 6.335(contents. Clearly)33.336 381 R 3.085(this w)
6.335 F(on')-.13 E 6.334(tw)-.234 G 3.084
(ork...it amounts to a corruption of the program.)-6.464 F(The)9.584 E
.591(DENYWRITE \215ag will pre)33.336 396 R -.195(ve)-.325 G .591(nt an)
.195 F 3.841(yk)-.195 G .591(ind of write access to the e)-3.841 F -.195
(xe)-.195 G .591(cutable \214le, including).195 F 3.265(truncation. It)
33.336 411 R .015(will f)3.265 F .015(ail with the error)-.13 F/F3 13
/Courier@0 SF(ETXTBUSY)3.265 E F1 6.515(.H)C -.325(ow)-6.515 G -2.795
-.325(ev e).325 H 1.055 -.52(r, o).325 H .015
(ne can unlink or rename the).52 F -.195(exe)33.336 426 S .569
(cuting a.out \214le, and install a ne).195 F 3.819(wv)-.325 G .569
(ersion with the same name.)-4.014 F .57(Since the mapping is)7.07 F
1.074(based on inode number)33.336 441 R 4.324(,n)-.52 G 1.073
(ot pathname, the currently running process \(or processes\) will)-4.324
F 3.366(continue to use the old e)33.336 456 R -.195(xe)-.195 G 3.366
(cutable, while an).195 F 6.616(yn)-.195 G 4.016 -.325(ew e)-6.616 H
-.195(xe).13 G(c').195 E 6.616(sw)-.715 G 3.366(ould reference the ne)
-6.746 F(w)-.325 E -.195(exe)33.336 471 S(cutable \(since the).195 E
3.25(ye)-.195 G -.325(va)-3.575 G(luate a pathname, as if by).325 E F2
(open)3.25 E F1(\).)A 12.762(Those responsible for the de)33.336 492 R
-.195(ve)-.325 G 12.762(lopment of the Linux k).195 F 12.761(ernel remo)
-.13 F -.195(ve)-.195 G(d).195 E .416(MAP_DENYWRITE from the list of \
\215ags that can be speci\214ed by the mmap system call)33.336 507 R
1.426(\(the \215ag is accepted b)33.336 522 R 1.426
(ut silently ignored\).)-.26 F 1.425(The reasoning went lik)7.925 F
4.675(et)-.13 G 1.425(his: User A which)-4.675 F 4.199(has read-only ac\
cess to a \214le F could establish a read-only mmap mapping with)33.336
537 R 1.325(DENYWRITE, e)33.336 552 R -.195(ve)-.325 G 4.575(nt).195 G
1.324(hough the)-4.575 F 4.574(yd)-.195 G 4.574(on)-4.574 G 1.324(ot ha)
-4.574 F 1.714 -.195(ve w)-.26 H 1.324(rite permission on F).195 F 7.824
(.T)-1.04 G 1.324(his can create a)-7.824 F 1.229
(denial-of-service attack, in that another user B, who does ha)33.336
567 R 1.62 -.195(ve w)-.26 H 1.23(rite permission, w).195 F(ould)-.13 E
(no)33.336 582 Q 3.25(wb)-.325 G 3.25(ep)-3.25 G(re)-3.25 E -.195(ve)
-.325 G(nted from writing to the \214le.).195 E 0 Cg EP
%%Page: 15 15
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 15)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Bold@0 SF -.325(Ap)146.351 120 S(pendix: Ho).325 E
3.25(wa)-.13 G 3.25(ne)-3.25 G(xecutable \214le is cr)-3.25 E(eated)
-.234 E/F2 13/Times-Roman@0 SF 1.175(In the original UNIX k)33.336 156 R
1.175(ernel, each program w)-.13 F 1.175(as entirely)-.13 F F1
(statically-link)4.425 E(ed)-.13 E F2 4.425(,i)C 1.175(.e. all of the)
-4.425 F 2.382(code required to e)33.336 171 R -.195(xe)-.195 G 2.383
(cute the program, and in particular all of the libraries which the).195
F 1.181(program requires, are put together at compile-time into one lar)
33.336 186 R 1.18(ge monolithic e)-.234 F -.195(xe)-.195 G(cutable).195
E 4.588(\214le. This)33.336 201 R 1.338(practice be)4.588 F -.065(ga)
-.195 G 4.588(nt).065 G 4.588(oc)-4.588 G 1.338
(hange during the 1990s, and today almost all programs in)-4.588 F .581
(almost all UNIX-deri)33.336 216 R -.195(ve)-.325 G 3.831(ds).195 G .581
(ystems are)-3.831 F/F3 13/Times-Italic@0 SF .581(dynamically link)3.831
F(ed)-.13 E F2 7.081(.I)C 3.831(ti)-7.081 G 3.831(ss)-3.831 G .581
(till possible to compile a)-3.831 F 2.429
(program which is statically link)33.336 231 R 2.429(ed, b)-.13 F 2.429
(ut this is e)-.26 F 5.679(xceptional. W)-.195 F 5.679(ew)-1.04 G 2.429
(ill \214rst discuss ho)-5.679 F(w)-.325 E(statically link)33.336 246 Q
(ed programs are link)-.13 E(ed together)-.13 E 3.25(,a)-.52 G
(nd then delv)-3.25 E 3.25(ei)-.195 G(nto dynamic linking.)-3.25 E .772
(Compiling a C program into an e)33.336 267 R -.195(xe)-.195 G .772
(cutable \214le is a multi-stage process in).195 F -.26(vo)-.52 G .772
(lving se).26 F -.195(ve)-.325 G(ral).195 E 3.25(tools. When)33.336 282
R(one simply runs:)3.25 E/F4 10/Courier@0 SF(cc test.c)33.336 294 Q F2
(The)33.336 309 Q/F5 13/Courier@0 SF(cc)7.395 E F2 4.146
(command transparently e)7.395 F -.195(xe)-.195 G 4.146
(cutes the tools, detailed belo).195 F 5.836 -.845(w, r)-.325 H 4.146
(esulting in an).845 F -.195(exe)33.336 324 S 2.176
(cutable \214le called).195 F F5(a.out)5.426 E F2 2.176
(\(if there are no f)5.426 F 2.175(atal errors in compilation\).)-.13 F
2.175(The "a" in)8.675 F 1.224
("a.out" stands for "Absolute", meaning that all symbolic references ha)
33.336 339 R 1.615 -.195(ve b)-.26 H 1.225(een resolv).195 F(ed.)-.195 E
.912(An a.out \214le contains pure machine code that can be directly e)
33.336 354 R -.195(xe)-.195 G .911(cuted by the processor).195 F(.)-.715
E .192(The e)33.336 369 R -.195(xe)-.195 G .193
(cutable \214le \("a.out"\) contains e).195 F -.195(ve)-.325 G .193
(rything that the operating system needs to create).195 F 4.599(ap)
33.336 384 S(rogram')-4.599 E 4.599(si)-.715 G 1.349
(nitial memory con\214guration and be)-4.599 F 1.349(gin e)-.195 F -.195
(xe)-.195 G 4.599(cution. The).195 F 1.348(header of the a.out)4.599 F
2.729(identi\214es it to the operating system as an e)33.336 399 R -.195
(xe)-.195 G 2.729(cutable \214le and speci\214es the processor).195 F
.09(architecture on which the machine code instructions will run.)33.336
414 R 3.34(Ap)6.59 G .09(rogram compiled for an)-3.34 F 1.34
(x86 architecture can not be e)33.336 429 R -.195(xe)-.195 G 1.34
(cuted, for e).195 F 1.34(xample, on a SP)-.195 F 1.34(ARC processor)
-1.196 F 7.84(.T)-.715 G 1.34(he header)-7.84 F(also gi)33.336 444 Q
-.195(ve)-.325 G 3.25(st).195 G(he size of the te)-3.25 E
(xt, data and bss memory requirements, as e)-.195 E(xplained belo)-.195
E -.845(w.)-.325 G(The)33.336 465 Q F5(a.out)3.305 E F2 .055
(\214le includes the literal bytes of e)3.305 F -.195(xe)-.195 G .054
(cutable code which will be loaded into the).195 F(process')33.336 480 Q
(s)-.715 E F5(text)4.704 E F2(re)4.704 E 4.704(gion. These)-.195 F 1.454
(are in a contiguous part of the)4.704 F F5(a.out)4.704 E F2 4.705
(\214le. The)4.704 F(header)4.705 E(gi)33.336 495 Q -.195(ve)-.325 G
4.153(st).195 G .903(he of)-4.153 F .903(fset of the be)-.325 F .903
(ginning of the)-.195 F F5(.text)4.153 E F2 .903(section of the)4.153 F
F5(a.out)4.152 E F2 4.152(,a)C .902(nd also the)-4.152 F F1(load)4.152 E
(addr)33.336 510 Q(ess)-.234 E F2 4.509(,i)C 1.259
(.e. the virtual address at which the compilation system e)-4.509 F
1.259(xpects this te)-.195 F 1.26(xt to be)-.195 F(loaded.)33.336 525 Q
(Lik)33.336 546 Q -.325(ew)-.13 G 1.094(ise, there is a).325 F F5(.data)
4.344 E F2 1.094(section in the)4.344 F F5(a.out)4.344 E F2 1.093
(which contains an image of what the)4.344 F F5(data)33.336 561 Q F2(re)
3.25 E(gion of the process will look lik)-.195 E 3.25(ea)-.13 G 3.25(tp)
-3.25 G(rogram startup.)-3.25 E 0 Cg EP
%%Page: 16 16
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 16)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E 0 0 468 647 -390.603 540 33.336 510.603 PBEGIN
%%BeginDocument: maps.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: maps.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Mon Feb  6 22:31:41 2012
%%For: hak@lex ()
%%BoundingBox: 0 0 647 540
%%Magnification: 1.0000
%%EndComments
/MyAppDict 100 dict dup begin def
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 540 moveto 0 0 lineto 647 0 lineto 647 540 lineto closepath clip newpath
-70.0 577.3 translate
1 -1 scale

% This junk string is used by the show operators
/PATsstr 1 string def
/PATawidthshow { 	% cx cy cchar rx ry string
  % Loop over each character in the string
  {  % cx cy cchar rx ry char
    % Show the character
    dup				% cx cy cchar rx ry char char
    PATsstr dup 0 4 -1 roll put	% cx cy cchar rx ry char (char)
    false charpath		% cx cy cchar rx ry char
    /clip load PATdraw
    % Move past the character (charpath modified the
    % current point)
    currentpoint			% cx cy cchar rx ry char x y
    newpath
    moveto			% cx cy cchar rx ry char
    % Reposition by cx,cy if the character in the string is cchar
    3 index eq {			% cx cy cchar rx ry
      4 index 4 index rmoveto
    } if
    % Reposition all characters by rx ry
    2 copy rmoveto		% cx cy cchar rx ry
  } forall
  pop pop pop pop pop		% -
  currentpoint
  newpath
  moveto
} bind def
/PATcg {
  7 dict dup begin
    /lw currentlinewidth def
    /lc currentlinecap def
    /lj currentlinejoin def
    /ml currentmiterlimit def
    /ds [ currentdash ] def
    /cc [ currentrgbcolor ] def
    /cm matrix currentmatrix def
  end
} bind def
% PATdraw - calculates the boundaries of the object and
% fills it with the current pattern
/PATdraw {			% proc
  save exch
    PATpcalc			% proc nw nh px py
    5 -1 roll exec		% nw nh px py
    newpath
    PATfill			% -
  restore
} bind def
% PATfill - performs the tiling for the shape
/PATfill { % nw nh px py PATfill -
  PATDict /CurrentPattern get dup begin
    setfont
    % Set the coordinate system to Pattern Space
    PatternGState PATsg
    % Set the color for uncolored pattezns
    PaintType 2 eq { PATDict /PColor get PATsc } if
    % Create the string for showing
    3 index string		% nw nh px py str
    % Loop for each of the pattern sources
    0 1 Multi 1 sub {		% nw nh px py str source
	% Move to the starting location
	3 index 3 index		% nw nh px py str source px py
	moveto			% nw nh px py str source
	% For multiple sources, set the appropriate color
	Multi 1 ne { dup PC exch get PATsc } if
	% Set the appropriate string for the source
	0 1 7 index 1 sub { 2 index exch 2 index put } for pop
	% Loop over the number of vertical cells
	3 index 		% nw nh px py str nh
	{			% nw nh px py str
	  currentpoint		% nw nh px py str cx cy
	  2 index oldshow	% nw nh px py str cx cy
	  YStep add moveto	% nw nh px py str
	} repeat		% nw nh px py str
    } for
    5 { pop } repeat
  end
} bind def

% PATkshow - kshow with the current pattezn
/PATkshow {			% proc string
  exch bind			% string proc
  1 index 0 get			% string proc char
  % Loop over all but the last character in the string
  0 1 4 index length 2 sub {
				% string proc char idx
    % Find the n+1th character in the string
    3 index exch 1 add get	% string proc char char+1
    exch 2 copy			% strinq proc char+1 char char+1 char
    % Now show the nth character
    PATsstr dup 0 4 -1 roll put	% string proc chr+1 chr chr+1 (chr)
    false charpath		% string proc char+1 char char+1
    /clip load PATdraw
    % Move past the character (charpath modified the current point)
    currentpoint newpath moveto
    % Execute the user proc (should consume char and char+1)
    mark 3 1 roll		% string proc char+1 mark char char+1
    4 index exec		% string proc char+1 mark...
    cleartomark			% string proc char+1
  } for
  % Now display the last character
  PATsstr dup 0 4 -1 roll put	% string proc (char+1)
  false charpath		% string proc
  /clip load PATdraw
  neewath
  pop pop			% -
} bind def
% PATmp - the makepattern equivalent
/PATmp {			% patdict patmtx PATmp patinstance
  exch dup length 7 add		% We will add 6 new entries plus 1 FID
  dict copy			% Create a new dictionary
  begin
    % Matrix to install when painting the pattern
    TilingType PATtcalc
    /PatternGState PATcg def
    PatternGState /cm 3 -1 roll put
    % Check for multi pattern sources (Level 1 fast color patterns)
    currentdict /Multi known not { /Multi 1 def } if
    % Font dictionary definitions
    /FontType 3 def
    % Create a dummy encoding vector
    /Encoding 256 array def
    3 string 0 1 255 {
      Encoding exch dup 3 index cvs cvn put } for pop
    /FontMatrix matrix def
    /FontBBox BBox def
    /BuildChar {
	mark 3 1 roll		% mark dict char
	exch begin
	Multi 1 ne {PaintData exch get}{pop} ifelse  % mark [paintdata]
	  PaintType 2 eq Multi 1 ne or
	  { XStep 0 FontBBox aload pop setcachedevice }
	  { XStep 0 setcharwidth } ifelse
	  currentdict		% mark [paintdata] dict
	  /PaintProc load	% mark [paintdata] dict paintproc
	end
	gsave
	  false PATredef exec true PATredef
	grestore
	cleartomark		% -
    } bind def
    currentdict
  end				% newdict
  /foo exch			% /foo newlict
  definefont			% newfont
} bind def
% PATpcalc - calculates the starting point and width/height
% of the tile fill for the shape
/PATpcalc {	% - PATpcalc nw nh px py
  PATDict /CurrentPattern get begin
    gsave
	% Set up the coordinate system to Pattern Space
	% and lock down pattern
	PatternGState /cm get setmatrix
	BBox aload pop pop pop translate
	% Determine the bounding box of the shape
	pathbbox			% llx lly urx ury
    grestore
    % Determine (nw, nh) the # of cells to paint width and height
    PatHeight div ceiling		% llx lly urx qh
    4 1 roll				% qh llx lly urx
    PatWidth div ceiling		% qh llx lly qw
    4 1 roll				% qw qh llx lly
    PatHeight div floor			% qw qh llx ph
    4 1 roll				% ph qw qh llx
    PatWidth div floor			% ph qw qh pw
    4 1 roll				% pw ph qw qh
    2 index sub cvi abs			% pw ph qs qh-ph
    exch 3 index sub cvi abs exch	% pw ph nw=qw-pw nh=qh-ph
    % Determine the starting point of the pattern fill
    %(px, py)
    4 2 roll				% nw nh pw ph
    PatHeight mul			% nw nh pw py
    exch				% nw nh py pw
    PatWidth mul exch			% nw nh px py
  end
} bind def

% Save the original routines so that we can use them later on
/oldfill	/fill load def
/oldeofill	/eofill load def
/oldstroke	/stroke load def
/oldshow	/show load def
/oldashow	/ashow load def
/oldwidthshow	/widthshow load def
/oldawidthshow	/awidthshow load def
/oldkshow	/kshow load def

% These defs are necessary so that subsequent procs don't bind in
% the originals
/fill	   { oldfill } bind def
/eofill	   { oldeofill } bind def
/stroke	   { oldstroke } bind def
/show	   { oldshow } bind def
/ashow	   { oldashow } bind def
/widthshow { oldwidthshow } bind def
/awidthshow { oldawidthshow } bind def
/kshow 	   { oldkshow } bind def
/PATredef {
  MyAppDict begin
    {
    /fill { /clip load PATdraw newpath } bind def
    /eofill { /eoclip load PATdraw newpath } bind def
    /stroke { PATstroke } bind def
    /show { 0 0 null 0 0 6 -1 roll PATawidthshow } bind def
    /ashow { 0 0 null 6 3 roll PATawidthshow }
    bind def
    /widthshow { 0 0 3 -1 roll PATawidthshow }
    bind def
    /awidthshow { PATawidthshow } bind def
    /kshow { PATkshow } bind def
  } {
    /fill   { oldfill } bind def
    /eofill { oldeofill } bind def
    /stroke { oldstroke } bind def
    /show   { oldshow } bind def
    /ashow  { oldashow } bind def
    /widthshow { oldwidthshow } bind def
    /awidthshow { oldawidthshow } bind def
    /kshow  { oldkshow } bind def
    } ifelse
  end
} bind def
false PATredef
% Conditionally define setcmykcolor if not available
/setcmykcolor where { pop } {
  /setcmykcolor {
    1 sub 4 1 roll
    3 {
	3 index add neg dup 0 lt { pop 0 } if 3 1 roll
    } repeat
    setrgbcolor - pop
  } bind def
} ifelse
/PATsc {		% colorarray
  aload length		% c1 ... cn length
    dup 1 eq { pop setgray } { 3 eq { setrgbcolor } { setcmykcolor
  } ifelse } ifelse
} bind def
/PATsg {		% dict
  begin
    lw setlinewidth
    lc setlinecap
    lj setlinejoin
    ml setmiterlimit
    ds aload pop setdash
    cc aload pop setrgbcolor
    cm setmatrix
  end
} bind def

/PATDict 3 dict def
/PATsp {
  true PATredef
  PATDict begin
    /CurrentPattern exch def
    % If it's an uncolored pattern, save the color
    CurrentPattern /PaintType get 2 eq {
      /PColor exch def
    } if
    /CColor [ currentrgbcolor ] def
  end
} bind def
% PATstroke - stroke with the current pattern
/PATstroke {
  countdictstack
  save
  mark
  {
    currentpoint strokepath moveto
    PATpcalc				% proc nw nh px py
    clip newpath PATfill
    } stopped {
	(*** PATstroke Warning: Path is too complex, stroking
	  with gray) =
    cleartomark
    restore
    countdictstack exch sub dup 0 gt
	{ { end } repeat } { pop } ifelse
    gsave 0.5 setgray oldstroke grestore
  } { pop restore pop } ifelse
  newpath
} bind def
/PATtcalc {		% modmtx tilingtype PATtcalc tilematrix
  % Note: tiling types 2 and 3 are not supported
  gsave
    exch concat					% tilingtype
    matrix currentmatrix exch			% cmtx tilingtype
    % Tiling type 1 and 3: constant spacing
    2 ne {
	% Distort the pattern so that it occupies
	% an integral number of device pixels
	dup 4 get exch dup 5 get exch		% tx ty cmtx
	XStep 0 dtransform
	round exch round exch			% tx ty cmtx dx.x dx.y
	XStep div exch XStep div exch		% tx ty cmtx a b
	0 YStep dtransform
	round exch round exch			% tx ty cmtx a b dy.x dy.y
	YStep div exch YStep div exch		% tx ty cmtx a b c d
	7 -3 roll astore			% { a b c d tx ty }
    } if
  grestore
} bind def
/PATusp {
  false PATredef
  PATDict begin
    CColor PATsc
  end
} bind def

% this is the pattern fill program from the Second edition Reference Manual
% with changes to call the above pattern fill
% left30
11 dict begin
/PaintType 1 def
/PatternType 1 def
/TilingType 1 def
/BBox [0 0 1 1] def
/XStep 1 def
/YStep 1 def
/PatWidth 1 def
/PatHeight 1 def
/Multi 2 def
/PaintData [
  { clippath } bind
  { 32 16 true [ 32 0 0 -16 0 16 ]
	{<c000c000300030000c000c000300030000c000c000300030
	000c000c00030003c000c000300030000c000c0003000300
	00c000c000300030000c000c00030003>}
     imagemask } bind
] def
/PaintProc {
	pop
	exec fill
} def
currentdict
end
/P1 exch def

% right30
11 dict begin
/PaintType 1 def
/PatternType 1 def
/TilingType 1 def
/BBox [0 0 1 1] def
/XStep 1 def
/YStep 1 def
/PatWidth 1 def
/PatHeight 1 def
/Multi 2 def
/PaintData [
  { clippath } bind
  { 32 16 true [ 32 0 0 -16 0 16 ]
	{<00030003000c000c0030003000c000c0030003000c000c00
	30003000c000c00000030003000c000c0030003000c000c0
	030003000c000c0030003000c000c000>}
     imagemask } bind
] def
/PaintProc {
	pop
	exec fill
} def
currentdict
end
/P2 exch def

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/reencdict 12 dict def /ReEncode { reencdict begin
/newcodesandnames exch def /newfontname exch def /basefontname exch def
/basefontdict basefontname findfont def /newfont basefontdict maxlength dict def
basefontdict { exch dup /FID ne { dup /Encoding eq
{ exch dup length array copy newfont 3 1 roll put }
{ exch newfont 3 1 roll put } ifelse } { pop pop } ifelse } forall
newfont /FontName newfontname put newcodesandnames aload pop
128 1 255 { newfont /Encoding get exch /.notdef put } for
newcodesandnames length 2 idiv { newfont /Encoding get 3 1 roll put } repeat
newfontname newfont definefont pop end } def
/isovec [
8#055 /minus 8#200 /grave 8#201 /acute 8#202 /circumflex 8#203 /tilde
8#204 /macron 8#205 /breve 8#206 /dotaccent 8#207 /dieresis
8#210 /ring 8#211 /cedilla 8#212 /hungarumlaut 8#213 /ogonek 8#214 /caron
8#220 /dotlessi 8#230 /oe 8#231 /OE
8#240 /space 8#241 /exclamdown 8#242 /cent 8#243 /sterling
8#244 /currency 8#245 /yen 8#246 /brokenbar 8#247 /section 8#250 /dieresis
8#251 /copyright 8#252 /ordfeminine 8#253 /guillemotleft 8#254 /logicalnot
8#255 /hyphen 8#256 /registered 8#257 /macron 8#260 /degree 8#261 /plusminus
8#262 /twosuperior 8#263 /threesuperior 8#264 /acute 8#265 /mu 8#266 /paragraph
8#267 /periodcentered 8#270 /cedilla 8#271 /onesuperior 8#272 /ordmasculine
8#273 /guillemotright 8#274 /onequarter 8#275 /onehalf
8#276 /threequarters 8#277 /questiondown 8#300 /Agrave 8#301 /Aacute
8#302 /Acircumflex 8#303 /Atilde 8#304 /Adieresis 8#305 /Aring
8#306 /AE 8#307 /Ccedilla 8#310 /Egrave 8#311 /Eacute
8#312 /Ecircumflex 8#313 /Edieresis 8#314 /Igrave 8#315 /Iacute
8#316 /Icircumflex 8#317 /Idieresis 8#320 /Eth 8#321 /Ntilde 8#322 /Ograve
8#323 /Oacute 8#324 /Ocircumflex 8#325 /Otilde 8#326 /Odieresis 8#327 /multiply
8#330 /Oslash 8#331 /Ugrave 8#332 /Uacute 8#333 /Ucircumflex
8#334 /Udieresis 8#335 /Yacute 8#336 /Thorn 8#337 /germandbls 8#340 /agrave
8#341 /aacute 8#342 /acircumflex 8#343 /atilde 8#344 /adieresis 8#345 /aring
8#346 /ae 8#347 /ccedilla 8#350 /egrave 8#351 /eacute
8#352 /ecircumflex 8#353 /edieresis 8#354 /igrave 8#355 /iacute
8#356 /icircumflex 8#357 /idieresis 8#360 /eth 8#361 /ntilde 8#362 /ograve
8#363 /oacute 8#364 /ocircumflex 8#365 /otilde 8#366 /odieresis 8#367 /divide
8#370 /oslash 8#371 /ugrave 8#372 /uacute 8#373 /ucircumflex
8#374 /udieresis 8#375 /yacute 8#376 /thorn 8#377 /ydieresis] def
/Times-Roman /Times-Roman-iso isovec ReEncode
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Polyline
15.000 slw
n 5760 1200 m 9360 1200 l 9360 9600 l 5760 9600 l
 cp gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P2 [16 0 0 -8 384.00 80.00] PATmp PATsp ef gr PATusp gs col0 s gr 
% Polyline
n 5760 1920 m 9360 1920 l 9360 2880 l 5760 2880 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 5760 3840 m 9360 3840 l 9360 4680 l 5760 4680 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 5760 4680 m 9360 4680 l 9360 5400 l 5760 5400 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 5760 5400 m 9360 5400 l 9360 6600 l 5760 6600 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 5760 7800 m 9360 7800 l 9360 9120 l 5760 9120 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
30.000 slw
gs  clippath
7530 6945 m 7350 6945 l 7350 7277 l 7440 7007 l 7530 7277 l cp
eoclip
n 7440 7800 m
 7440 6960 l gs col7 1.00 shd ef gr gs col0 s gr gr

% arrowhead
n 7530 7277 m 7440 7007 l 7350 7277 l 7440 7367 l 7530 7277 l 
 cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
7830 7215 m 8010 7215 l 8010 6883 l 7920 7153 l 7830 6883 l cp
eoclip
n 7920 6600 m
 7920 7200 l gs col7 1.00 shd ef gr gs col0 s gr gr

% arrowhead
n 7830 6883 m 7920 7153 l 8010 6883 l 7920 6793 l 7830 6883 l 
 cp gs 0.00 setgray ef gr  col0 s
% Polyline
n 1200 1200 m 3600 1200 l 3600 5760 l 1200 5760 l
 cp gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P1 [16 0 0 -8 80.00 80.00] PATmp PATsp ef gr PATusp gs col0 s gr 
% Polyline
n 1200 4440 m 3600 4440 l 3600 5520 l 1200 5520 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 1200 3000 m 3600 3000 l 3600 4200 l 1200 4200 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 1200 1200 m 3600 1200 l 3600 2520 l 1200 2520 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
gs  clippath
6166 2478 m 6101 2310 l 5691 2471 l 6060 2424 l 5757 2638 l cp
eoclip
n 3360 3480 m
 6120 2400 l gs col7 1.00 shd ef gr gs col0 s gr gr

% arrowhead
n 5757 2638 m 6060 2424 l 5691 2471 l 5757 2638 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
gs  clippath
6156 4283 m 6112 4109 l 5685 4216 l 6057 4216 l 5729 4390 l cp
eoclip
n 3240 4920 m
 6120 4200 l gs col7 1.00 shd ef gr gs col0 s gr gr

% arrowhead
n 5729 4390 m 6057 4216 l 5685 4216 l 5729 4390 l  cp gs 0.00 setgray ef gr  col0 s
% Polyline
7.500 slw
gs  clippath
8415 2295 m 8366 2330 l 8457 2452 l 8410 2338 l 8505 2416 l cp
eoclip
n 10650 5325 m
 8400 2325 l gs col0 s gr gr

% arrowhead
n 8505 2416 m 8410 2338 l 8457 2452 l  col0 s
% Polyline
gs  clippath
8593 8089 m 8635 8131 l 8743 8024 l 8637 8088 l 8700 7981 l cp
eoclip
n 10575 6150 m
 8625 8100 l gs col0 s gr gr

% arrowhead
n 8700 7981 m 8637 8088 l 8743 8024 l  col0 s
% Polyline
15.000 slw
n 10500 3825 m 11925 3825 l 11925 6375 l 10500 6375 l
 cp gs col0 s gr 
% Polyline
7.500 slw
n 10500 4275 m
 11925 4275 l gs col0 s gr 
% Polyline
n 10500 4725 m
 11925 4725 l gs col0 s gr 
% Polyline
n 10500 5550 m
 11925 5550 l gs col0 s gr 
% Polyline
n 10500 5925 m
 11925 5925 l gs col0 s gr 
% Polyline
n 10500 5175 m
 11925 5175 l gs col0 s gr 
% Polyline
gs  clippath
8593 7789 m 8635 7831 l 8743 7724 l 8637 7788 l 8700 7681 l cp
eoclip
n 10650 5775 m
 8625 7800 l gs col0 s gr gr

% arrowhead
n 8700 7681 m 8637 7788 l 8743 7724 l  col0 s
/Times-Roman-iso ff 266.67 scf sf
7320 2520 m
gs 1 -1 sc (text) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 266.67 scf sf
7320 4320 m
gs 1 -1 sc (data) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 266.67 scf sf
7320 5160 m
gs 1 -1 sc (bss) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 266.67 scf sf
7320 6120 m
gs 1 -1 sc (heap) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 266.67 scf sf
7320 8520 m
gs 1 -1 sc (stack) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 233.33 scf sf
5640 1200 m
gs 1 -1 sc (00000000) dup sw pop neg 0 rm  col0 sh gr
/Times-Roman-iso ff 233.33 scf sf
5640 9600 m
gs 1 -1 sc (FFFFFFFF) dup sw pop neg 0 rm  col0 sh gr
/Times-Roman-iso ff 300.00 scf sf
7320 840 m
gs 1 -1 sc (Run-Time Memory Image) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 266.67 scf sf
2280 3600 m
gs 1 -1 sc (.text) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 266.67 scf sf
2280 5040 m
gs 1 -1 sc (.data) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 266.67 scf sf
1440 2370 m
gs 1 -1 sc (bss_sz) col0 sh gr
/Times-Roman-iso ff 266.67 scf sf
2280 1560 m
gs 1 -1 sc (header:) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 300.00 scf sf
2640 840 m
gs 1 -1 sc (a.out file) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10950 4125 m
gs 1 -1 sc (%eax) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10950 4575 m
gs 1 -1 sc (%ebx) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10875 6225 m
gs 1 -1 sc (%ebp) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10950 4950 m
gs 1 -1 sc (. . .) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10875 5400 m
gs 1 -1 sc (%eip) col0 sh gr
/Times-Roman-iso ff 200.00 scf sf
10875 5850 m
gs 1 -1 sc (%esp) col0 sh gr
/Times-Roman-iso ff 300.00 scf sf
11175 3600 m
gs 1 -1 sc (Processor) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 300.00 scf sf
11175 3225 m
gs 1 -1 sc (Virtual) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman-iso ff 266.67 scf sf
1275 1800 m
gs 1 -1 sc (load_addr,exec_addr,) col0 sh gr
/Times-Roman-iso ff 266.67 scf sf
1350 2100 m
gs 1 -1 sc (text_sz,data_sz,) col0 sh gr
% here ends figure;
$F2psEnd
rs
end
showpage
%%EndDocument
end PEND 0 Cg EP
%%Page: 17 17
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 17)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF(The)33.336 120 Q/F2 13/Times-Bold@0 SF
(bss)3.71 E F1 .461(section contains all un-initialized global v)3.711 F
3.711(ariables. The)-.325 F 3.711(Cl)3.711 G .461
(anguage speci\214cation)-3.711 F 2.333(states that all such v)33.336
135 R 2.333(ariables, lacking an e)-.325 F 2.333(xplicit initializer)
-.195 F 5.583(,m)-.52 G 2.333(ust be initialized by the)-5.583 F
(operating system or C run-time en)33.336 150 Q(vironment to 0.)-.52 E
/F3 10/Courier@0 SF(int j=2;)33.336 162 Q(int k;)33.336 174 Q(main\(\))
33.336 186 Q({)33.336 198 Q(int l;)39.336 210 Q(/*...*/)90.936 222 Q(})
33.336 234 Q F1 .874(In the e)33.336 249 R .874(xample abo)-.195 F -.195
(ve)-.195 G(,).195 E/F4 13/Courier@0 SF(j)4.124 E F1 .874(has an e)4.124
F .874(xplicit initializer)-.195 F 4.124(,a)-.52 G .874
(nd will be in the data se)-4.124 F 4.125(gment. The)-.195 F -.325(va)
33.336 264 S 1.093(lue of the initializer will be found in the .data se\
ction of the a.out.).325 F F4(k)7.592 E F1 1.092(is uninitialized.)4.342
F .528(Therefore it will reside in the bss se)33.336 279 R .528
(gment of memory and will ha)-.195 F .919 -.195(ve a)-.26 H 3.779(ni)
.195 G .529(nitial v)-3.779 F .529(alue of 0.)-.325 F 3.67(The ISO C st\
andard says that "If an object that has static storage duration is not)
33.336 294 R 2.026(initialized e)33.336 309 R(xplicitly)-.195 E 5.277
(,i)-.845 G 5.277(ti)-5.277 G 5.277(si)-5.277 G 2.027
(nitialized impliclitly as if e)-5.277 F -.195(ve)-.325 G 2.027
(ry member that has arithmetic).195 F 1.954(type were assigned 0 and e)
33.336 324 R -.195(ve)-.325 G 1.954
(ry member that has pointer type were assigned a NULL).195 F 1.135
(pointer constant".)33.336 339 R 1.136
(This is satis\214ed by \214lling e)7.635 F -.195(ve)-.325 G 1.136
(ry byte of the bss re).195 F 1.136(gion with 0, and is)-.195 F 2.244
(performed by the operating system.)33.336 354 R 2.244(The v)8.744 F
(ariable)-.325 E F4(l)5.494 E F1 2.243(has automatic storage scope, and)
5.493 F .008(therefore will be found on the stack \(or)33.336 369 R
3.258(,i)-.52 G 3.258(ft)-3.258 G .009(he compiler is set for hea)-3.258
F .009(vy optimization and a)-.26 F 3.209(pointer to)33.336 384 R F4(l)
6.459 E F1 3.209(is ne)6.459 F -.195(ve)-.325 G 6.459(rt).195 G(ak)
-6.459 E 3.208(en, it may li)-.13 F 3.598 -.195(ve i)-.325 H 6.458(nar)
.195 G -.195(eg)-6.458 G 6.458(ister\). Automatic).195 F -.325(va)6.458
G 3.208(riables are not).325 F(0-initialized.)33.336 399 Q F2
(Behind cc-losed doors)206.665 414 Q F1(The)33.336 444 Q F4(cc)3.876 E
F1 .626(command is often and erroneously called "the compiler)3.876 F
3.877(." In)-.715 F -.13(fa)3.877 G .627(ct, it is a wrapper).13 F .089
(program which in)33.336 459 R -.26(vo)-.52 G -.13(ke).26 G 3.339(sas)
.13 G .089(eries of tools.)-3.339 F .088
(Each tool transforms a speci\214c kind of input \214le)6.588 F .108
(to a speci\214c kind of output \214le.)33.336 474 R .108
(It is possible to instruct)6.608 F F4(cc)3.358 E F1 .109
(to interrupt the process at an)3.359 F(y)-.195 E(stage, and to access \
and manipulate these intermediate \214les as needed.)33.336 489 Q 0 Cg
EP
%%Page: 18 18
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 18)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E 0 0 468 713 -382.014 582 33.336 502.014 PBEGIN
%%BeginDocument: compile.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: compile.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Wed Sep 20 21:36:37 2006
%%For: hak@lex ()
%%BoundingBox: 0 0 713 582
%%Magnification: 1.0000
%%EndComments
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 582 moveto 0 0 lineto 713 0 lineto 713 582 lineto closepath clip newpath
-53.3 567.7 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
 /DrawEllipse {
	/endangle exch def
	/startangle exch def
	/yrad exch def
	/xrad exch def
	/y exch def
	/x exch def
	/savematrix mtrx currentmatrix def
	x y tr xrad yrad sc 0 0 1 startangle endangle arc
	closepath
	savematrix setmatrix
	} def

/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Ellipse
7.500 slw
n 8925 2475 1135 1135 0 360 DrawEllipse gs col0 s gr

% Polyline
gs  clippath
3315 1755 m 3315 1695 l 3163 1695 l 3283 1725 l 3163 1755 l cp
eoclip
n 2325 1725 m
 3300 1725 l gs col0 s gr gr

% arrowhead
n 3163 1755 m 3283 1725 l 3163 1695 l  col0 s
% Polyline
gs  clippath
3315 2130 m 3315 2070 l 3163 2070 l 3283 2100 l 3163 2130 l cp
eoclip
n 2325 2100 m
 3300 2100 l gs col0 s gr gr

% arrowhead
n 3163 2130 m 3283 2100 l 3163 2070 l  col0 s
% Polyline
gs  clippath
3315 2580 m 3315 2520 l 3163 2520 l 3283 2550 l 3163 2580 l cp
eoclip
n 2325 2550 m
 3300 2550 l gs col0 s gr gr

% arrowhead
n 3163 2580 m 3283 2550 l 3163 2520 l  col0 s
% Polyline
gs  clippath
5265 2130 m 5265 2070 l 5113 2070 l 5233 2100 l 5113 2130 l cp
eoclip
n 4275 2100 m
 5250 2100 l gs col0 s gr gr

% arrowhead
n 5113 2130 m 5233 2100 l 5113 2070 l  col0 s
% Polyline
gs  clippath
5265 1755 m 5265 1695 l 5113 1695 l 5233 1725 l 5113 1755 l cp
eoclip
n 4275 1725 m
 5250 1725 l gs col0 s gr gr

% arrowhead
n 5113 1755 m 5233 1725 l 5113 1695 l  col0 s
% Polyline
gs  clippath
5265 2580 m 5265 2520 l 5113 2520 l 5233 2550 l 5113 2580 l cp
eoclip
n 4275 2550 m
 5250 2550 l gs col0 s gr gr

% arrowhead
n 5113 2580 m 5233 2550 l 5113 2520 l  col0 s
% Polyline
n 2580 3825 m 2475 3825 2475 5070 105 arcto 4 {pop} repeat
  2475 5175 3720 5175 105 arcto 4 {pop} repeat
  3825 5175 3825 3930 105 arcto 4 {pop} repeat
  3825 3825 2580 3825 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
 [60] 0 sd
gs  clippath
3266 3754 m 3323 3773 l 3371 3629 l 3305 3734 l 3314 3610 l cp
eoclip
n 3675 2625 m
 3300 3750 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 3314 3610 m 3305 3734 l 3371 3629 l  col0 s
% Polyline
n 5205 3900 m 5100 3900 5100 5070 105 arcto 4 {pop} repeat
  5100 5175 7470 5175 105 arcto 4 {pop} repeat
  7575 5175 7575 4005 105 arcto 4 {pop} repeat
  7575 3900 5205 3900 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
n 1005 3750 m 900 3750 900 5145 105 arcto 4 {pop} repeat
  900 5250 1995 5250 105 arcto 4 {pop} repeat
  2100 5250 2100 3855 105 arcto 4 {pop} repeat
  2100 3750 1005 3750 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
n 5430 5175 m 5325 5175 5325 5895 105 arcto 4 {pop} repeat
  5325 6000 7245 6000 105 arcto 4 {pop} repeat
  7350 6000 7350 5280 105 arcto 4 {pop} repeat
  7350 5175 5430 5175 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
 [60] 0 sd
gs  clippath
5973 3845 m 6032 3834 l 6004 3685 l 5997 3809 l 5945 3696 l cp
eoclip
n 5775 2625 m
 6000 3825 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 5945 3696 m 5997 3809 l 6004 3685 l  col0 s
% Polyline
 [60] 0 sd
gs  clippath
1617 3683 m 1676 3695 l 1707 3547 l 1653 3659 l 1648 3535 l cp
eoclip
n 1875 2625 m
 1650 3675 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 1648 3535 m 1653 3659 l 1707 3547 l  col0 s
% Polyline
gs  clippath
7965 1830 m 7965 1770 l 7813 1770 l 7933 1800 l 7813 1830 l cp
eoclip
n 6075 1800 m
 7950 1800 l gs col0 s gr gr

% arrowhead
n 7813 1830 m 7933 1800 l 7813 1770 l  col0 s
% Polyline
gs  clippath
7740 2205 m 7740 2145 l 7588 2145 l 7708 2175 l 7588 2205 l cp
eoclip
n 6150 2175 m
 7725 2175 l gs col0 s gr gr

% arrowhead
n 7588 2205 m 7708 2175 l 7588 2145 l  col0 s
% Polyline
gs  clippath
7665 2505 m 7665 2445 l 7513 2445 l 7633 2475 l 7513 2505 l cp
eoclip
n 6150 2475 m
 7650 2475 l gs col0 s gr gr

% arrowhead
n 7513 2505 m 7633 2475 l 7513 2445 l  col0 s
% Polyline
gs  clippath
10665 2505 m 10665 2445 l 10513 2445 l 10633 2475 l 10513 2505 l cp
eoclip
n 10050 2475 m
 10650 2475 l gs col0 s gr gr

% arrowhead
n 10513 2505 m 10633 2475 l 10513 2445 l  col0 s
% Polyline
n 10725 1725 m 12750 1725 l 12750 9450 l 10725 9450 l
 cp gs col0 s gr 
% Polyline
n 10725 2100 m
 12750 2100 l gs col0 s gr 
% Polyline
n 10725 2325 m
 12750 2325 l gs col0 s gr 
% Polyline
n 10725 2550 m
 12750 2550 l gs col0 s gr 
% Polyline
n 10725 2775 m
 12750 2775 l gs col0 s gr 
% Polyline
n 10725 3000 m
 12750 3000 l gs col0 s gr 
% Polyline
n 10725 3225 m
 12750 3225 l gs col0 s gr 
% Polyline
n 10725 3975 m
 12750 3975 l gs col0 s gr 
% Polyline
n 10725 6975 m
 12750 6975 l gs col0 s gr 
% Polyline
n 5100 -225 m 7950 -225 l 7950 900 l 5100 900 l
 cp gs col0 s gr 
% Polyline
n 1650 -75 m 4500 -75 l 4500 1050 l 1650 1050 l
 cp gs col0 s gr 
% Polyline
gs  clippath
8245 1458 m 8279 1409 l 8154 1322 l 8236 1416 l 8120 1371 l cp
eoclip
n 7500 900 m
 8250 1425 l gs col0 s gr gr

% arrowhead
n 8120 1371 m 8236 1416 l 8154 1322 l  col0 s
% Polyline
n 6405 7050 m 6300 7050 6300 8220 105 arcto 4 {pop} repeat
  6300 8325 8670 8325 105 arcto 4 {pop} repeat
  8775 8325 8775 7155 105 arcto 4 {pop} repeat
  8775 7050 6405 7050 105 arcto 4 {pop} repeat
 cp gs col0 s gr 
% Polyline
 [60] 0 sd
gs  clippath
8894 7036 m 8932 7082 l 9049 6985 l 8938 7039 l 9011 6939 l cp
eoclip
n 11100 5250 m
 8925 7050 l gs col0 s gr gr
 [] 0 sd
% arrowhead
n 9011 6939 m 8938 7039 l 9049 6985 l  col0 s
% Polyline
gs  clippath
8175 1608 m 8201 1554 l 8066 1487 l 8160 1568 l 8039 1541 l cp
eoclip
n 4425 975 m 7425 1200 l
 8175 1575 l gs col0 s gr gr

% arrowhead
n 8039 1541 m 8160 1568 l 8066 1487 l  col0 s
% Polyline
n 4500 1200 m 4950 1200 l 4950 3300 l 4500 3300 l
 cp gs col0 s gr 
% Polyline
n 2550 1200 m 3000 1200 l 3000 3150 l 2550 3150 l
 cp gs col0 s gr 
% Polyline
n 10725 6525 m
 12750 6525 l gs col0 s gr 
/Times-Roman ff 180.00 scf sf
1680 1746 m
gs 1 -1 sc (main.c) col0 sh gr
/Times-Roman ff 180.00 scf sf
1665 2166 m
gs 1 -1 sc (func1.c) col0 sh gr
/Times-Roman ff 180.00 scf sf
1650 2601 m
gs 1 -1 sc (func2.c) col0 sh gr
/Times-Roman ff 180.00 scf sf
3450 1800 m
gs 1 -1 sc (main.s) col0 sh gr
/Times-Roman ff 180.00 scf sf
3450 2175 m
gs 1 -1 sc (func1.s) col0 sh gr
/Times-Roman ff 180.00 scf sf
3450 2550 m
gs 1 -1 sc (func2.s) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 4125 m
gs 1 -1 sc (....) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 4350 m
gs 1 -1 sc (.....) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 4575 m
gs 1 -1 sc (INCL  i) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 4800 m
gs 1 -1 sc (.....) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 5025 m
gs 1 -1 sc (.....) col0 sh gr
/Times-Roman ff 180.00 scf sf
5475 1800 m
gs 1 -1 sc (main.o) col0 sh gr
/Times-Roman ff 180.00 scf sf
5475 2175 m
gs 1 -1 sc (func1.o) col0 sh gr
/Times-Roman ff 180.00 scf sf
5475 2550 m
gs 1 -1 sc (func2.o) col0 sh gr
/Times-Roman ff 180.00 scf sf
5325 4125 m
gs 1 -1 sc (0020      ....) col0 sh gr
/Times-Roman ff 180.00 scf sf
5325 4350 m
gs 1 -1 sc (0024      ....) col0 sh gr
/Times-Roman ff 180.00 scf sf
5325 4575 m
gs 1 -1 sc (0028     FF05 00000000) col0 sh gr
/Times-Roman ff 180.00 scf sf
975 3975 m
gs 1 -1 sc (extern int i;) col0 sh gr
/Times-Roman ff 180.00 scf sf
975 4425 m
gs 1 -1 sc (f1\(\)) col0 sh gr
/Times-Roman ff 180.00 scf sf
975 4650 m
gs 1 -1 sc ({) col0 sh gr
/Times-Roman ff 180.00 scf sf
975 4875 m
gs 1 -1 sc (   ...) col0 sh gr
/Times-Roman ff 180.00 scf sf
975 5100 m
gs 1 -1 sc (   i++;) col0 sh gr
/Times-Roman ff 180.00 scf sf
1500 5475 m
gs 1 -1 sc (C) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
5550 5400 m
gs 1 -1 sc (RELOCATIONS:) col0 sh gr
/Times-Roman ff 180.00 scf sf
5550 5625 m
gs 1 -1 sc (i    @002A  4 bytes) col0 sh gr
/Times-Roman ff 180.00 scf sf
8475 2325 m
gs 1 -1 sc (LINKER) col0 sh gr
/Times-Roman ff 180.00 scf sf
11625 2250 m
gs 1 -1 sc (load_addr) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
11625 2475 m
gs 1 -1 sc (exec_addr) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
11625 2700 m
gs 1 -1 sc (text size) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
11625 2925 m
gs 1 -1 sc (data size) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
11625 3150 m
gs 1 -1 sc (bss size) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
11625 8100 m
gs 1 -1 sc (.data initial values) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
11775 5475 m
gs 1 -1 sc (.text image) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
11700 1275 m
gs 1 -1 sc (a.out ) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
11700 1500 m
gs 1 -1 sc (absolute executable file) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
5625 375 m
gs 1 -1 sc (standard C library libc) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 675 m
gs 1 -1 sc (math library libm) col0 sh gr
/Times-Roman ff 180.00 scf sf
6450 7275 m
gs 1 -1 sc (08048112    ....) col0 sh gr
/Times-Roman ff 180.00 scf sf
6450 7500 m
gs 1 -1 sc (08048116   ....) col0 sh gr
/Times-Roman ff 180.00 scf sf
6450 7725 m
gs 1 -1 sc (0804811A  FF05 0804D004) col0 sh gr
/Times-Roman ff 180.00 scf sf
3150 5475 m
gs 1 -1 sc (Assembly language) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
4950 6150 m
gs 1 -1 sc (Object file) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 180.00 scf sf
4950 7275 m
gs 1 -1 sc (Absolute) col0 sh gr
/Times-Roman ff 180.00 scf sf
4950 7500 m
gs 1 -1 sc (Executable) col0 sh gr
/Times-Roman ff 180.00 scf sf
4950 7725 m
gs 1 -1 sc (Machine Code) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 1425 m
gs 1 -1 sc (C) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 1650 m
gs 1 -1 sc (O) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 1875 m
gs 1 -1 sc (M) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 2100 m
gs 1 -1 sc (P) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 2325 m
gs 1 -1 sc (I) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 2550 m
gs 1 -1 sc (L) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 2775 m
gs 1 -1 sc (E) col0 sh gr
/Times-Roman ff 180.00 scf sf
2775 3000 m
gs 1 -1 sc (R) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 1425 m
gs 1 -1 sc (A) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 1650 m
gs 1 -1 sc (S) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 1875 m
gs 1 -1 sc (S) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 2100 m
gs 1 -1 sc (E) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 2325 m
gs 1 -1 sc (M) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 2550 m
gs 1 -1 sc (B) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 2775 m
gs 1 -1 sc (L) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 3000 m
gs 1 -1 sc (E) col0 sh gr
/Times-Roman ff 180.00 scf sf
4725 3225 m
gs 1 -1 sc (R) col0 sh gr
% here ends figure;
$F2psEnd
rs
showpage
%%EndDocument
end PEND/F1 13/Times-Roman@0 SF 3.192(The compiler proper tak)33.336
529.014 R 3.191(es C code, passing it through the macro pre-processor)
-.13 F 6.441(,a)-.52 G(nd)-6.441 E .593
(compiles it into symbolic assembly language. By using the)33.336
544.014 R/F2 13/Courier@0 SF(-S)3.843 E F1 .593(option to)3.843 F F2(cc)
3.843 E F1 3.843(,w)C 3.843(ec)-3.843 G .593(an halt)-3.843 F 3.283
(the process before the assembler and link)33.336 559.014 R 3.282
(er are in)-.13 F -.26(vo)-.52 G -.13(ke).26 G 3.282(d, and vie).13 F
6.532(wt)-.325 G 3.282(he intermediate)-6.532 F
(assembly language \214le, which will ha)33.336 574.014 Q .39 -.195
(ve a)-.26 H F2(.s)3.445 E F1 -.195(ex)3.25 G(tension.).195 E 3.292
(The assembler tak)33.336 595.014 R 3.292
(es symbolic assembly language \214les \()-.13 F F2(.s)A F1 6.543(\)a)C
3.293(nd con)-6.543 F -.195(ve)-.52 G 3.293(rts them into).195 F 2.755
(relocatable object \214les \(which ha)33.336 610.014 R 3.144 -.195
(ve a)-.26 H F2(.o)6.199 E F1 -.195(ex)6.004 G 6.004(tension\). An).195
F 2.754(object \214le is similar to an)6.004 F -.195(exe)33.336 625.014
S .257(cutable \("a.out"\) \214le in that it contains machine code, ho)
.195 F(we)-.325 E -.195(ve)-.325 G 3.507(rs).195 G .257
(ymbols which can not)-3.507 F 1.245(be resolv)33.336 640.014 R 1.245
(ed \(as detailed belo)-.195 F 1.245(w\) are left dangling.)-.325 F
1.244(Therefore, it is not ready to run until)7.745 F 2.918(these dangl\
ing links are settled, possibly by linking with additional object \214l\
es.)33.336 655.014 R(By)9.419 E(gi)33.336 670.014 Q(ving)-.325 E F2(cc)
5.672 E F1(the)5.672 E F2(-c)5.672 E F1 2.422(option, the link)5.672 F
2.422(er will not be run and the)-.13 F F2(.o)5.671 E F1 2.421
(\214les will be left for)5.671 F 1.719(subsequent e)33.336 685.014 R
1.719(xamination or linking.)-.195 F 1.719(It is also possible to in)
8.219 F -.26(vo)-.52 G 1.98 -.13(ke t).26 H 1.72(he assembler directly)
.13 F(with the)33.336 700.014 Q F2(as)3.25 E F1(command.)3.25 E .27
(Although some compilers do not separate the assembler)33.336 730.014 R
3.52(,i)-.52 G 3.519(ti)-3.52 G 3.519(su)-3.519 G .269(seful to di)
-3.519 F -.26(vo)-.325 G .269(rce it from the).26 F .183
(compiler and mak)33.336 745.014 R 3.433(ei)-.13 G -6.682 3.433(ta s)
-3.433 H .184(eparate utility)-3.433 F 6.684(.I)-.845 G 3.434(nt)-6.684
G .184(his w)-3.434 F(ay)-.13 E 3.434(,ac)-.845 G .184
(ommon assembler program can be)-3.434 F 0 Cg EP
%%Page: 19 19
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 19)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF 3.105(written and emplo)33.336 120 R
3.105(yed by compilers for dif)-.13 F 3.105(ferent languages.)-.325 F
-.195(Fo)9.604 G 6.354(re).195 G 3.104(xample, the GNU)-6.549 F .967
(compilers for C, C++ and FOR)33.336 135 R .967(TRAN are all dif)-.78 F
.967(ferent programs, yet the)-.325 F 4.217(ya)-.195 G .968
(ll call on the)-4.217 F/F2 13/Courier@0 SF(as)33.336 150 Q F1 .348
(program for assembly)3.598 F 6.848(.I)-.845 G 3.598(ti)-6.848 G 3.598
(sa)-3.598 G .348(lso useful to be able to introduce)-3.598 F F2(.s)
3.598 E F1 .348(\214les that ha)3.598 F .737 -.195(ve b)-.26 H(een).195
E(written by hand for certain performance optimizations or platform-spe\
ci\214c features.)33.336 165 Q .18(The link)33.336 195 R .18(er tak)-.13
F .18(es multiple object \()-.13 F F2(.o)A F1 3.43<298c>C .18
(les \(or libraries of object \214les, with)-3.43 F F2(.a)3.431 E F1
-.195(ex)3.431 G(tensions,).195 E .882(as discussed belo)33.336 210 R
.882(w\), resolv)-.325 F .882
(es symbol references, and creates an absolute e)-.195 F -.195(xe)-.195
G .881(cutable \214le.).195 F 3.058(If unresolv)33.336 225 R 3.058
(ed symbols remain at this point, the link)-.195 F 3.059
(er will not be able to create an)-.13 F(absolute e)33.336 240 Q -.195
(xe)-.195 G(cutable and an error will result.).195 E(Lik)33.336 270 Q
4.023(et)-.13 G .773(he assembler)-4.023 F 4.023(,t)-.52 G .773(he link)
-4.023 F .773(er is a separate tool which can be called directly as)-.13
F F2(ld)4.022 E F1 7.272(.T)C(he)-7.272 E .257
(reason for this rather un-mnemonic tw)33.336 285 R .257
(o-letter name is that historically)-.13 F 3.507(,t)-.845 G .257
(he link)-3.507 F .257(er has also)-.13 F .283
(been called the "loader", because it w)33.336 300 R .282
(as responsible for creating the "load deck" of punch)-.13 F .153
(cards that could then be directly run by the computer)33.336 315 R
6.653(.B)-.715 G(esides,)-6.653 E F2(ln)3.403 E F1 -.13(wa)3.403 G 3.403
(sa).13 G .153(lready tak)-3.403 F .153(en as a)-.13 F(command name.)
33.336 330 Q .545(When compiling C programs, it is best to allo)33.336
360 R 3.795(wt)-.325 G(he)-3.795 E F2(cc)3.795 E F1 .545(wrapper to in)
3.795 F -.26(vo)-.52 G -.13(ke).26 G F2(ld)3.925 E F1 .545(rather than)
3.795 F 2.714(trying to do it manually as there are a number of comple)
33.336 375 R 5.964(xp)-.195 G 2.714(latform-speci\214c options)-5.964 F
(needed to actually create a run-able program.)33.336 390 Q(The)33.336
420 Q F2(.o)4.174 E F1 .924(\214les need not ha)4.174 F 1.314 -.195
(ve c)-.26 H .924(ome from C source code.).195 F .924
(It is possible to distrib)7.424 F .923(ute binary)-.26 F .243
(object \214les or libraries which can be link)33.336 435 R .243(ed ag)
-.13 F .243(ainst user)-.065 F .243(-supplied code.)-.26 F .244
(It is also possible)6.744 F 1.62(to create cross-language e)33.336 450
R -.195(xe)-.195 G 1.62
(cutables, where part of the code is written directly in lo).195 F(w-)
-.325 E(le)33.336 465 Q -.195(ve)-.325 G 4.937(la).195 G 1.688
(ssembly language, or in another high-le)-4.937 F -.195(ve)-.325 G 4.938
(ll).195 G 1.688(anguage \(with all due caution about)-4.938 F(mix)
33.336 480 Q(ed run-time en)-.195 E(vironment e)-.52 E(xpectations\).)
-.195 E/F3 13/Times-Bold@0 SF(Separate Compilation)206.489 510 Q F1
-1.443(Ve)33.336 540 S .935
(ry simple C programs can be contained in a single)1.443 F F2(.c)4.184 E
F1 4.184(\214le. As)4.184 F .934(the size of the project)4.184 F 3.566
(increases, it becomes e)33.336 555 R 3.567(xtremely inef)-.195 F 3.567
(\214cient to do this.)-.325 F 3.567(The tasks of pre-processing,)10.067
F 1.13(compiling and assembling are CPU-intensi)33.336 570 R -.195(ve)
-.325 G 7.63(.W).195 G 1.13(ith a single \214le, an)-8.15 F 4.38(yc)
-.195 G 1.13(hange, no matter)-4.38 F(ho)33.336 585 Q 3.25(ws)-.325 G
(mall, requires that the entire \214le be recompiled.)-3.25 E 3.007
(The program can be split up into a number of smaller)33.336 615 R F2
(.c)6.258 E F1 6.258(\214les. There)6.258 F 3.008(are v)6.258 F(arying)
-.325 E .72(opinions on ho)33.336 630 R 3.97<778c>-.325 G .72
(nely to di)-3.97 F .72
(vide the program and on what basis to select which parts go)-.325 F
(into which \214le.)33.336 645 Q(Some guidelines:)6.5 E 3.919(1\) Group\
s of functions which form a coherent subsystem are good candidates for)
33.336 675 R .264(including in their o)33.336 690 R .264(wn \214le.)
-.325 F .264(In C++ terms, this w)6.764 F .264(ould be a class.)-.13 F
.264(Some subsystems are so)6.764 F(comple)33.336 705 Q 3.25(xt)-.195 G
(hat the)-3.25 E 3.25(yn)-.195 G(eed to be further subdi)-3.25 E(vided.)
-.325 E .75(2\) Whene)33.336 735 R -.195(ve)-.325 G 4(ras).195 G(ingle)
-4 E F2(.c)4 E F1 .751
(\214le is on the order of 1000 lines of code, it is probably getting)4
F 0 Cg EP
%%Page: 20 20
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 20)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF 2.774(too big.)33.336 120 R 2.774
(On the other hand, ha)9.274 F 2.773
(ving lots of \214les each containing one or tw)-.26 F 6.023(o1)-.13 G
(0-line)-6.023 E(functions is also w)33.336 135 Q(asteful.)-.13 E 1.134
(3\) Code which is being incorporated from another source, or which is \
being w)33.336 165 R(ork)-.13 E 1.134(ed on)-.13 F .461(by a dif)33.336
180 R .461(ferent programmer)-.325 F 3.71(,s)-.52 G .46(hould ha)-3.71 F
.85 -.195(ve i)-.26 H .46(ts o).195 F .46
(wn \214le, or perhaps be structured as a library)-.325 F(,)-.845 E
(to mak)33.336 195 Q 3.25(ei)-.13 G 3.25(te)-3.25 G
(asier to deal with changes.)-3.25 E .249(As an e)33.336 225 R .249
(xample, let')-.195 F 3.499(ss)-.715 G .25(ay our program has been di)
-3.499 F .25(vided into \214les)-.325 F/F2 13/Courier@0 SF(f1.c)3.5 E F1
(,)A F2(f2.c)3.5 E F1(and)3.5 E F2(f3.c)3.5 E F1(.)A 2.265 -1.04(To c)
33.336 240 T .185(ompile this, we could run:)1.04 F F2 .185
(cc f1.c f2.c f3.c)3.435 F F1 3.435(,w)C .185(hich w)-3.435 F .184
(ould perform the entire)-.13 F .744(pre-processing, compiling and asse\
mbling process on each of the three \214les, then in)33.336 255 R -.26
(vo)-.52 G -.13(ke).26 G 2.133(the link)33.336 270 R 2.133
(er to create the)-.13 F F2(a.out)5.383 E F1 8.633(.H)C -.325(ow)-8.633
G -2.795 -.325(ev e).325 H 3.173 -.52(r, s).325 H 2.133(uppose we mak)
.52 F 5.383(eac)-.13 G 2.133(hange to)-5.383 F F2(f1.c)5.383 E F1(only)
5.382 E(.)-.845 E(Wh)33.336 285 Q 3.25(yd)-.065 G 3.25(oa)-3.25 G
(ll that w)-3.25 E(ork ag)-.13 E(ain for the other tw)-.065 E 3.25<6f8c>
-.13 G(les, which ha)-3.25 E .39 -.195(ve n)-.26 H(ot changed?).195 E
.56(Instead, we can \214rst run:)33.336 315 R F2 .56
(cc -c f1.c f2.c f3.c)3.81 F F1 3.81(,w)C .56
(hich will pre-process, compile)-3.81 F 2.729
(and assemble each of the \214les, creating)33.336 330 R F2(f1.o)5.979 E
F1(,)A F2(f2.o)5.979 E F1(and)5.979 E F2(f3.o)5.979 E F1 9.229(.T)C
2.729(hen we run:)-9.229 F F2(cc)5.979 E .051(f1.o f2.o f3.o)33.336 345
R F1 6.551(.T)C(he)-6.551 E F2(cc)3.301 E F1 .051
(wrapper sees that we are gi)3.301 F .051(ving it)-.325 F F2(.o)3.301 E
F1 .052(\214les and passes them)3.301 F .934(directly to the link)33.336
360 R(er)-.13 E 7.434(.N)-.715 G -.325(ow)-7.434 G 4.184(,i)-.52 G 4.184
(fw)-4.184 G 4.184(ec)-4.184 G(hange)-4.184 E F2(f1.c)4.184 E F1 4.184
(,w)C 4.183(er)-4.184 G(un)-4.183 E F2 .933(cc -c f1.c)4.183 F F1 .933
(to re-compile it)4.183 F .724(alone, and then run)33.336 375 R F2 .724
(cc f1.o f2.o f3.o)3.974 F F1(ag)3.975 E .725(ain to link the program.)
-.065 F .725(This process is)7.225 F .562(automated by the tool)33.336
390 R F2(make)3.812 E F1 3.812(,w)C .562(hich uses dependenc)-3.812 F
3.812(yr)-.195 G .562(ules and \214le modi\214cation times to)-3.812 F
(determine which compilation phases to in)33.336 405 Q -.26(vo)-.52 G
.26 -.13(ke a).26 H(nd on which \214les.).13 E/F3 13/Times-Bold@0 SF
(The link)194.458 450 Q(er vs the compiler)-.13 E F1 2.634
(The job of the link)33.336 480 R 2.635(er is to tak)-.13 F 5.885(eo)
-.13 G 2.635(ne or more relocatable object \214les, resolv)-5.885 F
5.885(es)-.195 G(ymbol)-5.885 E 1.518
(references, and create an absolute e)33.336 495 R -.195(xe)-.195 G
1.518(cutable \214le.).195 F 1.518(The link)8.018 F 1.518
(er does not kno)-.13 F 4.768(wa)-.325 G 1.518(bout C')-4.768 F(s)-.715
E 1.765(type algebra, nor should it, since the link)33.336 510 R 1.765
(er is independent of an)-.13 F 5.015(yp)-.195 G 1.765
(articular high-le)-5.015 F -.195(ve)-.325 G(l).195 E(language.)33.336
525 Q 2.002(Unfortunately for the student, the C language also deals in\
 symbols, e.g. v)33.336 555 R 2.002(ariable and)-.325 F 4.031
(function names, and this issue is sometimes dif)33.336 570 R 4.031
(\214cult to separate from the symbol)-.325 F 2.004
(processing which happens at link time.)33.336 585 R 2.004
(Here are some things that ne)8.504 F -.195(ve)-.325 G 5.254(ra).195 G
2.003(ppear in an)-5.254 F(object \214le and do not concern the link)
33.336 600 Q(er:)-.13 E -6.636 3.387(\203C l)33.336 615 T .138(anguage \
type speci\214ers \(such as "p is a pointer to a pointer to a function \
returning int)-3.387 F(and taking tw)33.336 630 Q 3.25(oi)-.13 G(nt ar)
-3.25 E(guments"\))-.234 E 3.25(\203Cl)33.336 645 S
(anguage structure, union and enum de\214nitions and typedef names.)
-3.25 E<83>33.336 660 Q F2(goto)3.25 E F1(labels)3.25 E 4.736<8349>
33.336 675 S 1.486(nternal labels that may be generated by the compiler\
 for loops, switch statements, if)-4.736 F(statements, etc.)33.336 690 Q
4.222<8361>33.336 705 S .972(utomatic \(local\) v)-4.222 F 4.222
(ariables. An)-.325 F .972(important e)4.222 F .972
(xception is a local v)-.195 F .972(ariable that is declared)-.325 F
.516(with the)33.336 720 R F2(static)3.766 E F1 .516(storage class.)
3.766 F .516(This v)7.016 F .515
(ariable has local scope, i.e. its name is not visible)-.325 F 3.667
(outside of the curly-braced block in which it is declared, b)33.336 735
R 3.667(ut it li)-.26 F -.195(ve)-.325 G 6.917(si).195 G 6.917(nt)-6.917
G 3.667(he same)-6.917 F 0 Cg EP
%%Page: 21 21
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 21)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF(neighborhood as global v)33.336 120 Q
(ariables.)-.325 E 0 0 148 148 -310 310 193.336 466 PBEGIN
%%BeginDocument: obj.eps
%!PS-Adobe-2.0 EPSF-2.0
%%Title: obj.fig
%%Creator: fig2dev Version 3.2 Patchlevel 4
%%CreationDate: Wed Sep 20 02:01:42 2006
%%For: hak@lex ()
%%BoundingBox: 0 0 148 310
%%Magnification: 1.0000
%%EndComments
/MyAppDict 100 dict dup begin def
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
newpath 0 310 moveto 0 0 lineto 148 0 lineto 148 310 lineto closepath clip newpath
-70.0 347.6 translate
1 -1 scale

% This junk string is used by the show operators
/PATsstr 1 string def
/PATawidthshow { 	% cx cy cchar rx ry string
  % Loop over each character in the string
  {  % cx cy cchar rx ry char
    % Show the character
    dup				% cx cy cchar rx ry char char
    PATsstr dup 0 4 -1 roll put	% cx cy cchar rx ry char (char)
    false charpath		% cx cy cchar rx ry char
    /clip load PATdraw
    % Move past the character (charpath modified the
    % current point)
    currentpoint			% cx cy cchar rx ry char x y
    newpath
    moveto			% cx cy cchar rx ry char
    % Reposition by cx,cy if the character in the string is cchar
    3 index eq {			% cx cy cchar rx ry
      4 index 4 index rmoveto
    } if
    % Reposition all characters by rx ry
    2 copy rmoveto		% cx cy cchar rx ry
  } forall
  pop pop pop pop pop		% -
  currentpoint
  newpath
  moveto
} bind def
/PATcg {
  7 dict dup begin
    /lw currentlinewidth def
    /lc currentlinecap def
    /lj currentlinejoin def
    /ml currentmiterlimit def
    /ds [ currentdash ] def
    /cc [ currentrgbcolor ] def
    /cm matrix currentmatrix def
  end
} bind def
% PATdraw - calculates the boundaries of the object and
% fills it with the current pattern
/PATdraw {			% proc
  save exch
    PATpcalc			% proc nw nh px py
    5 -1 roll exec		% nw nh px py
    newpath
    PATfill			% -
  restore
} bind def
% PATfill - performs the tiling for the shape
/PATfill { % nw nh px py PATfill -
  PATDict /CurrentPattern get dup begin
    setfont
    % Set the coordinate system to Pattern Space
    PatternGState PATsg
    % Set the color for uncolored pattezns
    PaintType 2 eq { PATDict /PColor get PATsc } if
    % Create the string for showing
    3 index string		% nw nh px py str
    % Loop for each of the pattern sources
    0 1 Multi 1 sub {		% nw nh px py str source
	% Move to the starting location
	3 index 3 index		% nw nh px py str source px py
	moveto			% nw nh px py str source
	% For multiple sources, set the appropriate color
	Multi 1 ne { dup PC exch get PATsc } if
	% Set the appropriate string for the source
	0 1 7 index 1 sub { 2 index exch 2 index put } for pop
	% Loop over the number of vertical cells
	3 index 		% nw nh px py str nh
	{			% nw nh px py str
	  currentpoint		% nw nh px py str cx cy
	  2 index oldshow	% nw nh px py str cx cy
	  YStep add moveto	% nw nh px py str
	} repeat		% nw nh px py str
    } for
    5 { pop } repeat
  end
} bind def

% PATkshow - kshow with the current pattezn
/PATkshow {			% proc string
  exch bind			% string proc
  1 index 0 get			% string proc char
  % Loop over all but the last character in the string
  0 1 4 index length 2 sub {
				% string proc char idx
    % Find the n+1th character in the string
    3 index exch 1 add get	% string proc char char+1
    exch 2 copy			% strinq proc char+1 char char+1 char
    % Now show the nth character
    PATsstr dup 0 4 -1 roll put	% string proc chr+1 chr chr+1 (chr)
    false charpath		% string proc char+1 char char+1
    /clip load PATdraw
    % Move past the character (charpath modified the current point)
    currentpoint newpath moveto
    % Execute the user proc (should consume char and char+1)
    mark 3 1 roll		% string proc char+1 mark char char+1
    4 index exec		% string proc char+1 mark...
    cleartomark			% string proc char+1
  } for
  % Now display the last character
  PATsstr dup 0 4 -1 roll put	% string proc (char+1)
  false charpath		% string proc
  /clip load PATdraw
  neewath
  pop pop			% -
} bind def
% PATmp - the makepattern equivalent
/PATmp {			% patdict patmtx PATmp patinstance
  exch dup length 7 add		% We will add 6 new entries plus 1 FID
  dict copy			% Create a new dictionary
  begin
    % Matrix to install when painting the pattern
    TilingType PATtcalc
    /PatternGState PATcg def
    PatternGState /cm 3 -1 roll put
    % Check for multi pattern sources (Level 1 fast color patterns)
    currentdict /Multi known not { /Multi 1 def } if
    % Font dictionary definitions
    /FontType 3 def
    % Create a dummy encoding vector
    /Encoding 256 array def
    3 string 0 1 255 {
      Encoding exch dup 3 index cvs cvn put } for pop
    /FontMatrix matrix def
    /FontBBox BBox def
    /BuildChar {
	mark 3 1 roll		% mark dict char
	exch begin
	Multi 1 ne {PaintData exch get}{pop} ifelse  % mark [paintdata]
	  PaintType 2 eq Multi 1 ne or
	  { XStep 0 FontBBox aload pop setcachedevice }
	  { XStep 0 setcharwidth } ifelse
	  currentdict		% mark [paintdata] dict
	  /PaintProc load	% mark [paintdata] dict paintproc
	end
	gsave
	  false PATredef exec true PATredef
	grestore
	cleartomark		% -
    } bind def
    currentdict
  end				% newdict
  /foo exch			% /foo newlict
  definefont			% newfont
} bind def
% PATpcalc - calculates the starting point and width/height
% of the tile fill for the shape
/PATpcalc {	% - PATpcalc nw nh px py
  PATDict /CurrentPattern get begin
    gsave
	% Set up the coordinate system to Pattern Space
	% and lock down pattern
	PatternGState /cm get setmatrix
	BBox aload pop pop pop translate
	% Determine the bounding box of the shape
	pathbbox			% llx lly urx ury
    grestore
    % Determine (nw, nh) the # of cells to paint width and height
    PatHeight div ceiling		% llx lly urx qh
    4 1 roll				% qh llx lly urx
    PatWidth div ceiling		% qh llx lly qw
    4 1 roll				% qw qh llx lly
    PatHeight div floor			% qw qh llx ph
    4 1 roll				% ph qw qh llx
    PatWidth div floor			% ph qw qh pw
    4 1 roll				% pw ph qw qh
    2 index sub cvi abs			% pw ph qs qh-ph
    exch 3 index sub cvi abs exch	% pw ph nw=qw-pw nh=qh-ph
    % Determine the starting point of the pattern fill
    %(px, py)
    4 2 roll				% nw nh pw ph
    PatHeight mul			% nw nh pw py
    exch				% nw nh py pw
    PatWidth mul exch			% nw nh px py
  end
} bind def

% Save the original routines so that we can use them later on
/oldfill	/fill load def
/oldeofill	/eofill load def
/oldstroke	/stroke load def
/oldshow	/show load def
/oldashow	/ashow load def
/oldwidthshow	/widthshow load def
/oldawidthshow	/awidthshow load def
/oldkshow	/kshow load def

% These defs are necessary so that subsequent procs don't bind in
% the originals
/fill	   { oldfill } bind def
/eofill	   { oldeofill } bind def
/stroke	   { oldstroke } bind def
/show	   { oldshow } bind def
/ashow	   { oldashow } bind def
/widthshow { oldwidthshow } bind def
/awidthshow { oldawidthshow } bind def
/kshow 	   { oldkshow } bind def
/PATredef {
  MyAppDict begin
    {
    /fill { /clip load PATdraw newpath } bind def
    /eofill { /eoclip load PATdraw newpath } bind def
    /stroke { PATstroke } bind def
    /show { 0 0 null 0 0 6 -1 roll PATawidthshow } bind def
    /ashow { 0 0 null 6 3 roll PATawidthshow }
    bind def
    /widthshow { 0 0 3 -1 roll PATawidthshow }
    bind def
    /awidthshow { PATawidthshow } bind def
    /kshow { PATkshow } bind def
  } {
    /fill   { oldfill } bind def
    /eofill { oldeofill } bind def
    /stroke { oldstroke } bind def
    /show   { oldshow } bind def
    /ashow  { oldashow } bind def
    /widthshow { oldwidthshow } bind def
    /awidthshow { oldawidthshow } bind def
    /kshow  { oldkshow } bind def
    } ifelse
  end
} bind def
false PATredef
% Conditionally define setcmykcolor if not available
/setcmykcolor where { pop } {
  /setcmykcolor {
    1 sub 4 1 roll
    3 {
	3 index add neg dup 0 lt { pop 0 } if 3 1 roll
    } repeat
    setrgbcolor - pop
  } bind def
} ifelse
/PATsc {		% colorarray
  aload length		% c1 ... cn length
    dup 1 eq { pop setgray } { 3 eq { setrgbcolor } { setcmykcolor
  } ifelse } ifelse
} bind def
/PATsg {		% dict
  begin
    lw setlinewidth
    lc setlinecap
    lj setlinejoin
    ml setmiterlimit
    ds aload pop setdash
    cc aload pop setrgbcolor
    cm setmatrix
  end
} bind def

/PATDict 3 dict def
/PATsp {
  true PATredef
  PATDict begin
    /CurrentPattern exch def
    % If it's an uncolored pattern, save the color
    CurrentPattern /PaintType get 2 eq {
      /PColor exch def
    } if
    /CColor [ currentrgbcolor ] def
  end
} bind def
% PATstroke - stroke with the current pattern
/PATstroke {
  countdictstack
  save
  mark
  {
    currentpoint strokepath moveto
    PATpcalc				% proc nw nh px py
    clip newpath PATfill
    } stopped {
	(*** PATstroke Warning: Path is too complex, stroking
	  with gray) =
    cleartomark
    restore
    countdictstack exch sub dup 0 gt
	{ { end } repeat } { pop } ifelse
    gsave 0.5 setgray oldstroke grestore
  } { pop restore pop } ifelse
  newpath
} bind def
/PATtcalc {		% modmtx tilingtype PATtcalc tilematrix
  % Note: tiling types 2 and 3 are not supported
  gsave
    exch concat					% tilingtype
    matrix currentmatrix exch			% cmtx tilingtype
    % Tiling type 1 and 3: constant spacing
    2 ne {
	% Distort the pattern so that it occupies
	% an integral number of device pixels
	dup 4 get exch dup 5 get exch		% tx ty cmtx
	XStep 0 dtransform
	round exch round exch			% tx ty cmtx dx.x dx.y
	XStep div exch XStep div exch		% tx ty cmtx a b
	0 YStep dtransform
	round exch round exch			% tx ty cmtx a b dy.x dy.y
	YStep div exch YStep div exch		% tx ty cmtx a b c d
	7 -3 roll astore			% { a b c d tx ty }
    } if
  grestore
} bind def
/PATusp {
  false PATredef
  PATDict begin
    CColor PATsc
  end
} bind def

% this is the pattern fill program from the Second edition Reference Manual
% with changes to call the above pattern fill
% left30
11 dict begin
/PaintType 1 def
/PatternType 1 def
/TilingType 1 def
/BBox [0 0 1 1] def
/XStep 1 def
/YStep 1 def
/PatWidth 1 def
/PatHeight 1 def
/Multi 2 def
/PaintData [
  { clippath } bind
  { 32 16 true [ 32 0 0 -16 0 16 ]
	{<c000c000300030000c000c000300030000c000c000300030
	000c000c00030003c000c000300030000c000c0003000300
	00c000c000300030000c000c00030003>}
     imagemask } bind
] def
/PaintProc {
	pop
	exec fill
} def
currentdict
end
/P1 exch def

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
0 slj 0 slc
 0.06000 0.06000 sc
%
% Fig objects follow
%
% 
% here starts figure with depth 50
% Polyline
30.000 slw
n 1200 1200 m 3600 1200 l 3600 5760 l 1200 5760 l
 cp gs /PC [[1.00 1.00 1.00] [0.00 0.00 0.00]] def
15.00 15.00 sc P1 [16 0 0 -8 80.00 80.00] PATmp PATsp ef gr PATusp gs col0 s gr 
% Polyline
n 1200 1200 m 3600 1200 l 3600 1920 l 1200 1920 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 1200 1920 m 3600 1920 l 3600 3120 l 1200 3120 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 1200 3120 m 3600 3120 l 3600 4200 l 1200 4200 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 1200 4200 m 3600 4200 l 3600 5040 l 1200 5040 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
% Polyline
n 1200 5040 m 3600 5040 l 3600 5760 l 1200 5760 l
 cp gs col7 1.00 shd ef gr gs col0 s gr 
/Times-Roman ff 240.00 scf sf
2280 1560 m
gs 1 -1 sc (header) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 240.00 scf sf
2280 2520 m
gs 1 -1 sc (.text) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 240.00 scf sf
2280 3600 m
gs 1 -1 sc (.data) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 240.00 scf sf
2280 4680 m
gs 1 -1 sc (relocations table) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 240.00 scf sf
2280 5400 m
gs 1 -1 sc (symbol table) dup sw pop 2 div neg 0 rm  col0 sh gr
/Times-Roman ff 270.00 scf sf
2520 840 m
gs 1 -1 sc (Object File) dup sw pop 2 div neg 0 rm  col0 sh gr
% here ends figure;
$F2psEnd
rs
end
showpage
%%EndDocument
end PEND/F2 13/Times-Bold@0 SF(What')225.684 487 Q 3.25(si)-.481 G 3.25
(na.)-3.25 G(o?)-3.25 E F1(Let')33.336 517 Q 3.25(ss)-.715 G
(ee what is actually in an object \214le and ho)-3.25 E 3.25(wi)-.325 G
3.25(tg)-3.25 G(ets there:)-3.25 E/F3 10/Courier@0 SF(/* f1.c */)33.336
529 Q(extern int i;)33.336 541 Q(f\(\))33.336 565 Q({)33.336 577 Q(i=2;)
90.936 589 Q(})33.336 601 Q(/* f2.c */)33.336 625 Q(int i;)33.336 637 Q
(main\(\))33.336 649 Q({)33.336 661 Q(i=1;)90.936 673 Q(f\(\);)90.936
685 Q(})33.336 697 Q F1(In)33.336 712 Q/F4 13/Courier@0 SF(f1.c)4.309 E
F1 4.309(,t)C(he)-4.309 E F4(extern)4.309 E F1 1.058
(storage class for v)4.308 F(ariable)-.325 E/F5 13/Times-Italic@0 SF(i)
4.308 E F1 1.058(tells the compiler that this v)4.308 F 1.058
(ariable is)-.325 F -.195(ex)33.336 727 S .147(ternal to that).195 F F4
(.c)3.398 E F1 3.398(\214le. Therefore,)3.398 F .148
(the compiler does not complain when it does not see a)3.398 F 2.2
(declaration that v)33.336 742 R 5.45(ariable. Instead,)-.325 F 2.2
(it kno)5.45 F 2.2(ws that)-.325 F F4(i)5.45 E F1 2.2(is a global v)5.45
F 2.199(ariable, and should be)-.325 F 0 Cg EP
%%Page: 22 22
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 22)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF .789
(accessed by using an absolute addressing mode.)33.336 120 R .79
(Neither the compiler nor the assembler)7.29 F(kno)33.336 135 Q 1.16
(ws what that actual address will be.)-.325 F 1.159
(That is not decided until the link)7.66 F 1.159(er puts all the)-.13 F
2.041(object \214les together and assigns addresses to symbols.)33.336
150 R 2.041(Therefore, the assembler must)8.541 F(lea)33.336 165 Q .627
-.195(ve a ")-.26 H .237(place-holder" in the object \214le.).195 F(Lik)
6.737 E -.325(ew)-.13 G .236
(ise, in f2.o, there will be a reference to the).325 F(symbol)33.336 180
Q/F2 13/Courier@0 SF(f)3.25 E F1(.)A .38(Let us e)33.336 210 R .381(xam\
ine the assembly language \214les produced \(using an older gcc under L\
inux on)-.195 F(an x86 system\):)33.336 225 Q/F3 10/Courier@0 SF
(**** f1.s)39.336 237 Q(.text)90.936 249 Q(.globl f)90.936 261 Q 18
(.type f,@function)87.336 273 R(f:)39.336 285 Q(pushl %ebp)87.336 297 Q
(*These instructions set up)58.8 E(movl %esp,%ebp)87.336 309 Q
(*the stack frame pointer)92.4 E(movl $2,i)87.336 321 Q 140.4
(leave *Restore)87.336 333 R(frame pointer)6 E(ret)87.336 345 Q(.Lfe1:)
39.336 357 Q 18(.size f,.Lfe1-f)87.336 369 R(**** f2.s)39.336 393 Q
(.text)90.936 405 Q(.globl main)90.936 417 Q 18(.type main,@function)
87.336 429 R(main:)39.336 441 Q(pushl %ebp)87.336 453 Q
(*These instructions set up)58.8 E(movl %esp,%ebp)87.336 465 Q
(*the stack frame pointer)92.4 E(movl $1,i)90.936 477 Q(call f)87.336
489 Q 140.4(leave *Restore)87.336 501 R(frame pointer)6 E(ret)87.336 513
Q(.Lfe1:)39.336 525 Q 18(.size main,.Lfe1-main)87.336 537 R 12
(.comm i,4,4)87.336 549 R F1 .505(The assembler directi)33.336 594 R
-.195(ve)-.325 G F2(.text)3.95 E F1 .504
(tells the assembler that it is assembling opcodes to go in)3.754 F
1.897(the .te)33.336 609 R 1.897(xt section of the object \214le.)-.195
F(The)8.397 E F2(.globl)5.147 E F1(directi)5.147 E 2.287 -.195(ve w)
-.325 H 1.897(ill cause the assembler to).195 F -.195(ex)33.336 624 S
3.379(port the associated symbol as a de\214ning instance.).195 F F2
(.type)9.879 E F1 3.379(is used to pass along)6.629 F 2.484
(information into the object \214le as to the type of the symbol.)33.336
639 R 2.484(Please note that it has)8.984 F .555
(nothing to do with the C language notion of type.)33.336 654 R .554
(Symbol types may either be functions)7.055 F 2.484(or v)33.336 669 R
5.734(ariables. The)-.325 F(link)5.734 E 2.484
(er is able to catch gross errors such as if)-.13 F F2(f)5.735 E F1
2.485(were de\214ned as a)5.735 F -.325(va)33.336 684 S 1.527(riable in)
.325 F F2(f1.c)4.777 E F1 1.527(instead of a function. The)4.777 F F2
(.size)4.777 E F1(directi)4.776 E 1.916 -.195(ve c)-.325 H 1.526
(alculates the size of the).195 F 1.556(function by subtracting the v)
33.336 699 R 1.556
(alue of the symbol representing the \214rst instruction of the)-.325 F
.16(function \(e.g.)33.336 714 R F2(main)3.41 E F1 3.41(\)f)C .16
(rom a placeholder assembler symbol \(e.g.)-3.41 F F2(.Lfe1)3.409 E F1
3.409(\)r)C .159(epresenting the)-3.409 F 1.621(end of the function.)
33.336 729 R 1.621(Note that the CALL to function)8.121 F F2(f)4.871 E
F1 1.621(is done symbolically)4.871 F 4.871(,a)-.845 G 4.871(si)-4.871 G
4.871(st)-4.871 G(he)-4.871 E(assignment into global v)33.336 744 Q
(ariable)-.325 E F2(i)3.25 E F1(.)A 0 Cg EP
%%Page: 23 23
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 23)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF .939
(The resulting object \214le is similar to an a.out \214le, ho)33.336
120 R(we)-.325 E -.195(ve)-.325 G 4.188(ra).195 G .938
(ll addresses are relati)-4.188 F -.195(ve)-.325 G 7.438(.I).195 G(n)
-7.438 E 2.095(addition, the object \214le will ha)33.336 135 R 2.486
-.195(ve a s)-.26 H 2.096(ection kno).195 F 2.096(wn as the)-.325 F/F2
13/Times-Bold@0 SF 2.096(symbol table)5.346 F F1 2.096(containing an)
5.346 F .572(entry for e)33.336 150 R -.195(ve)-.325 G .571(ry symbol t\
hat is either de\214ned or referenced in the \214le, and another sectio\
n).195 F(called the)33.336 165 Q F2 -.234(re)3.25 G(locations table).234
E F1 3.25(,d)C(escribed belo)-3.25 E -.845(w.)-.325 G(No)33.336 195 Q
2.67 -.845(w, l)-.325 H .98(et us vie).845 F 4.23(wt)-.325 G .98(he .te)
-4.23 F .98(xt section of)-.195 F/F3 13/Courier@0 SF(f1.o)4.23 E F1 .98
(\(the listing belo)4.23 F 4.23(ww)-.325 G .981
(as re-formatted from the)-4.36 F(output of objdump -d\):)33.336 210 Q
/F4 10/Courier@0 SF(Offset Opcodes)33.336 222 Q(Disassembly)142.8 E 12
(0000 55)33.336 234 R(pushl %ebp)144 E 12(0001 89E5)33.336 246 R
(movl %esp,%ebp)132 E 12(0003 C7050000000002000000)33.336 258 R
(movl $2,0)36 E 12(000D C9)33.336 270 R(leave)144 E 12(000E C3)33.336
282 R(ret)144 E F1 1.226(First, note that the of)33.336 312 R 1.226
(fset of the \214rst instruction is 0.)-.325 F(Ob)7.726 E(viously)-.195
E 4.476(,t)-.845 G 1.225(his can not be a v)-4.476 F(alid)-.325 E .431
(memory address.)33.336 327 R .431(All of)6.931 F .431
(fsets in object \214les are relati)-.325 F .821 -.195(ve t)-.325 H
3.682(ot).195 G .432(he object \214le.)-3.682 F .432(It isn')6.932 F
3.682(tu)-.234 G .432(ntil the)-3.682 F(link)33.336 342 Q
(er kicks in that symbols g)-.13 E(ain absolute, usable addresses.)-.065
E(Ne)33.336 372 Q 2.098(xt note that in the instruction be)-.195 F 2.097
(ginning at of)-.195 F 2.097(fset 0003, the constant 2 is mo)-.325 F
-.195(ve)-.195 G 5.347(dt).195 G(o)-5.347 E 2.908(memory address 0.)
33.336 387 R 4.988 -1.04(We k)9.408 H(no)1.04 E 6.158(wf)-.325 G 2.908
(rom e)-6.158 F 2.908(xamining the corresponding assembly language)-.195
F .159(input \214le that this is the instruction that mo)33.336 402 R
-.195(ve)-.195 G 3.408(s2i).195 G .158(nto v)-3.408 F(ariable)-.325 E F3
(i)3.408 E F1 6.658(.T)C .158(he assembler has left a)-6.658 F .627
(place-holder of 00000000 in the object \214le where the link)33.336 417
R .627(er will ha)-.13 F 1.017 -.195(ve t)-.26 H 3.878<6f8c>.195 G .628
(ll in the actual)-3.878 F 2.719(32-bit address of symbol)33.336 432 R
F3(i)5.969 E F1 2.719(once that is kno)5.969 F 5.969(wn. C705)-.325 F
2.719(is the x86 machine language)5.969 F 1.505(opcode for the MO)33.336
447 R 1.506
(VL instruction where the source addressing mode is Immediate and)-.65 F
1.411(the destination mode is Absolute.)33.336 462 R 1.411(The ne)7.911
F 1.41(xt 4 bytes are the destination address and the)-.195 F 1.143(\
\214nal 4 bytes of the instruction are the source operand \(which is in\
 Intel-style, or "little-)33.336 477 R(endian" byte order\).)33.336 492
Q(Here is the dump of f2.o:)33.336 522 Q F4(Offset Opcodes)33.336 534 Q
(Disassembly)146.4 E 12(0000 55)33.336 546 R(pushl %ebp)138 E 12
(0001 89E5)33.336 558 R(movl %esp,%ebp)126 E 12
(0003 C7050000000001000000)33.336 570 R(movl $1,0)30 E 12
(000D E8FCFFFFFF)33.336 582 R(call 000E)90 E 12(0012 C9)33.336 594 R
(leave)138 E 12(0013 C3)33.336 606 R(ret)138 E F1 1.796
(Note that the placeholder in the CALL instruction is FFFFFFFC, b)33.336
636 R 1.796(ut the disassembler)-.26 F 2.032(decodes that as 000E.)
33.336 651 R 2.032
(This is because the CALL instruction uses a Program Counter)8.532 F
(Relati)33.336 666 Q 1.659 -.195(ve a)-.325 H 1.269(ddressing mode.).195
F 1.269(The address to which e)7.769 F -.195(xe)-.195 G 1.269
(cution jumps is the operand in the).195 F .776
(instruction added to the v)33.336 681 R .776
(alue of the Program Counter re)-.325 F(gister)-.195 E/F5 13
/Times-Italic@0 SF(corr)4.026 E .776(esponding to the byte)-.481 F(be)
33.336 696 Q 1.842(yond the last byte of the CALL instruction)-.39 F F1
8.342(.I)C 5.092(nt)-8.342 G -.13(wo)-5.092 G 3.272 -.715('s c).13 H
1.842(omplement, FFFFFFFC is -4,).715 F .59
(therefore the CALL appears to be to the instruction at of)33.336 711 R
.59(fset 000E.)-.325 F .59(Of course, all of this)7.09 F 3.47
(is meaningless since it is just a placeholder that will be o)33.336 726
R -.195(ve)-.195 G 3.47(rwritten by the link).195 F(er)-.13 E(.)-.715 E
1.768(Nonetheless, it reminds us that there are dif)33.336 741 R(ferent)
-.325 E F2 1.768(Relocation T)5.018 F(ypes)-.962 E F1 1.768
(depending on the)5.018 F 0 Cg EP
%%Page: 24 24
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 24)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF(addressing mode being used.)33.336 120 Q
(The symbol and relocation tables for the tw)33.336 150 Q 3.25(oo)-.13 G
(bject \214les will look something lik)-3.25 E 3.25(et)-.13 G(his:)-3.25
E/F2 10/Courier@0 SF(f1.o:)33.336 162 Q(SYMBOL TABLE)148.536 174 Q 18
(NAME TYPE)33.336 186 R(VALUE)54 E 42(ff)33.336 198 S 48(unc 0)-42 F
(in .text)6 E 42(iv)33.336 210 S 24(ariable [reference])-42 F
(RELOCATIONS TABLE)148.536 222 Q 12(SYMBOL=i OFFSET=0005)33.336 234 R 6
(LENGTH=4 RELTYPE=ABSOLUTE)12 F(f2.o:)33.336 282 Q(SYMBOL TABLE)148.536
294 Q 18(NAME TYPE)33.336 306 R(VALUE)54 E 42(ff)33.336 318 S 24
(unction [reference])-42 F 42(iv)33.336 330 S 24(ariable 8)-42 F
(in .bss)6 E 18(main function)33.336 342 R 6(0i)30 G 6(n.)-6 G(text)-6 E
(RELOCATIONS TABLE)148.536 354 Q 12(SYMBOL=i OFFSET=0005)33.336 366 R
(RELTYPE=ABSOLUTE)12 E 12(SYMBOL=f OFFSET=000E)33.336 378 R
(RELTYPE=PCRELATIVE)12 E/F3 13/Times-Bold@0 SF(What ld does)230.858 408
Q F1 .001(The \214rst task of)33.336 438 R/F4 13/Courier@0 SF(ld)3.251 E
F1 .001(is to tak)3.251 F 3.251(ei)-.13 G -2.405 -.52(nv e)-3.251 H .001
(ntory of all of the).52 F F4(.o)3.251 E F1
(\214les being presented to it.)3.25 E(It loads)6.5 E 1.298(in the symb\
ol tables from all of the object \214les to create a uni\214ed symbol t\
able for the)33.336 453 R 1.042(entire program.)33.336 468 R 1.042
(There is only one global namespace for all link)7.542 F 1.042
(er symbols.)-.13 F 1.042(This might)7.542 F 1.248
(be considered a de\214cienc)33.336 483 R 6.188 -.845(y. L)-.195 H(et')
.845 E 4.498(ss)-.715 G 1.248(ay we ha)-4.498 F 1.638 -.195(ve a m)-.26
H(odule).195 E F4(foo.c)4.498 E F1 1.248(that de\214nes a function)4.498
F(called)33.336 498 Q F4(calculate)3.827 E F1 7.077(.I)C 3.827(fw)-7.077
G 3.827(ea)-3.827 G .577
(ttempt to incorporate that module into a program written by)-3.827 F
.617(someone else, the)33.336 513 R 3.867(ym)-.195 G .617(ay ha)-3.867 F
1.007 -.195(ve a)-.26 H .617(lso made a function called).195 F F4
(calculate)3.867 E F1 7.117(.I)C 3.867(ti)-7.117 G .617(s, after all, a)
-3.867 F(common name.)33.336 528 Q 2.373(If there is more than one de\
\214ning instance of a symbol, i.e. if a symbol is)33.336 558 R/F5 13
/Times-Italic@0 SF(multiply-)5.622 E(de\214ned)33.336 573 Q F1 5.499(,t)
C 2.249(his is generally a f)-5.499 F 2.249(atal error)-.13 F 8.749(.C)
-.715 G 2.249(onsider what w)-8.749 F 2.249(ould happen if a programmer)
-.13 F .234(accidentally included tw)33.336 588 R 3.483(ov)-.13 G .233
(ersions of function)-3.678 F F4(f)3.483 E F1(abo)3.483 E .623 -.195
(ve i)-.195 H 3.483(nt).195 G .493 -.13(wo d)-3.483 H(if).13 E(ferent)
-.325 E F4(.c)3.483 E F1 3.483(\214les. When)3.483 F F4(f)3.483 E F1
(is called some)33.336 603 Q(where in the program, which v)-.325 E
(ersion should be called?)-.195 E 3.189 -1.04(To a)33.336 633 T 1.109
(meliorate this problem of \215at global link)1.04 F 1.109
(er namespace, a con)-.13 F -.195(ve)-.52 G 1.109(ntion e).195 F 1.109
(xists that one)-.195 F 1.207(should prepend to one')33.336 648 R 4.457
(sg)-.715 G 1.207(lobal v)-4.457 F 1.207
(ariable and function names a reasonably unique pre\214x.)-.325 F .982
(Therefore, we might call our function)33.336 663 R F4(foo_calculate)
4.233 E F1 7.483(.T)C .983(his is less lik)-7.483 F .983
(ely to con\215ict)-.13 F(with another name.)33.336 678 Q(It isn')6.5 E
3.25(tap)-.234 G(erfect solution, b)-3.25 E(ut it w)-.26 E(orks f)-.13 E
(airly well in reality)-.13 E(.)-.845 E .248(In languages lik)33.336 708
R 3.498(eC)-.13 G .248(++, which tak)-3.498 F .248(es name o)-.13 F
-.195(ve)-.195 G .248(rloading to an e).195 F .248
(xtreme, the identi\214ed names)-.195 F 1.478
(used in the source code are)33.336 723 R F3(name-mangled)4.728 E F1
1.478(to be non-con\215icting when placed into the)4.728 F(global link)
33.336 738 Q(er namespace.)-.13 E 0 Cg EP
%%Page: 25 25
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 25)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF 1.125(Global v)33.336 120 R 1.124
(ariable and function names that are intended to remain pri)-.325 F
-.325(va)-.325 G 1.124(te to the).325 F/F2 13/Courier@0 SF(.c)4.374 E F1
1.124(\214le in)4.374 F .615(which the)33.336 135 R 3.865(ya)-.195 G
.615(re declared should be protected with the)-3.865 F F2(static)3.865 E
F1 .615(storage class \(see belo)3.865 F(w\).)-.325 E F2(static)33.336
150 Q F1 .965(symbols still require the assistance of the link)4.215 F
.965(er to be relocated.)-.13 F(Ho)7.465 E(we)-.325 E -.195(ve)-.325 G
2.005 -.52(r, t).195 H(he).52 E .952(use of)33.336 165 R F2(static)4.202
E F1 .953
(causes the compiler and the assembler to \215ag that symbol as a LOCAL)
4.202 F 5.837(symbol. The)33.336 180 R(link)5.837 E 2.587
(er will then enter the symbol into a pri)-.13 F -.325(va)-.325 G 2.587
(te namespace just for the).325 F 2.002
(corresponding object \214le, and the symbol will ne)33.336 195 R -.195
(ve)-.325 G 5.252(rc).195 G 2.002(on\215ict with symbols from other)
-5.252 F(object \214les.)33.336 210 Q .214(There are rare cases where i\
t is useful to deliberately rede\214ne a symbol.)33.336 240 R -.195(Fo)
6.714 G 3.464(ri).195 G .214(nstance, we)-3.464 F 1.642
(may need to change ho)33.336 255 R 4.893(wap)-.325 G 1.643
(iece of code, a)-4.893 F -.325(va)-.26 G 1.643
(ilable only in library or object \214le form,).325 F .824
(calls another function.)33.336 270 R .824(This all f)7.324 F .823
(alls under the heading of "wild and crazy ld tricks" and)-.13 F 1.764
(will not be discussed further)33.336 285 R 8.265(.J)-.715 G 1.765
(ust remember that an)-8.265 F 5.015(yd)-.195 G 1.765
(uplicate symbol de\214nitions are)-5.015 F(generally wrong.)33.336 300
Q .497(There is one antiquated e)33.336 330 R .496(xception which)-.195
F F2(ld)3.746 E F1 .496(still honors: the so-called COMMON block,)3.746
F 3.012(which is a hango)33.336 345 R -.195(ve)-.195 G 6.262(rf).195 G
3.012(rom FOR)-6.262 F 6.262(TRAN. If)-.78 F 3.012
(there are multiple de\214ning instances of a)6.262 F -.325(va)33.336
360 S .716(riable in the bss section \(i.e.).325 F 3.966(ag)7.216 G .716
(lobal v)-3.966 F .716(ariable without an initializer\),)-.325 F F2(ld)
3.966 E F1 .715(will look the)3.966 F .268(other w)33.336 375 R(ay)-.13
E 6.768(.T)-.845 G .268(his is because there really isn')-6.768 F 3.518
(taf)-.234 G .268(atal con\215ict.)-3.648 F .268
(As long as the de\214nitions all)6.768 F(gi)33.336 390 Q 2.132 -.195
(ve t)-.325 H 1.741
(he same size and all agree that it is a bss symbol, there').195 F 4.991
(sn)-.715 G 4.991(ow)-4.991 G 1.741(orry about which)-5.121 F .491
(de\214nition is the correct one.)33.336 405 R .491(All are equi)6.991 F
-.325(va)-.325 G 3.741(lent. So,).325 F .492
(if one accidentally declares a global)3.741 F(uninitialized v)33.336
420 Q(ariable twice, the program will compile \214ne.)-.325 E
(It is slopp)6.5 E 1.69 -.845(y, h)-.13 H -.325(ow).845 G -2.795 -.325
(ev e).325 H -.715(r.).325 G .656(Frequently symbols ha)33.336 450 R
1.046 -.195(ve a d)-.26 H .656(e\214ning instance, b).195 F .655(ut the)
-.26 F 3.905(ya)-.195 G .655(re ne)-3.905 F -.195(ve)-.325 G 3.905(ra)
.195 G .655(ctually referenced.)-3.905 F -.195(Fo)7.155 G(r).195 E -.195
(ex)33.336 465 S 2.372(ample, the programmer may write a function, b)
.195 F 2.373(ut ne)-.26 F -.195(ve)-.325 G 5.623(rc).195 G 2.373
(all it, or declare a global)-5.623 F -.325(va)33.336 480 S
(riable, yet ne).325 E -.195(ve)-.325 G 3.25(ru).195 G(se it in an e)
-3.25 E 3.25(xpression. The)-.195 F(link)3.25 E(er doesn')-.13 E 3.25
(tc)-.234 G(are about this.)-3.25 E(Ho)33.336 510 Q(we)-.325 E -.195(ve)
-.325 G 4.764 -.52(r, i).195 H 6.974(tc).52 G 3.724
(ares deeply about the opposite case: a symbol that is referenced \(by)
-6.974 F 1.941(appearing in a relocations table\) b)33.336 525 R 1.941
(ut which has no de\214ning instance.)-.26 F 1.941(Such a situation)
8.441 F(mak)33.336 540 Q .722(es it impossible for the link)-.13 F .721
(er to complete its task of creating an absolute e)-.13 F -.195(xe)-.195
G(cutable).195 E 1.239(\214le with no dangling references.)33.336 555 R
1.24(Therefore, it will stop with a f)7.739 F 1.24(atal error)-.13 F
4.49(,r)-.52 G 1.24(eporting the)-4.49 F(unde\214ned symbol and the obj\
ect \214le or \214les in which it is referenced.)33.336 570 Q 2.377
(Once all of the symbol de\214nitions and references are resolv)33.336
600 R(ed,)-.195 E F2(ld)5.627 E F1 2.377(will assemble the)5.627 F F2
(a.out)33.336 615 Q F1 3.626(\214le by)3.626 F .376
(concatenating all of the te)3.626 F .376
(xt sections of all of the object \214les, forming the)-.195 F(single)
33.336 630 Q F2(.text)5.048 E F1 1.798(section of the)5.048 F F2(a.out)
5.048 E F1 8.298(.I)C 5.048(nd)-8.298 G 1.798(oing so, the te)-5.048 F
1.797(xt sections are relocated.)-.195 F(An)8.297 E .741
(instruction which w)33.336 645 R .741(as at of)-.13 F .742
(fset 10 in a particular object \214le')-.325 F 3.992(st)-.715 G -.195
(ex)-3.992 G 3.992(ts).195 G .742(ection may no)-3.992 F 3.992(wb)-.325
G 3.992(ea)-3.992 G(t)-3.992 E(of)33.336 660 Q(fset 1034 in the)-.325 E
F2(a.out)3.25 E F1(.)A(Furthermore,)33.336 690 Q F2(ld)3.89 E F1 .64
(has a concept of the)3.89 F F2 .64(load address)3.89 F F1 .639
(of the program, i.e. the memory)3.89 F .77
(address at which the \214rst byte of the)33.336 705 R F2(.text)4.02 E
F1 .77(section of the)4.02 F F2(a.out)4.02 E F1 .771(will be loaded.)
4.021 F(This)7.271 E(kno)33.336 720 Q .276
(wledge is part of con\214guring)-.325 F F2(ld)3.526 E F1 .276
(for a particular operating system and processor type,)3.526 F 2.486
(and is not normally something that the programmer needs to w)33.336 735
R 2.486(orry about.)-.13 F 2.486(The load)8.986 F 0 Cg EP
%%Page: 26 26
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 26)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Roman@0 SF 2.53(address is also placed in the)33.336
120 R/F2 13/Courier@0 SF(a.out)5.78 E F1 2.53
(\214le so the operating system is sure to load the)5.78 F 1.464
(program at the address for which it w)33.336 135 R 1.465(as link)-.13 F
4.715(ed. Kno)-.13 F 1.465(wing the size of each object \214le')-.325 F
(s)-.715 E F2(.text)33.336 150 Q F1(section,)5.528 E F2(ld)5.528 E F1
2.278(can calculate the absolute address that it will occup)5.528 F
5.527(yi)-.13 G 5.527(nt)-5.527 G 2.277(he \214nal)-5.527 F 1.794
(image, and can thus complete the symbol table, assigning absolute v)
33.336 165 R 1.794(alues to each te)-.325 F(xt)-.195 E(symbol.)33.336
180 Q 3.976(As)33.336 210 S .726(imilar process is undertak)-3.976 F
.725(en for the)-.13 F F2(data)3.975 E F1(and)3.975 E F2(bss)3.975 E F1
(sections.)3.975 E F2(ld)7.225 E F1 .725(assigns an absolute)3.975 F
1.702(address to each)33.336 225 R F2(data)4.952 E F1(or)4.952 E F2(bss)
4.952 E F1 1.702
(symbol, based on the con\214gured starting address of the)4.952 F F2
(data)33.336 240 Q F1(and)3.669 E F2(bss)3.669 E F1 .419(memory re)3.669
F 3.669(gions. In)-.195 F .419(the case of)3.669 F F2(data)3.669 E F1
.419(symbols, the initializers contained)3.669 F .335(in the indi)33.336
255 R .335(vidual object \214les are concatenated, forming the)-.325 F
F2(.data)3.585 E F1 .335(section of the)3.585 F F2(a.out)3.585 E F1(,)A
.805(which will thus contain the byte-for)33.336 270 R .805
(-byte image of what that section will look lik)-.26 F 4.055(ew)-.13 G
(hen)-4.055 E .433(the program starts.)33.336 285 R -.195(Fo)6.933 G(r)
.195 E F2(bss)3.683 E F1 .433(symbols, there are ob)3.683 F .433
(viously no initializers.)-.195 F F2(ld)6.933 E F1 -.13(ke)3.683 G .433
(eps track).13 F 1.712(of the total number of)33.336 300 R F2(bss)4.962
E F1 1.711(bytes needed, and places that information into the)4.961 F F2
(a.out)4.961 E F1 2.007(header so the operating system can allocate the\
 memory when the program is loaded.)33.336 315 R 1.65
(During this process, each)33.336 330 R F2(data)4.899 E F1(or)4.899 E F2
(bss)4.899 E F1 1.649(symbol is assigned an absolute address in the)
4.899 F(symbol table.)33.336 345 Q(No)33.336 375 Q(w)-.325 E F2(ld)3.377
E F1 .127(concatenates the v)3.377 F .128
(arious object \214les, processing the relocation records, replacing)
-.325 F 1.707(each "placeholder" with the actual, absolute address that\
 the associated symbol is no)33.336 390 R(w)-.325 E(kno)33.336 405 Q
2.382(wn to ha)-.325 F -.195(ve)-.26 G 8.882(.I).195 G 5.632(nt)-8.882 G
2.383(he case of Program-Counter)-5.632 F(-Relati)-.26 E 2.773 -.195
(ve r)-.325 H 2.383(elocation types, the proper).195 F(of)33.336 420 Q(\
fset is calculated with respect to the absolute address of the placehol\
der in question.)-.325 E/F3 13/Times-Bold@0 SF(Libraries)241.336 450 Q
F1 2.584(When you write a C program, you e)33.336 480 R 2.583
(xpect certain functions, such as)-.195 F F2(printf)5.833 E F1 5.833(,t)
C 5.833(ob)-5.833 G(e)-5.833 E -.26(av)33.336 495 S 3.655
(ailable. These)-.065 F .405(are supplied in the form of a)3.655 F F3
(library)3.656 E F1 6.906(.A)C .406(library is basically a collection)
-3.25 F(of)33.336 510 Q F2(.o)4.856 E F1 1.605(\214les, or)4.855 F -.065
(ga)-.234 G 1.605(nized together under a common wrapper format called a)
.065 F F2(.a)4.855 E F1 4.855(\214le. It)4.855 F(is)4.855 E
(similar to a "tar" or "zip" archi)33.336 525 Q .39 -.195(ve \()-.325 H
(although no compression is pro).195 E(vided\).)-.195 E(Con)33.336 555 Q
-.195(ve)-.52 G 1.165(ntion is that a library).195 F/F4 13
/Times-Italic@0 SF(ZZZ)4.415 E F1 1.165
(is contained in the library \214le:)4.415 F F2(libZZZ.a)4.416 E F1
7.666(.U)C 1.166(sing the)-7.666 F F2(-l)33.336 570 Q F1 .874(option to)
4.125 F F2(cc)4.124 E F1 .874(tells the)4.124 F F2(cc)4.124 E F1 .874
(program to ask the link)4.124 F .874
(er to link with the speci\214ed library)-.13 F(.)-.845 E -.195(Fo)
33.336 585 S 4.488(re).195 G(xample:)-4.683 E F2 1.238(cc myprog.c -lm)
4.488 F F1 1.238(asks for the system library \214le)4.488 F F2(libm.a)
4.488 E F1 1.238(\(the math)4.488 F 2.232
(library\) to be additionally link)33.336 600 R 5.482(ed. By)-.13 F(def)
5.482 E(ault,)-.13 E F2(cc)5.482 E F1(al)5.482 E -.13(wa)-.13 G 2.232
(ys links the standard C library).13 F F2(libc.a)33.336 615 Q F1 6.5(.T)
C(hese libraries are located in a system directory)-6.5 E 3.25(,t)-.845
G(ypically)-3.25 E F2(/usr/lib)3.25 E F1(.)A 1.183
(Although a library embodies a collection of object \214les, the beha)
33.336 645 R 1.183(vior when linking to a)-.26 F .419
(library is slightly dif)33.336 660 R .419(ferent than if one just link)
-.325 F .418(ed in all of the object \214les indi)-.13 F(vidually)-.325
E 6.918(.I)-.845 G(n)-6.918 E .802(the latter case, the)33.336 675 R F2
(.text)4.052 E F1(and)4.052 E F2(.data)4.052 E F1 .802
(sections of each object \214le w)4.052 F .802(ould wind up in the)-.13
F F2(a.out)33.336 690 Q F1 5.579(,r)C -2.925 -.195(eg a)-5.579 H 2.329
(rdless of whether or not an).195 F 2.329
(ything in a particular object \214le w)-.195 F 2.329(as actually)-.13 F
4.582(used. W)33.336 705 R 1.332(ith a library)-.52 F(,)-.845 E F2(ld)
4.583 E F1 -.26(bu)4.583 G 1.333
(ilds a symbol table of all the object \214les in the library).26 F
4.583(,a)-.845 G(nd)-4.583 E 4.032(then only selects those object \214l\
es that are actually needed for inclusion into the)33.336 720 R -.195
(exe)33.336 735 S(cutable.).195 E 0 Cg EP
%%Page: 27 27
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 27)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 13/Times-Bold@0 SF(Dynamic Linking)218.755 120 Q/F2 13
/Times-Roman@0 SF .663
(When dynamic \(shared\) libraries are used, there are tw)33.336 150 R
3.913(op)-.13 G .663(arts to the linkage process.)-3.913 F(At)7.163 E
.152(compile time,)33.336 165 R/F3 13/Courier@0 SF(ld)3.402 E F2 .152
(links ag)3.402 F .151(ainst the dynamic library \(which has a)-.065 F
F3(.so)3.401 E F2 -.195(ex)3.401 G .151(tension in UNIX\)).195 F .771
(for the purpose of learning which symbols are de\214ned by it.)33.336
180 R(Ho)7.272 E(we)-.325 E -.195(ve)-.325 G 1.812 -.52(r, n).195 H .772
(one of the code).52 F 3.422(or data initializers from the dynamic libr\
ary are actually included in the a.out \214le.)33.336 195 R(Instead,)
33.336 210 Q F3(ld)3.25 E F2(records which dynamic libraries were link)
3.25 E(ed ag)-.13 E(ainst.)-.065 E .793(At e)33.336 240 R -.195(xe)-.195
G .794(cution time, the second phase tak).195 F .794
(es place before the)-.13 F F3(main)4.044 E F2 .794(gets in)4.044 F -.26
(vo)-.52 G -.13(ke).26 G 4.044(d. A).13 F(small)4.044 E 3.34
(helper program called)33.336 255 R F3(ld.so)6.59 E F2(\(typically)6.59
E 6.59(,a)-.845 G 3.34(ctual names v)-6.59 F 3.339
(ary depending on operating)-.325 F 1.14(system b)33.336 270 R 1.14
(uild\) is loaded into the process address space by the k)-.26 F 1.141
(ernel and e)-.13 F -.195(xe)-.195 G 4.391(cuted. It).195 F(is)4.391 E
(pro)33.336 285 Q .02(vided with the list of dynamic libraries.)-.195 F
.019(The dynamic loader \214nds each of the required)6.52 F 2.143
(libraries, pro)33.336 300 R 2.143(vides ne)-.195 F 5.393(wm)-.325 G
2.143(emory re)-5.393 F 2.143(gions to hold the te)-.195 F 2.143
(xt and data of each library)-.195 F 5.394(,a)-.845 G(nd)-5.394 E
(\(conceptually\) loads them into those re)33.336 315 Q(gions.)-.195 E
2.478(Some additional magic is required to link the static and the dyna\
mic portions of the)33.336 345 R -.195(exe)33.336 360 S 6.429
(cutable. This).195 F 3.179(aspect is e)6.429 F 3.179
(xtremely speci\214c to the operating system and processor)-.195 F 3.462
(architecture. In)33.336 375 R .212
(general, for functions which are de\214ned in a shared library)3.462 F
3.462(,d)-.845 G .212(ummy stubs)-3.462 F 2.477(are pro)33.336 390 R
2.477(vided in what is kno)-.195 F 2.477(wn as a)-.325 F F1(Pr)5.727 E
(ocedur)-.234 E 5.727(eL)-.234 G 2.477(inkage T)-5.727 F(able)-1.196 E
F2 8.977(.T)C 2.477(hese stubs contain)-8.977 F .587
(jumps to addresses which are \214lled in by the dynamic link)33.336 405
R(er)-.13 E 7.087(.T)-.715 G .586(his allo)-7.087 F .586
(ws the static code)-.325 F 2.125(to mak)33.336 420 R 5.375(ef)-.13 G
2.125(unction calls without being dynamic-a)-5.375 F -.13(wa)-.195 G
5.376(re. Lik).13 F -.325(ew)-.13 G 2.126(ise, a table kno).325 F 2.126
(wn as the)-.325 F F1 1.009(Global Offset T)33.336 435 R(able)-1.196 E
F2(pro)4.259 E 1.009(vides transparent access to an)-.195 F 4.258(yg)
-.195 G 1.008(lobal v)-4.258 F 1.008(ariables which a shared)-.325 F
1.518(library e)33.336 450 R 4.768(xports. The)-.195 F 1.518
(dynamic libraries themselv)4.768 F 1.518
(es need to be compiled in such as w)-.195 F(ay)-.13 E 2.728(that the)
33.336 465 R 5.978(ya)-.195 G 2.728(re capable of being loaded at an)
-5.978 F 5.977(yv)-.195 G 2.727(irtual address.)-5.977 F 2.727
(This is done with the)12.477 F F3(-fpic)33.336 480 Q F2
(\215ag to the compiler)3.25 E(.)-.715 E .7
(There is a slight performance penalty when using dynamic libraries.)
33.336 510 R .7(In additional to the)7.2 F .367(delay in e)33.336 525 R
-.195(xe)-.195 G .367(cuting the program imposed by needing to load and\
 link the libraries, calls to).195 F 2.505(functions in the dynamic lib\
rary require an additional branch, and accesses to global)33.336 540 R
3.543(symbols from within the shared library must use a position-indepe\
ndent addressing)33.336 555 R
(method, which generally requires an indirect addressing mode.)33.336
570 Q .48(One do)33.336 600 R .48(wn-side of dynamic linking is that a \
missing dynamic library \(".so" \214les in UNIX)-.325 F .321
(terms, or "DLL"s in W)33.336 615 R(indo)-.52 E .321
(ws-speak\) will pre)-.325 F -.195(ve)-.325 G .32
(nt a program from running, e).195 F -.195(ve)-.325 G 3.57(ni).195 G
3.57(fi)-3.57 G 3.57(tw)-3.57 G(as)-3.7 E 5.019
(complete and correct at compile time.)33.336 630 R(Ho)11.519 E(we)-.325
E -.195(ve)-.325 G 6.059 -.52(r, t).195 H 5.019(his disadv).52 F 5.02
(antage is more than)-.325 F 2.398(outweighed by the reduction in e)
33.336 645 R -.195(xe)-.195 G 2.398(cutable size and the con).195 F
-.195(ve)-.52 G 2.398(nience of being able to).195 F .833
(correct errors in system libraries on the \215y)33.336 660 R 4.083(,w)
-.845 G .833(ithout ha)-4.083 F .833(ving to locate and recompile each)
-.26 F(and e)33.336 675 Q -.195(ve)-.325 G(ry e).195 E -.195(xe)-.195 G
(cutable based on the f).195 E(aulty library)-.13 E(.)-.845 E 3.012
(The program)33.336 705 R F3(ldd)6.262 E F2 3.012(can be used to deb)
6.262 F 3.011(ug dynamic library resolution problems.)-.26 F(This)9.511
E -.195(ex)33.336 720 S(ample sho).195 E
(ws the dynamic libraries that are needed for)-.325 E F3(ls)3.25 E F2
(on a 32-bit Linux system:)3.25 E/F4 10/Courier@0 SF 6($l)33.336 732 S
(dd /bin/ls)-6 E 0 Cg EP
%%Page: 28 28
%%BeginPageSetup
BP
%%EndPageSetup
/F0 9/Times-Roman@0 SF(ECE357:Computer Operating Systems)33.336 60 Q
(Unit 5/pg 28)71.748 E(\2512013 Jef)142.155 E 2.25(fH)-.225 G(akner)
-2.25 E/F1 10/Courier@0 SF(linux-gate.so.1 =>)81.336 117 Q
(\(0xb77c4000\))12 E(librt.so.1 => /lib/librt.so.1 \(0xb77b6000\))81.336
129 Q(libacl.so.1 => /lib/libacl.so.1 \(0xb77ad000\))81.336 141 Q
(libc.so.6 => /lib/libc.so.6 \(0xb765b000\))81.336 153 Q
(libpthread.so.0 => /lib/libpthread.so.0 \(0xb7642000\))81.336 165 Q
(/lib/ld-linux.so.2 \(0xb77c5000\))81.336 177 Q
(libattr.so.1 => /lib/libattr.so.1 \(0xb763b000\))81.336 189 Q/F2 13
/Times-Roman@0 SF 2.259(The numbers in parentheses are the addresses at\
 which each of the dynamic libraries)33.336 204 R -.13(wo)33.336 219 S
(uld load if the program were actually being e).13 E -.195(xe)-.195 G
(cuted.).195 E 6.767
(Under certain circumstances, such as security-sensiti)33.336 249 R
7.157 -.195(ve a)-.325 H 6.767(pplications, it may be).195 F 1.571
(appropriate to use static linkage.)33.336 264 R 1.571
(This ensures that the program will al)8.071 F -.13(wa)-.13 G 1.572
(ys be able to).13 F(run, and will al)33.336 279 Q -.13(wa)-.13 G
(ys run with e).13 E(xactly the e)-.195 E(xpected code.)-.195 E 0 Cg EP
%%Trailer
end
%%EOF
