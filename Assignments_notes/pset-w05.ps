%!PS-Adobe-3.0
%%Creator: groff version 1.19.1
%%CreationDate: Thu Oct 24 01:35:05 2013
%%DocumentNeededResources: font Times-Roman
%%+ font Helvetica-Bold
%%+ font Times-Bold
%%+ font Courier
%%+ font Times-Italic
%%DocumentSuppliedResources: procset grops 1.19 1
%%Pages: 2
%%PageOrder: Ascend
%%DocumentMedia: Default 612 792 0 () ()
%%Orientation: Portrait
%%EndComments
%%BeginDefaults
%%PageMedia: Default
%%EndDefaults
%%BeginProlog
%%BeginResource: procset grops 1.19 1
%!PS-Adobe-3.0 Resource-ProcSet
/setpacking where{
pop
currentpacking
true setpacking
}if
/grops 120 dict dup begin
/SC 32 def
/A/show load def
/B{0 SC 3 -1 roll widthshow}bind def
/C{0 exch ashow}bind def
/D{0 exch 0 SC 5 2 roll awidthshow}bind def
/E{0 rmoveto show}bind def
/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
/G{0 rmoveto 0 exch ashow}bind def
/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/I{0 exch rmoveto show}bind def
/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
/K{0 exch rmoveto 0 exch ashow}bind def
/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/M{rmoveto show}bind def
/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
/O{rmoveto 0 exch ashow}bind def
/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/Q{moveto show}bind def
/R{moveto 0 SC 3 -1 roll widthshow}bind def
/S{moveto 0 exch ashow}bind def
/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
/SF{
findfont exch
[exch dup 0 exch 0 exch neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/MF{
findfont
[5 2 roll
0 3 1 roll
neg 0 0]makefont
dup setfont
[exch/setfont cvx]cvx bind def
}bind def
/level0 0 def
/RES 0 def
/PL 0 def
/LS 0 def
/MANUAL{
statusdict begin/manualfeed true store end
}bind def
/PLG{
gsave newpath clippath pathbbox grestore
exch pop add exch pop
}bind def
/BP{
/level0 save def
1 setlinecap
1 setlinejoin
72 RES div dup scale
LS{
90 rotate
}{
0 PL translate
}ifelse
1 -1 scale
}bind def
/EP{
level0 restore
showpage
}bind def
/DA{
newpath arcn stroke
}bind def
/SN{
transform
.25 sub exch .25 sub exch
round .25 add exch round .25 add exch
itransform
}bind def
/DL{
SN
moveto
SN
lineto stroke
}bind def
/DC{
newpath 0 360 arc closepath
}bind def
/TM matrix def
/DE{
TM currentmatrix pop
translate scale newpath 0 0 .5 0 360 arc closepath
TM setmatrix
}bind def
/RC/rcurveto load def
/RL/rlineto load def
/ST/stroke load def
/MT/moveto load def
/CL/closepath load def
/Fr{
setrgbcolor fill
}bind def
/setcmykcolor where{
pop
/Fk{
setcmykcolor fill
}bind def
}if
/Fg{
setgray fill
}bind def
/FL/fill load def
/LW/setlinewidth load def
/Cr/setrgbcolor load def
/setcmykcolor where{
pop
/Ck/setcmykcolor load def
}if
/Cg/setgray load def
/RE{
findfont
dup maxlength 1 index/FontName known not{1 add}if dict begin
{
1 index/FID ne{def}{pop pop}ifelse
}forall
/Encoding exch def
dup/FontName exch def
currentdict end definefont pop
}bind def
/DEFS 0 def
/EBEGIN{
moveto
DEFS begin
}bind def
/EEND/end load def
/CNT 0 def
/level1 0 def
/PBEGIN{
/level1 save def
translate
div 3 1 roll div exch scale
neg exch neg exch translate
0 setgray
0 setlinecap
1 setlinewidth
0 setlinejoin
10 setmiterlimit
[]0 setdash
/setstrokeadjust where{
pop
false setstrokeadjust
}if
/setoverprint where{
pop
false setoverprint
}if
newpath
/CNT countdictstack def
userdict begin
/showpage{}def
/setpagedevice{}def
}bind def
/PEND{
clear
countdictstack CNT sub{end}repeat
level1 restore
}bind def
end def
/setpacking where{
pop
setpacking
}if
%%EndResource
%%EndProlog
%%BeginSetup
%%BeginFeature: *PageSize Default
<< /PageSize [ 612 792 ] /ImagingBBox null >> setpagedevice
%%EndFeature
%%IncludeResource: font Times-Roman
%%IncludeResource: font Helvetica-Bold
%%IncludeResource: font Times-Bold
%%IncludeResource: font Courier
%%IncludeResource: font Times-Italic
grops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
def/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
/scaron/zcaron/Ydieresis/trademark/quotesingle/Euro/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
/Times-Italic@0 ENC0/Times-Italic RE/Courier@0 ENC0/Courier RE
/Times-Bold@0 ENC0/Times-Bold RE/Helvetica-Bold@0 ENC0/Helvetica-Bold RE
/Times-Roman@0 ENC0/Times-Roman RE
%%EndSetup
%%Page: 1 1
%%BeginPageSetup
BP
%%EndPageSetup
/F0 10/Times-Roman@0 SF(ECE357:Computer Operating Systems)69.336 48 Q
(PS 5/pg 1)41.55 E(\2512013 Jef)119.78 E 2.5(fH)-.25 G(akner)-2.5 E/F1
11/Times-Roman@0 SF 3.071(As)58 97 S .321(ophisticated programming tech\
nique is to create "test programs" which probe for the e)-3.071 F .321
(xistence of certain features)-.165 F 2.685(on a tar)58 110 R 2.685
(get platform, or which "pro)-.198 F -.165(ve)-.165 G 5.435("t).165 G
2.685(hat something w)-5.435 F 2.685(orks a certain w)-.11 F(ay)-.11 E
8.186(.F)-.715 G 2.686(or e)-8.351 F 2.686(xample, man)-.165 F 5.436(yo)
-.165 G(pen-source)-5.436 E .681(programs use the GNU autoconf utility \
to automatically test for things such as the size of a long, and create\
 header)58 123 R
(\214les so that code can be compiled automatically on a v)58 136 Q
(ariety of platforms.)-.275 E .781
(In this assignment, you will be creating test programs to disco)58 162
R -.165(ve)-.165 G 3.532(rt).165 G .782(he answer to a v)-3.532 F .782
(ariety of questions ha)-.275 F .782(ving to do)-.22 F .233
(with the virtual memory system.)58 175 R .232
(Of course, you \(should\) already kno)5.732 F 2.982(wt)-.275 G .232
(he answers....the)-2.982 F 2.982(ya)-.165 G .232
(re probably in this unit')-2.982 F(s)-.605 E 2.963(lecture notes, b)58
188 R 2.964(ut your task is to create a program or system of programs t\
o learn the answer without user)-.22 F(interv)58 201 Q(ention.)-.165 E
/F2 11/Helvetica-Bold@0 SF(Pr)227.256 227 Q(ob)-.22 E(lem 1 -- Memor)
-.11 E(y-mapped \214les).11 E F1(Write a program or series of programs \
to answer these questions about memory-mapped \214les:)58 246 Q .086
(A: ")58 265 R/F3 11/Times-Bold@0 SF .086
(When one has mapped a \214le f)B .085(or r)-.275 F .085
(ead-only access, b)-.198 F .085(ut attempts to write to that mapped ar)
-.22 F .085(ea, what signal is)-.198 F(generated?")58 278 Q F1 .027
(B: ")58 297 R F3 .027(If one maps a \214le with MAP_SHARED and then wr\
ites to the mapped memory)B 2.778(,i)-.605 G 2.778(st)-2.778 G .028
(hat update immediately)-2.778 F(visible when accessing the \214le thr)
58 310 Q(ough the traditional lseek\(2\)/r)-.198 E
(ead\(2\) system calls?)-.198 E F1(")A(C:)58 329 Q F3
(Same question as abo)2.75 E -.11(ve)-.11 G 2.75(,e).11 G(xcept f)-2.75
E(or MAP_PRIV)-.275 E -1.045(AT)-1.485 G(E.)1.045 E F1 1.576(D: ")58 348
R F3 1.576(Say a pr)B 1.576(e-existing \214le of a certain size which i\
s not an exact multiple of the page size is mapped with)-.198 F 3.927
(MAP_SHARED and r)58 361 R 3.928
(ead/write access, and one writes to the mapped memory just bey)-.198 F
3.928(ond the byte)-.275 F(corr)58 374 Q .133
(esponding to the last byte of the existing \214le.)-.198 F .133
(Does the size of the \214le thr)5.633 F .133
(ough the traditional interface \(e.g)-.198 F(.)-.165 E/F4 11/Courier@0
SF(stat\(2\))58 387 Q F3 2.75(\)c)C(hange?)-2.75 E F4 .649(E: ")58 406 R
F3 .649(If the answer to the abo)B .869 -.11(ve q)-.11 H .65
(uestion is NO, let us say that after perf).11 F .65(orming the af)-.275
F(or)-.275 E .65(ementioned memory)-.198 F 1.69(write, one then incr)58
419 R 1.689(eased the size of the \214le bey)-.198 F 1.689
(ond the written ar)-.275 F 1.689(ea, without o)-.198 F -.11(ve)-.11 G
-.407(r-).11 G 1.689(writing the inter).407 F -.11(ve)-.11 G(ning).11 E
1.605(contents \(e.g)58 432 R 4.356(.b)-.165 G 4.356(yu)-4.356 G(sing)
-4.356 E F4(lseek\(2\))4.356 E F3 1.606(and then)4.356 F F4(write\(2\))
4.356 E F3 1.606(with a size of 1\), thus cr)4.356 F 1.606
(eating a 'hole' in the \214le.)-.198 F .172
(What happens to the data that had been written to this hole pr)58 445 R
-.165(ev)-.198 G .172(iously via the memory-map?).165 F(Ar)5.672 E 2.922
(et)-.198 G .172(hey visible)-2.922 F(in the \214le)58 458 Q F4(")A(F:)
58 477 Q F3(Let')7.42 E 3.57(ss)-.407 G .82(ay ther)-3.57 F 3.57(ei)
-.198 G 3.57(sa)-3.57 G 3.57(ne)-3.57 G .82
(xisting small \214le \(say 10 bytes\).)-3.57 F .821(Can y)6.321 F .821
(ou establish a v)-.275 F .821(alid mmap r)-.11 F .821(egion tw)-.198 F
3.571(op)-.11 G(ages)-3.571 E 1.829(\(8192 bytes\) long?)58 490 R 1.829
(If so, what signal is deli)7.329 F -.11(ve)-.11 G -.198(re).11 G 4.579
(dw).198 G 1.828(hen attempting to access memory in the second page?)
-4.579 F(What about the \214rst page?)58 503 Q(Explain any differ)5.5 E
(ences in these outcomes.)-.198 E/F5 11/Times-Italic@0 SF
(Sample output.)58 529 Q -1.012(Yo)5.5 G
(ur output does not have to matc)1.012 E 2.75(ht)-.165 G(his e)-2.75 E
(xactly)-.22 E F4(:)A/F6 10/Courier@0 SF 6($.)58 543 S(/mm2 D)-6 E
(Creating 8195 byte random file testfile)58 557 Q(1+0 records in)58 571
Q(1+0 records out)58 585 Q
(The size of the file as reported by fstat is 8195)58 599 Q
(about to MAP_SHARED)58 613 Q(About to write 4 bytes to offset 8195)58
627 Q(The new size of the file as reported by fstat is 8195)58 641 Q
(File dump starting at offset 8195, read req 4, ret 0)58 655 Q(<EOF>)58
683 Q(Memory dump starting at offset 8195)58 697 Q 0 Cg EP
%%Page: 2 2
%%BeginPageSetup
BP
%%EndPageSetup
/F0 11/Times-Roman@0 SF(ECE357:Computer Operating Systems)36 52 Q
(PS 5/pg 2)78.105 E(\2512013 Jef)164.158 E 2.75(fH)-.275 G(akner)-2.75 E
/F1 10/Courier@0 SF 6(<58> <59> <5A> <00>)64 105 R
(In response to question D,)58 119 Q(NO, the file size does not change)
12 E(About to expand file by 13 bytes and write\(2\) to new end)58 133 Q
(Memory dump starting at offset 8195 for 16 bytes)58 147 Q 6
(<58> <59> <5A> <00> <00> <00> <00> <00> <00> <00> <41> <42> <43>)64 161
R 6(<00> <00> <00>)70 175 R
(File dump starting at offset 8195, read req 16, ret 13)58 189 Q 6
(<58> <59> <5A> <00> <00> <00> <00> <00> <00> <00> <41> <42> <43>)64 203
R(<EOF>)58 217 Q(In response to question E:)58 231 Q
(YES, the data previously written to the hole remain)12 E/F2 11
/Helvetica-Bold@0 SF(Pr)166.723 257 Q(ob)-.22 E
(lem 2 -- Stopping a Core Dump -- 1 P)-.11 E(oint Extra Credit)-.44 E F0
1.446(Write a similar test program to determine the page size of the sy\
stem e)58 276 R(xperimentally)-.165 E 4.196(,b)-.715 G 4.196(yd)-4.196 G
1.447(eliberately creating an)-4.196 F(in)58 289 Q -.275(va)-.44 G .442
(lid memory access by going be).275 F .441
(yond the end of an established memory re)-.165 F .441
(gion \(either the heap, as determined by)-.165 F .629
(brk/sbrk, or a MAP_ANONYMOUS re)58 302 R .629(gion of your o)-.165 F
.629(wn creation\).)-.275 F .629(Intercept the resulting signal, gro)
6.129 F 3.38(wt)-.275 G .63(he memory)-3.38 F(re)58 315 Q 1.224
(gion by one byte, and continue until the ne)-.165 F 1.223(xt f)-.165 F
1.223(ault is recei)-.11 F -.165(ve)-.275 G 3.973(d. By).165 F 1.223
(subtracting the tw)3.973 F 3.973(of)-.11 G 1.223
(ault addresses, you will)-4.083 F(compute the page size.)58 328 Q 0 Cg
EP
%%Trailer
end
%%EOF
